[
    {
        "id": "4cac3c00.1820d4",
        "type": "tab",
        "label": "Security",
        "disabled": false,
        "info": ""
    },
    {
        "id": "c93dd8ec.4e17d8",
        "type": "tab",
        "label": "Menu Bar",
        "disabled": false,
        "info": ""
    },
    {
        "id": "9bd49621.7134c8",
        "type": "tab",
        "label": "Ti & Da & We",
        "disabled": false,
        "info": ""
    },
    {
        "id": "22477ce2.39ef74",
        "type": "tab",
        "label": "Tasks",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b2ea4617.40f5d8",
        "type": "tab",
        "label": "Relays",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b660324d.e4215",
        "type": "tab",
        "label": "Temp & Humi",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2b170c60.0fddc4",
        "type": "tab",
        "label": "Weather",
        "disabled": false,
        "info": ""
    },
    {
        "id": "24b5c374.60b1dc",
        "type": "tab",
        "label": "Camera",
        "disabled": false,
        "info": ""
    },
    {
        "id": "266c41c.85b30be",
        "type": "tab",
        "label": "Console Debug",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ee7f4569.0ab7b8",
        "type": "tab",
        "label": "Notifications",
        "disabled": false,
        "info": ""
    },
    {
        "id": "366f4532.277e5a",
        "type": "ui_base",
        "theme": {
            "name": "theme-custom",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "Verdana,Verdana,Geneva,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "AIME",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#4B7930",
                    "value": "#4B7930",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#4B7930",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#6db046",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#4b7930",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "AIME - SMART HOME",
            "hideToolbar": "true",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "false",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 43,
                "sy": 43,
                "gx": 11,
                "gy": 11,
                "cx": 11,
                "cy": 11,
                "px": 3,
                "py": 3
            }
        }
    },
    {
        "id": "458a2311.052e6c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "569c82bb.b3d6ac",
        "order": 10,
        "width": "6",
        "height": "4"
    },
    {
        "id": "3182a9ef.cb3af6",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8b5131d9.4089e",
        "order": 11,
        "width": "3",
        "height": "4"
    },
    {
        "id": "e905af6.2343a5",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "aa18eed1.47818",
        "order": 12,
        "width": "3",
        "height": "2"
    },
    {
        "id": "91ef375e.69c858",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "fac32365.c373",
        "order": 13,
        "width": 1,
        "height": "8"
    },
    {
        "id": "78dda63b.ec5198",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2d08dc94.1f00a4",
        "order": 4,
        "width": "16",
        "height": 1
    },
    {
        "id": "b1c64c1d.093f4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "33ff33f6.957bac",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "9f8b1e4e.70796",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "e39aa2b.ce0846",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "f6c884ce.fe2858",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "859232fb.412e8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "974cbfc8.95142",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "c8f3ddb4.91bfb",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "af9f3be0.914da8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "bfe28ad.146a978",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "58627e0b.edbfb",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "5997ca14.bdd304",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "9da0d539.0d22b8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "42e3f70e.663038",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "56939b5.4f7f264",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "8435570d.3ecd48",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "bf712fbe.86b21",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "cb575fe0.5b1e5",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "f93b951a.428328",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "d78b2190.d636c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 2,
        "width": 7,
        "height": 1
    },
    {
        "id": "4281bd3d.fa9ab4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "361d0146.f991ee",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "c69ef164.3e4fc",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 10,
        "width": 1,
        "height": 1
    },
    {
        "id": "8f487aad.727ab8",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "ac20ebf1.e0f0f8",
        "type": "ui_group",
        "z": "",
        "name": "Bedroom",
        "tab": "bc2f9d7b.85b3b",
        "order": 5,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "31234425.66667c",
        "type": "ui_group",
        "z": "",
        "name": "Hall - Light",
        "tab": "bc2f9d7b.85b3b",
        "order": 7,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "6fa453e5.dfc11c",
        "type": "ui_group",
        "z": "",
        "name": "Kitchen - Light",
        "tab": "bc2f9d7b.85b3b",
        "order": 8,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "34ece2d5.a2c7ae",
        "type": "ui_group",
        "z": "",
        "name": "Beathroom - Boiler",
        "tab": "bc2f9d7b.85b3b",
        "order": 10,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "5f8c4e0a.2a18d",
        "type": "ui_group",
        "z": "",
        "name": "Weather - API",
        "tab": "bc2f9d7b.85b3b",
        "order": 3,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "6b806dc.aa87394",
        "type": "ui_tab",
        "z": "",
        "name": "AIME - Smart Home",
        "icon": "fa-unlock-alt",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bcd8bbcc.1ce648",
        "type": "ui_group",
        "z": "",
        "name": "Camera Moto",
        "tab": "bc2f9d7b.85b3b",
        "order": 4,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "f501f49e.cd2728",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "bc2f9d7b.85b3b",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "d64fbf3f.5759b",
        "type": "ui_tab",
        "z": "",
        "name": "Camera Moto",
        "icon": "fa-video-camera",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b62d612b.1048d",
        "type": "ui_group",
        "z": "",
        "name": "Camera Moto",
        "tab": "d64fbf3f.5759b",
        "order": 3,
        "disp": false,
        "width": 12,
        "collapse": false
    },
    {
        "id": "859f6fcc.75641",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "569c82bb.b3d6ac",
        "order": 10,
        "width": "6",
        "height": "4"
    },
    {
        "id": "43c8670.18e6598",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8b5131d9.4089e",
        "order": 11,
        "width": "3",
        "height": "4"
    },
    {
        "id": "80abb402.8f8f28",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "aa18eed1.47818",
        "order": 12,
        "width": "3",
        "height": "2"
    },
    {
        "id": "14378b22.2dbeb5",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "fac32365.c373",
        "order": 13,
        "width": 1,
        "height": "8"
    },
    {
        "id": "b691b844.650898",
        "type": "ui_group",
        "z": "",
        "name": "Everything Closed",
        "tab": "bc2f9d7b.85b3b",
        "order": 11,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "573025eb.d55fbc",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "bc2f9d7b.85b3b",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "25efb989.76ba06",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "d64fbf3f.5759b",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "42cac060.e8",
        "type": "ui_group",
        "z": "266c41c.85b30be",
        "name": "MQTT Console",
        "tab": "c39ab949.bc4b88",
        "order": 3,
        "disp": false,
        "width": 12,
        "collapse": false
    },
    {
        "id": "c39ab949.bc4b88",
        "type": "ui_tab",
        "z": "",
        "name": "Console Debug",
        "icon": "fa-cogs",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "db8dd4b5.e04c28",
        "type": "ui_group",
        "z": "",
        "name": "Living",
        "tab": "bc2f9d7b.85b3b",
        "order": 6,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "92977515.6d9228",
        "type": "ui_tab",
        "z": "",
        "name": "History of Temp and Humi",
        "icon": "fa-thermometer-half ",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5f30102c.f5fa3",
        "type": "ui_group",
        "z": "",
        "name": "Temperatures and Humidity - Berdroom",
        "tab": "92977515.6d9228",
        "order": 3,
        "disp": false,
        "width": 12,
        "collapse": false
    },
    {
        "id": "6a3e3f4f.c83b2",
        "type": "ui_group",
        "z": "",
        "name": "Temperatures and Humidity - Living",
        "tab": "92977515.6d9228",
        "order": 4,
        "disp": false,
        "width": 12,
        "collapse": false
    },
    {
        "id": "2b51e43d.94519c",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "92977515.6d9228",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "894d1990.bc7798",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2d08dc94.1f00a4",
        "order": 4,
        "width": "16",
        "height": 1
    },
    {
        "id": "98bc6371.27772",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "92977515.6d9228",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "1dbf72dd.295fad",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "c39ab949.bc4b88",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "5c06a1b2.afde9",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "2e2a2b85.075784",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "bb7c33f5.d0047",
        "type": "ui_tab",
        "z": "",
        "name": "Tasks",
        "icon": "fa-tasks",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d3ff2069.37845",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "bb7c33f5.d0047",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "51eff873.87cf38",
        "type": "ui_group",
        "z": "",
        "name": "Control Temp - Bedroom",
        "tab": "bb7c33f5.d0047",
        "order": 3,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "696f79d7.965228",
        "type": "ui_group",
        "z": "",
        "name": "Control Temp - Living",
        "tab": "bb7c33f5.d0047",
        "order": 4,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "398ab202.dad53e",
        "type": "ui_group",
        "z": "",
        "name": "Master switches",
        "tab": "2e2a2b85.075784",
        "order": 3,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "3d7ad0dc.00ec1",
        "type": "ui_group",
        "z": "",
        "name": "Wind",
        "tab": "2e2a2b85.075784",
        "order": 6,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "d14a4dab.a30fb",
        "type": "ui_group",
        "z": "",
        "name": "Humidity",
        "tab": "2e2a2b85.075784",
        "order": 4,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "2e2a2b85.075784",
        "type": "ui_tab",
        "z": "",
        "name": "Weather",
        "icon": "fa-thermometer-half",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fb07d408.d49358",
        "type": "ui_group",
        "z": "",
        "name": "Condition L & H",
        "tab": "2e2a2b85.075784",
        "order": 5,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "3bde2bde.ab9fc4",
        "type": "ui_group",
        "z": "",
        "name": "Console",
        "tab": "bc2f9d7b.85b3b",
        "order": 14,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "f616446d.a9a168",
        "type": "ui_group",
        "z": "",
        "name": "Temperature control Living",
        "tab": "bc2f9d7b.85b3b",
        "order": 13,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "911c7eba.17d32",
        "type": "ui_group",
        "z": "",
        "name": "Control -  Boiler",
        "tab": "bb7c33f5.d0047",
        "order": 5,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "9dda77f6.032288",
        "type": "ui_group",
        "z": "",
        "name": "Control - Air Cleaning",
        "tab": "bb7c33f5.d0047",
        "order": 6,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "50c34ab8.b9c814",
        "type": "ui_group",
        "z": "",
        "name": "Manual control",
        "tab": "bc2f9d7b.85b3b",
        "order": 15,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "b2b87cff.8f95d",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "bb7c33f5.d0047",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "3b4338fb.13dca8",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "2e2a2b85.075784",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "dd8c7747.792a18",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "d64fbf3f.5759b",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "d404ecb7.6bc38",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "c39ab949.bc4b88",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "bb23c549.413488",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8a6301f2.577b5",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "12ae9fb4.7c5c7",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8a6301f2.577b5",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "b4483a3b.d61fc8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8a6301f2.577b5",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "6450b586.0835ec",
        "type": "ui_group",
        "z": "",
        "name": "Day 0",
        "tab": "2e2a2b85.075784",
        "order": 9,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "8546ecab.36cf1",
        "type": "ui_group",
        "z": "",
        "name": "Day 1",
        "tab": "2e2a2b85.075784",
        "order": 10,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "72d4dd28.131464",
        "type": "ui_group",
        "z": "",
        "name": "Day 2",
        "tab": "2e2a2b85.075784",
        "order": 11,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "cd14f875.404f58",
        "type": "ui_group",
        "z": "",
        "name": "Day 3",
        "tab": "2e2a2b85.075784",
        "order": 12,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "1acc37d.d7c72c8",
        "type": "ui_group",
        "z": "",
        "name": "Day 4",
        "tab": "2e2a2b85.075784",
        "order": 13,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "bca1b8f.d8c3948",
        "type": "ui_group",
        "z": "",
        "name": "Day 5",
        "tab": "2e2a2b85.075784",
        "order": 14,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "b445117c.93546",
        "type": "ui_group",
        "z": "",
        "name": "Day 6",
        "tab": "2e2a2b85.075784",
        "order": 15,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "15157b56.1f4715",
        "type": "ui_group",
        "z": "",
        "name": "Day 7",
        "tab": "2e2a2b85.075784",
        "order": 16,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "4c12246f.4ed6fc",
        "type": "ui_group",
        "z": "",
        "name": "Temperature control Bedroom",
        "tab": "bc2f9d7b.85b3b",
        "order": 12,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "bc2f9d7b.85b3b",
        "type": "ui_tab",
        "z": "",
        "name": "Home",
        "icon": "fa-home",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "cb19e7c9.938b58",
        "type": "ui_group",
        "z": "",
        "name": "Pin Lock",
        "tab": "6b806dc.aa87394",
        "order": 3,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "401a958a.ea354c",
        "type": "ui_group",
        "z": "",
        "name": "Logo&Text",
        "tab": "6b806dc.aa87394",
        "order": 1,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "29d03efd.522e52",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "5f8c4e0a.2a18d",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "a706ea6e.d57448",
        "type": "ui_group",
        "z": "",
        "name": "Power by ...",
        "tab": "6b806dc.aa87394",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "b765e113.5c044",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Living - Light",
        "label": "<font size=4>Living",
        "tooltip": "",
        "group": "db8dd4b5.e04c28",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Living_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-lightbulb-o",
        "offcolor": "white",
        "x": 410,
        "y": 240,
        "wires": [
            [
                "9656e4d1.48bd38"
            ]
        ]
    },
    {
        "id": "9656e4d1.48bd38",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Living - Light",
        "topic": "Living_Light",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 710,
        "y": 240,
        "wires": []
    },
    {
        "id": "a97f6910.ef7968",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Bedroom - Light",
        "label": "<font size=4>Bedroom",
        "tooltip": "",
        "group": "ac20ebf1.e0f0f8",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Bedroom_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-lightbulb-o",
        "offcolor": "white",
        "x": 420,
        "y": 60,
        "wires": [
            [
                "4bd0bbb8.b6b6a4"
            ]
        ]
    },
    {
        "id": "77631691.1da6b8",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Hall - Light",
        "label": "<font size=4>Hall",
        "tooltip": "",
        "group": "31234425.66667c",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Hall_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-lightbulb-o",
        "offcolor": "white",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "650422fa.480ccc"
            ]
        ]
    },
    {
        "id": "c5d3ae37.d9a99",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Bathroom Boiler",
        "label": "<font size=4>Boiler",
        "tooltip": "",
        "group": "34ece2d5.a2c7ae",
        "order": 2,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Bathroom_Boiler",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-bath",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-bath",
        "offcolor": "white",
        "x": 620,
        "y": 720,
        "wires": [
            [
                "a9dd8d0e.6828e"
            ]
        ]
    },
    {
        "id": "52021dc2.13f5f4",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Temperature Control - Bedroom",
        "label": "",
        "tooltip": "",
        "group": "4c12246f.4ed6fc",
        "order": 2,
        "width": 1,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "bedroom_heating",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-thermometer-half",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-thermometer-half",
        "offcolor": "white",
        "x": 470,
        "y": 360,
        "wires": [
            [
                "42d35f1c.d259f"
            ]
        ]
    },
    {
        "id": "4bd0bbb8.b6b6a4",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Bedroom - Light",
        "topic": "Bedroom_Light",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 720,
        "y": 60,
        "wires": []
    },
    {
        "id": "650422fa.480ccc",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Hall - Light",
        "topic": "Hall_Light",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 710,
        "y": 120,
        "wires": []
    },
    {
        "id": "a9dd8d0e.6828e",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Bathroom Boiler",
        "topic": "Bathroom_Boiler",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 920,
        "y": 720,
        "wires": []
    },
    {
        "id": "42d35f1c.d259f",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Electric Heater Bedroom",
        "topic": "bedroom_heating",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 750,
        "y": 360,
        "wires": []
    },
    {
        "id": "acf93890.4244d8",
        "type": "inject",
        "z": "9bd49621.7134c8",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 110,
        "y": 120,
        "wires": [
            [
                "be1ef091.e0ad2"
            ]
        ]
    },
    {
        "id": "5a28d568.ab62ac",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "f501f49e.cd2728",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 610,
        "y": 120,
        "wires": []
    },
    {
        "id": "be1ef091.e0ad2",
        "type": "change",
        "z": "9bd49621.7134c8",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 120,
        "wires": [
            [
                "5a28d568.ab62ac"
            ]
        ]
    },
    {
        "id": "4ba9d95f.f37348",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "f501f49e.cd2728",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 90,
        "y": 80,
        "wires": []
    },
    {
        "id": "ea051e40.c8ace",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "573025eb.d55fbc",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 220,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "e2d116b0.7fbf78",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "573025eb.d55fbc",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 180,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "d89b97a0.c69a68",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "573025eb.d55fbc",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 300,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "94fcfd5d.d7c5b",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "573025eb.d55fbc",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 120,
        "y": 340,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "af5153c6.bced",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "573025eb.d55fbc",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 100,
        "y": 260,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "4c913eef.2c89d",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "573025eb.d55fbc",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 140,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "55e19f6c.ed25c",
        "type": "ui_button",
        "z": "b2ea4617.40f5d8",
        "name": "Leave",
        "group": "b691b844.650898",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": false,
        "label": "<font size=5> - Leave",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-4x fa-home",
        "payload": "0",
        "payloadType": "num",
        "topic": "",
        "x": 70,
        "y": 60,
        "wires": [
            [
                "b765e113.5c044",
                "77631691.1da6b8",
                "a97f6910.ef7968",
                "c5d3ae37.d9a99",
                "52021dc2.13f5f4",
                "fef09851.bdb8e8",
                "1dee8587.cc0a3a"
            ]
        ]
    },
    {
        "id": "85275b39.2ac4c8",
        "type": "inject",
        "z": "9bd49621.7134c8",
        "name": "Refresh Timer",
        "topic": "",
        "payload": "15",
        "payloadType": "num",
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 360,
        "wires": [
            [
                "6630b76e.860638",
                "ffaf5c41.d1443"
            ]
        ]
    },
    {
        "id": "6630b76e.860638",
        "type": "openweathermap",
        "z": "9bd49621.7134c8",
        "name": "Weather API",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 390,
        "y": 560,
        "wires": [
            [
                "20395787.3d5b28"
            ]
        ]
    },
    {
        "id": "20395787.3d5b28",
        "type": "function",
        "z": "9bd49621.7134c8",
        "name": "Get",
        "func": "var msg1 = { payload:msg.payload.temp_maxc };\nvar msg2 = { payload:msg.payload.tempc };\nvar msg3 = { payload:msg.payload.temp_minc };\nvar msg4 = { payload:msg.payload.description};\nvar msg5 = { payload:msg.payload.icon};\nvar msg6 = { payload:msg.payload.detail};\n\nreturn [ msg1, msg2, msg3, msg4, msg5, msg6 ];",
        "outputs": 6,
        "noerr": 0,
        "x": 650,
        "y": 560,
        "wires": [
            [
                "14909e0f.c3e3e2"
            ],
            [
                "a8deec67.e2908"
            ],
            [
                "eaf2a0ad.8e272"
            ],
            [],
            [
                "bb2241fa.9be1f"
            ],
            [
                "77b58914.37dbe8"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min",
            "Description",
            "Weather icon",
            ""
        ]
    },
    {
        "id": "bb2241fa.9be1f",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "Weather icon",
        "order": 1,
        "width": 3,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "a8deec67.e2908",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Temp °C",
        "label": "",
        "format": "<font size=6>{{msg.payload.toFixed(0)}}°",
        "layout": "col-center",
        "x": 800,
        "y": 520,
        "wires": []
    },
    {
        "id": "14909e0f.c3e3e2",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "Max °C",
        "label": "<font size=3>H",
        "format": "<font size=3>{{msg.payload.toFixed(0)}}°",
        "layout": "row-right",
        "x": 800,
        "y": 480,
        "wires": []
    },
    {
        "id": "eaf2a0ad.8e272",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "Min °C",
        "label": "<font size=3>L",
        "format": "<font size=3>{{msg.payload.toFixed(0)}}°",
        "layout": "row-right",
        "x": 790,
        "y": 560,
        "wires": []
    },
    {
        "id": "77b58914.37dbe8",
        "type": "ui_text",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "Weather detail",
        "label": "",
        "format": "{{msg.payload | uppercase}}",
        "layout": "col-center",
        "x": 820,
        "y": 640,
        "wires": []
    },
    {
        "id": "b3f1925d.b9f92",
        "type": "comment",
        "z": "9bd49621.7134c8",
        "name": "Weather",
        "info": "",
        "x": 60,
        "y": 320,
        "wires": []
    },
    {
        "id": "b2ffa6ed.c4bfa8",
        "type": "comment",
        "z": "9bd49621.7134c8",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 30,
        "wires": []
    },
    {
        "id": "6db8ecd9.fff894",
        "type": "comment",
        "z": "c93dd8ec.4e17d8",
        "name": "Menu",
        "info": "",
        "x": 50,
        "y": 20,
        "wires": []
    },
    {
        "id": "ffaf5c41.d1443",
        "type": "openweathermap",
        "z": "9bd49621.7134c8",
        "name": "Weather API - 5 Day",
        "wtype": "forecast",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 380,
        "y": 300,
        "wires": [
            [
                "92e59802.51ddb8"
            ]
        ]
    },
    {
        "id": "92e59802.51ddb8",
        "type": "function",
        "z": "9bd49621.7134c8",
        "name": "Get 5 day weather",
        "func": "var msg1 = { payload:msg.payload[0].weather[0].icon};\nvar msg2 = { payload:msg.payload[0].dt};\nvar msg3 = { payload:msg.payload[4].weather[0].icon};\nvar msg4 = { payload:msg.payload[4].dt};\nvar msg5 = { payload:msg.payload[12].weather[0].icon};\nvar msg6 = { payload:msg.payload[12].dt};\nvar msg7 = { payload:msg.payload[20].weather[0].icon};\nvar msg8 = { payload:msg.payload[20].dt};\nvar msg9 = { payload:msg.payload[28].weather[0].icon};\nvar msg10 = { payload:msg.payload[28].dt};\nvar msg11 = { payload:msg.payload[36].weather[0].icon};\nvar msg12 = { payload:msg.payload[36].dt};\n\nreturn [ msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10, msg11, msg12 ];",
        "outputs": 12,
        "noerr": 0,
        "x": 610,
        "y": 300,
        "wires": [
            [
                "831429dd.3aa208"
            ],
            [],
            [
                "fe8607de.f0f7a8"
            ],
            [],
            [
                "61448f8.069bb7"
            ],
            [],
            [
                "849c84f8.98d2a8"
            ],
            [],
            [
                "fb72e8f3.f95848"
            ],
            [],
            [
                "5233ec5c.694b44"
            ],
            []
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min",
            "Description",
            "Weather icon",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
        ]
    },
    {
        "id": "831429dd.3aa208",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 1",
        "order": 7,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fe8607de.f0f7a8",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 2",
        "order": 8,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "61448f8.069bb7",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 3",
        "order": 9,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "849c84f8.98d2a8",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 4",
        "order": 10,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "fb72e8f3.f95848",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 5",
        "order": 11,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "5233ec5c.694b44",
        "type": "ui_template",
        "z": "9bd49621.7134c8",
        "group": "5f8c4e0a.2a18d",
        "name": "WFc Icon 6",
        "order": 12,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 810,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "efb6f08d.ff8a3",
        "type": "ui_chart",
        "z": "b660324d.e4215",
        "name": "Temp & Humi - Living",
        "group": "6a3e3f4f.c83b2",
        "order": 1,
        "width": 12,
        "height": 4,
        "label": "Living",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 760,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "c5d488f0.ddc128",
        "type": "ui_ui_control",
        "z": "c93dd8ec.4e17d8",
        "name": "MENU BAR",
        "events": "change",
        "x": 510,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9d19496f.592ed8",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "25efb989.76ba06",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 560,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "bb5d1dc7.66831",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "25efb989.76ba06",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 520,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "895e995e.ac5f58",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "25efb989.76ba06",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 640,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "5aeb8ed2.753b4",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "25efb989.76ba06",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 120,
        "y": 680,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "ab7692f1.dc62d",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "25efb989.76ba06",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 100,
        "y": 600,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "d703784d.653598",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "25efb989.76ba06",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 480,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "4d26f0aa.5f1fa",
        "type": "mqtt in",
        "z": "b660324d.e4215",
        "name": "Bedroom Temp",
        "topic": "Bedroom_Temp",
        "qos": "2",
        "datatype": "json",
        "broker": "8f487aad.727ab8",
        "x": 100,
        "y": 120,
        "wires": [
            [
                "fdbb8982.417c18"
            ]
        ]
    },
    {
        "id": "afaf5327.0ba0c",
        "type": "mqtt in",
        "z": "b660324d.e4215",
        "name": "Living Temp",
        "topic": "Living_Temp",
        "qos": "2",
        "datatype": "json",
        "broker": "8f487aad.727ab8",
        "x": 90,
        "y": 380,
        "wires": [
            [
                "71005d5f.85e8b4"
            ]
        ]
    },
    {
        "id": "71005d5f.85e8b4",
        "type": "function",
        "z": "b660324d.e4215",
        "name": "Get values and calibration",
        "func": "var msg1 = {};\nmsg1.payload = msg.payload.Temp - 5; // - 5 degrees\nmsg1.topic = 'Temperature';\n\nvar msg2 = {};\nmsg2.payload = msg.payload.Humi + 15; // + 15 percent\nmsg2.topic = 'Humidity';\n\nreturn [ msg1, msg2 ];",
        "outputs": 2,
        "noerr": 0,
        "x": 330,
        "y": 380,
        "wires": [
            [
                "cbfccd33.acd4b",
                "55398979.323098",
                "2062aafd.4d6bf6"
            ],
            [
                "7e017eec.1c948",
                "e858953d.276b98"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp"
        ]
    },
    {
        "id": "a72efaf3.5c0888",
        "type": "comment",
        "z": "b2ea4617.40f5d8",
        "name": "Relay",
        "info": "Example Flow Relay",
        "x": 50,
        "y": 20,
        "wires": []
    },
    {
        "id": "fef09851.bdb8e8",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Kitchen - Light",
        "label": "<font size=4>Kitchen",
        "tooltip": "",
        "group": "6fa453e5.dfc11c",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Kitchen_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-lightbulb-o",
        "offcolor": "white",
        "x": 420,
        "y": 180,
        "wires": [
            [
                "206a8ef4.491672"
            ]
        ]
    },
    {
        "id": "206a8ef4.491672",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Kitchen - Light",
        "topic": "Kitchen_Light",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 720,
        "y": 180,
        "wires": []
    },
    {
        "id": "1dee8587.cc0a3a",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Temperature Control - Living",
        "label": "",
        "tooltip": "",
        "group": "f616446d.a9a168",
        "order": 2,
        "width": 1,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "living_room_heating",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-3x fa-thermometer-half ",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-3x fa-thermometer-half ",
        "offcolor": "white",
        "x": 460,
        "y": 520,
        "wires": [
            [
                "d399d5dc.67e6f8"
            ]
        ]
    },
    {
        "id": "d399d5dc.67e6f8",
        "type": "mqtt out",
        "z": "b2ea4617.40f5d8",
        "name": "Electric Heater Living",
        "topic": "living_room_heating",
        "qos": "0",
        "retain": "true",
        "broker": "8f487aad.727ab8",
        "x": 740,
        "y": 520,
        "wires": []
    },
    {
        "id": "66d083ca.70c98c",
        "type": "mqtt in",
        "z": "266c41c.85b30be",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "8f487aad.727ab8",
        "x": 70,
        "y": 80,
        "wires": [
            [
                "e9f67ebd.7528",
                "9a8f002b.b8e6e"
            ]
        ]
    },
    {
        "id": "e9f67ebd.7528",
        "type": "debug",
        "z": "266c41c.85b30be",
        "name": "MQTT # RAW",
        "active": false,
        "console": "false",
        "complete": "payload",
        "x": 680,
        "y": 80,
        "wires": []
    },
    {
        "id": "9a8f002b.b8e6e",
        "type": "function",
        "z": "266c41c.85b30be",
        "name": "Store and shift msg",
        "func": "// initialise the counter to 0 if it doesn't exist already\nvar text = context.get('text')|| [];\n\ntext.push(msg);\nif (text.length > 20){\n    text.shift();\n    text.length = 20;\n} \n\n// store the value back\ncontext.set('text',text);\n// make it part of the outgoing msg object\nmsg = {};\nmsg.payload = text;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 140,
        "wires": [
            [
                "ae8491bc.4d28d",
                "9d01a7c.ad53658",
                "b5cbfd82.e46e7"
            ]
        ]
    },
    {
        "id": "ae8491bc.4d28d",
        "type": "debug",
        "z": "266c41c.85b30be",
        "name": "mqtt array",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 660,
        "y": 200,
        "wires": []
    },
    {
        "id": "9d01a7c.ad53658",
        "type": "ui_template",
        "z": "266c41c.85b30be",
        "group": "42cac060.e8",
        "name": "MQTT Output Debug",
        "order": 1,
        "width": 12,
        "height": 6,
        "format": "<script>\nvar dt = new Date();\ndocument.getElementById(\"datetime\").innerHTML = ((\"0\"+dt.getDate()).slice(-2)) +\".\"+ ((\"0\"+(dt.getMonth()+1)).slice(-2)) +\".\"+ (dt.getFullYear()) +\" \"+ ((\"0\"+dt.getHours()).slice(-2)) +\":\"+ ((\"0\"+dt.getMinutes()).slice(-2));\n</script>\n\n<ul>\n <li ng-repeat=\"x in msg.payload\">\n     <p>Date/Time: <span id=\"datetime\"></span></p>\n        <font color=\"red\">{{x.topic}}\n        </font>\n        <ul>\n            <li>{{x.payload}}</li>\n        </ul>\n </li>\n</ul>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 700,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "87140640.faa848",
        "type": "comment",
        "z": "266c41c.85b30be",
        "name": "MQTT Console",
        "info": "This flow demonstrates how to view MQTT data\n\nIt is also a nice demonstration how you can\nuse an array to shift data into the UI template\n\n\nUI Viewable:\nhttp://localhost:1880/ui\n\nWritten by\nCory Guynn\n2016\nwww.InternetOfLEG0.com",
        "x": 80,
        "y": 20,
        "wires": []
    },
    {
        "id": "bbb00a6b.2cf218",
        "type": "comment",
        "z": "b660324d.e4215",
        "name": "Temperature & Humidity",
        "info": "Monitor Temperature&Humidity",
        "x": 100,
        "y": 20,
        "wires": []
    },
    {
        "id": "fdbb8982.417c18",
        "type": "function",
        "z": "b660324d.e4215",
        "name": "Get values and calibration",
        "func": "var msg1 = {};\nmsg1.payload = msg.payload.Temp - 5; // - 5 degrees\nmsg1.topic = 'Temperature';\n\nvar msg2 = {};\nmsg2.payload = msg.payload.Humi + 15; // + 15 percent\nmsg2.topic = 'Humidity';\n\nreturn [ msg1, msg2 ];",
        "outputs": 2,
        "noerr": 0,
        "x": 330,
        "y": 120,
        "wires": [
            [
                "cb3d6360.2b30e",
                "470ed80d.4c8678",
                "268fbf10.d3b3"
            ],
            [
                "be07cda3.a9235",
                "3956d910.2e94d6"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp"
        ]
    },
    {
        "id": "997defbf.5320e",
        "type": "ui_chart",
        "z": "b660324d.e4215",
        "name": "Temp & Humi - Bedroom",
        "group": "5f30102c.f5fa3",
        "order": 1,
        "width": 12,
        "height": 4,
        "label": "Bedroom",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 770,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "cb3d6360.2b30e",
        "type": "ui_gauge",
        "z": "b660324d.e4215",
        "name": "Temp - Bedroom",
        "group": "ac20ebf1.e0f0f8",
        "order": 1,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "",
        "label": "°C",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#0080ff",
            "#00aa00",
            "#ca3838"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 620,
        "y": 60,
        "wires": []
    },
    {
        "id": "cbfccd33.acd4b",
        "type": "ui_gauge",
        "z": "b660324d.e4215",
        "name": "Temp - Living",
        "group": "db8dd4b5.e04c28",
        "order": 1,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "",
        "label": "°C",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#0080ff",
            "#00aa00",
            "#ca3838"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 610,
        "y": 420,
        "wires": []
    },
    {
        "id": "eb20a7d7.d6f328",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "2b51e43d.94519c",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 390,
        "y": 560,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "16a1e6d5.556769",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "2b51e43d.94519c",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 370,
        "y": 520,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "66b4f4b4.0ffc4c",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "2b51e43d.94519c",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 390,
        "y": 640,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "816e75e3.7550a8",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "2b51e43d.94519c",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 400,
        "y": 680,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "f833dc3f.da296",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "2b51e43d.94519c",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 380,
        "y": 600,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "3ad5cc87.d5ddc4",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "2b51e43d.94519c",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 370,
        "y": 480,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "f51e4e6f.fb61",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "1dbf72dd.295fad",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 610,
        "y": 560,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "8b804689.0bc728",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "1dbf72dd.295fad",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 590,
        "y": 520,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "89fa41ef.3ef28",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "1dbf72dd.295fad",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 610,
        "y": 640,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "ea0c05d1.01fb48",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "1dbf72dd.295fad",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 620,
        "y": 680,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "d459bf6f.8b3b6",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "1dbf72dd.295fad",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 600,
        "y": 600,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "8af83369.d0356",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "1dbf72dd.295fad",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 590,
        "y": 480,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "7397245a.f9772c",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "5c06a1b2.afde9",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 850,
        "y": 560,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "8fab78ed.f87b68",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "5c06a1b2.afde9",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 830,
        "y": 520,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "59c9bb4c.9169c4",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "5c06a1b2.afde9",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 850,
        "y": 640,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "50d4350e.1c66dc",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "5c06a1b2.afde9",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 860,
        "y": 680,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "9fd3ff2d.fd17e",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "5c06a1b2.afde9",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 840,
        "y": 600,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "5b2b5b28.fec1f4",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "5c06a1b2.afde9",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 830,
        "y": 480,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "2e7b58d.3c000a8",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Temps Home",
        "group": "d3ff2069.37845",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1090,
        "y": 560,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "d0442113.41828",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Tasks",
        "group": "d3ff2069.37845",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1070,
        "y": 520,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "3f9617db.2c3e28",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Cam Moto",
        "group": "d3ff2069.37845",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1090,
        "y": 640,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "4ac9c14a.ec37",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Console Debug",
        "group": "d3ff2069.37845",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1100,
        "y": 680,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "f6f73507.5abb18",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Weather",
        "group": "d3ff2069.37845",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1080,
        "y": 600,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "8da50e63.a9a3",
        "type": "ui_button",
        "z": "c93dd8ec.4e17d8",
        "name": "Home",
        "group": "d3ff2069.37845",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1070,
        "y": 480,
        "wires": [
            [
                "c5d488f0.ddc128"
            ]
        ]
    },
    {
        "id": "b886e187.f147f",
        "type": "ui_template",
        "z": "22477ce2.39ef74",
        "group": "51eff873.87cf38",
        "name": "css etc",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<style>\n\n.filled { height: 48px !important;padding: 0 !important; margin: 0 !important;}\n.nr-dashboard-template { padding: 0; margin: 0;}\n.rounded { border-radius: 12px 12px 12px 12px;}\n.bigfont { font-size: 18px;}\n.smallfont { font-size: 12px;}\n.thedays { cursor:pointer; vertical-align:bottom; height:48px; }\n.the2px  { background-color: #9E9E9E; height:2px; }\n.theblocks {width:100%; height:0%; background-color:#4CAF50; }\n.greybuttons { background-color:#009688 !important; width:48px; border: none;}\n.thetemps { cursor:pointer; font-size:70%; color:#9E9E9E !important; }\n.smallheadings { color:white; font-size:80%; }\n\n</style>\n\n<script>\nvar current=1;\n\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),50);\n    navigator.vibrate(80);\n    });\n    \n</script>",
        "storeOutMessages": false,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 180,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "5ac7fce0.6d4b04",
        "type": "ui_template",
        "z": "22477ce2.39ef74",
        "group": "51eff873.87cf38",
        "name": "Settings page",
        "order": 2,
        "width": 6,
        "height": 6,
        "format": "<script>\nvar thedays=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID = \"AA\";\n\nvar last=29;\n\nfunction bar(mm,val)\n{\nif (val==14) { $(mm).height(\"12%\"); $(mm).css('background-color', '#1E88E5'); } //blue\nif (val==15) { $(mm).height(\"16%\"); $(mm).css('background-color', '#039BE5'); }\nif (val==16) { $(mm).height(\"20%\"); $(mm).css('background-color', '#00ACC1'); } \nif (val==17) { $(mm).height(\"24%\"); $(mm).css('background-color', '#039BE5'); } // cyan\nif (val==18) { $(mm).height(\"28%\"); $(mm).css('background-color', '#00ACC1'); }\nif (val==19) { $(mm).height(\"32%\"); $(mm).css('background-color', '#00897B'); } \nif (val==20) { $(mm).height(\"36%\"); $(mm).css('background-color', '#388E3C'); } // green\nif (val==21) { $(mm).height(\"40%\"); $(mm).css('background-color', '#689F38'); }\nif (val==22) { $(mm).height(\"44%\"); $(mm).css('background-color', '#C0CA33'); }\nif (val==23) { $(mm).height(\"48%\"); $(mm).css('background-color', '#FDD835'); } // yellow\nif (val==24) { $(mm).height(\"52%\"); $(mm).css('background-color', '#FBC02D'); }\nif (val==25) { $(mm).height(\"56%\"); $(mm).css('background-color', '#FFA000'); }\nif (val==26) { $(mm).height(\"60%\"); $(mm).css('background-color','#E64A19'); } // red\n    \n}\n\nfunction stat(text)\n{\n$(\"#info\"+ID).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec(val,sta)\n{\nvar w=\"#td\"+val+ID;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n    (function(scope){\n        scope.ID = ID;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec(last,0); last=msg.selector; selec(last,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID; bar(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID; $(v).text(msg.timing[((msg.days-1)*24)+x]+\"°\")\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID).text(thedays[msg.days-1]);\n             if ((last>4) &&(last<29))\n                 $(\"#current\"+ID).text(msg.timing[((msg.days-1)*24)+last-5] + \"°\");\n             else\n                 $(\"#current\"+ID).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { stat(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >BEDROOM TEMPERATURE</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\">\n                    <md-tooltip md-direction=\"bottom\">DECREASE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\">\n                    <md-tooltip md-direction=\"bottom\">INCREASES</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 120,
        "y": 120,
        "wires": [
            [
                "a2d82681.8fbda8"
            ]
        ]
    },
    {
        "id": "a2d82681.8fbda8",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process controls",
        "func": "if ( typeof context.days == 'undefined' ) context.days=1;\nif ( typeof context.selector == 'undefined' ) context.selector=29;\nif ( typeof context.saving == 'undefined' ) context.saving=1;\nif ( typeof context.global.timing == 'undefined' ) \n    {\n        context.global.timing=[\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        6,14\n                        ];\n        context.saving=1;                    \n    }\nvar timing=global.get(\"timing\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector>4)&&(context.selector<29))\n                {\n                    timing[((context.days-1)*24)+context.selector-5]++; \n                    if (timing[((context.days-1)*24)+context.selector-5]>26){ timing[((context.days-1)*24)+context.selector-5]=26; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Temperature raised\";\n                }\n                if (context.selector==1) { if (timing[168+(context.selector-1)]<26) {  timing[168+(context.selector-1)]++; msg.foryou=\"Climate temperature increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==2) { if (timing[168+(context.selector-1)]<26) {  timing[168+(context.selector-1)]++; msg.foryou=\"Temperature away from home increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==29) { msg.foryou=\"Next day\"; context.days++; if (context.days>7) { context.days = 1; } }\n                break;\n    case \"d\" :  if ((context.selector>4)&&(context.selector<29))\n                {\n                    timing[((context.days-1)*24)+context.selector-5]--; \n                    if (timing[((context.days-1)*24)+context.selector-5]<14){ timing[((context.days-1)*24)+context.selector-5]=14; msg.foryou=\"Limite raggiunto\";}\n                    else msg.foryou=\"Decreased temperature\";\n                }\n                if (context.selector==1) { if (timing[168+(context.selector-1)]>12) { timing[168+(context.selector-1)]--; msg.foryou=\"Climate temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==2) { if (timing[168+(context.selector-1)]>12) { timing[168+(context.selector-1)]--; msg.foryou=\"Away temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==29) {  msg.foryou=\"Previous day\";  context.days--; if (context.days < 1) { context.days = 7;  } }\n                break;\n    case 'r' :  if ((context.selector>=5)&&(context.selector<28))\n                        {\n                         timing[((context.days-1)*24)+context.selector-4]=timing[((context.days-1)*24)+context.selector-5];   \n                         context.selector++;\n                         msg.foryou=\"Temperature copied to the next slot\";\n                        }\n                if ((context.selector==29)&&(context.days<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing[((context.days)*24)+a]=timing[((context.days-1)*24)+a];   \n                            }\n                         context.days++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector=parseInt(msg.payload);\n               if (msg.payload=='1') msg.foryou=\"Selected climate temperature\"; \n               else if (msg.payload=='2') msg.foryou=\"Temperature away from home selected\";\n               else if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Hours temperature adjustment: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures;\nmsg.timing=timing;\nmsg.days=context.days;\nmsg.selector=context.selector;\n\nnode.send([msg,null,null]);\n\nif (context.saving===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing);\n        node.send([null,msg,null]); \n        context.saving=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 340,
        "y": 163,
        "wires": [
            [
                "b698e226.cd6cc"
            ],
            [
                "4e313a87.3402d4"
            ],
            [
                "7a5c0121.ac61e"
            ]
        ]
    },
    {
        "id": "2ad9bfa6.6159f",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 128,
        "y": 220,
        "wires": [
            [
                "a2d82681.8fbda8",
                "f60ce82a.29e1f8"
            ]
        ]
    },
    {
        "id": "a0427250.e71c8",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 120,
        "y": 323,
        "wires": [
            [
                "b6140a9d.81a198"
            ]
        ]
    },
    {
        "id": "ad32544f.a68758",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text:\"Set point \" + msg.payload + \"°C\"});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 323,
        "wires": [
            [
                "50c1652f.ef499c",
                "26964288.bc1cee"
            ]
        ]
    },
    {
        "id": "4e313a87.3402d4",
        "type": "file",
        "z": "22477ce2.39ef74",
        "name": "backup",
        "filename": "/home/aime/aime_data/thermo_scheduler_bedroom.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 540,
        "y": 163,
        "wires": [
            []
        ]
    },
    {
        "id": "f60ce82a.29e1f8",
        "type": "file in",
        "z": "22477ce2.39ef74",
        "name": "Restore",
        "filename": "/home/aime/aime_data/thermo_scheduler_bedroom.log",
        "format": "utf8",
        "x": 320,
        "y": 243,
        "wires": [
            [
                "3ba79d07.f87f72"
            ]
        ]
    },
    {
        "id": "3ba79d07.f87f72",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Restore data from SERVER",
        "func": "context.global.timing=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 243,
        "wires": [
            [
                "a161cbbf.6bb6f8"
            ]
        ]
    },
    {
        "id": "b9d813a3.172f9",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "7a5c0121.ac61e"
        ],
        "x": 181.5,
        "y": 271,
        "wires": [
            [
                "f60ce82a.29e1f8"
            ]
        ]
    },
    {
        "id": "7a5c0121.ac61e",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "b9d813a3.172f9"
        ],
        "x": 495,
        "y": 203,
        "wires": []
    },
    {
        "id": "4bb798f.795a268",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "a161cbbf.6bb6f8"
        ],
        "x": 175,
        "y": 163,
        "wires": [
            [
                "a2d82681.8fbda8"
            ]
        ]
    },
    {
        "id": "a161cbbf.6bb6f8",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "4bb798f.795a268"
        ],
        "x": 695,
        "y": 243,
        "wires": []
    },
    {
        "id": "b698e226.cd6cc",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "5e0da294.8af40c"
        ],
        "x": 495,
        "y": 123,
        "wires": []
    },
    {
        "id": "5e0da294.8af40c",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "b698e226.cd6cc"
        ],
        "x": 55,
        "y": 163,
        "wires": [
            [
                "5ac7fce0.6d4b04"
            ]
        ]
    },
    {
        "id": "bfd6b8ae.c741c8",
        "type": "ui_template",
        "z": "22477ce2.39ef74",
        "group": "696f79d7.965228",
        "name": "Settings page",
        "order": 1,
        "width": 6,
        "height": 6,
        "format": "<script>\n\nvar thedays1=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_1 = \"DD\";\n\nvar last_1=29;\n\nfunction bar(mm,val)\n{\nif (val==14) { $(mm).height(\"12%\"); $(mm).css('background-color', '#1E88E5'); } //blue\nif (val==15) { $(mm).height(\"16%\"); $(mm).css('background-color', '#039BE5'); }\nif (val==16) { $(mm).height(\"20%\"); $(mm).css('background-color', '#00ACC1'); } \nif (val==17) { $(mm).height(\"24%\"); $(mm).css('background-color', '#039BE5'); } // cyan\nif (val==18) { $(mm).height(\"28%\"); $(mm).css('background-color', '#00ACC1'); }\nif (val==19) { $(mm).height(\"32%\"); $(mm).css('background-color', '#00897B'); } \nif (val==20) { $(mm).height(\"36%\"); $(mm).css('background-color', '#388E3C'); } // green\nif (val==21) { $(mm).height(\"40%\"); $(mm).css('background-color', '#689F38'); }\nif (val==22) { $(mm).height(\"44%\"); $(mm).css('background-color', '#C0CA33'); }\nif (val==23) { $(mm).height(\"48%\"); $(mm).css('background-color', '#FDD835'); } // yellow\nif (val==24) { $(mm).height(\"52%\"); $(mm).css('background-color', '#FBC02D'); }\nif (val==25) { $(mm).height(\"56%\"); $(mm).css('background-color', '#FFA000'); }\nif (val==26) { $(mm).height(\"60%\"); $(mm).css('background-color', '#E64A19'); } // red\n}\n\nfunction stat_1(text)\n{\n$(\"#info\"+ID_1).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_1).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_1(val,sta)\n{\nvar w=\"#td\"+val+ID_1;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_1 = ID_1;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_1(last_1,0); last_1=msg.selector; selec_1(last_1,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_1; bar(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_1; $(v).text(msg.timing[((msg.days-1)*24)+x]+\"°\")\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_1; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_1).text(thedays1[msg.days-1]);\n             if ((last_1>4) &&(last_1<29))\n                 $(\"#current\"+ID_1).text(msg.timing[((msg.days-1)*24)+last_1-5] + \"°\");\n             else\n                 $(\"#current\"+ID_1).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { stat_1(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >LIVING TEMPERATURE</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_1 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_1 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_1 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_1 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_1 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_1 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_1 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\">\n                    <md-tooltip md-direction=\"bottom\">DECREASE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_1 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\">\n                    <md-tooltip md-direction=\"bottom\">INCREASES</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 120,
        "y": 723,
        "wires": [
            [
                "bfaf4ebd.28993"
            ]
        ]
    },
    {
        "id": "bfaf4ebd.28993",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process controls",
        "func": "if ( typeof context.days_1 == 'undefined' ) context.days_1=1;\nif ( typeof context.selector_1 == 'undefined' ) context.selector_1=29;\nif ( typeof context.saving_1 == 'undefined' ) context.saving_1=1;\nif ( typeof context.global.timing_1 == 'undefined' ) \n    {\n        context.global.timing_1=[\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        6,14\n                        ];\n        context.saving_1=1;                    \n    }\nvar timing_1=global.get(\"timing_1\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_1>4)&&(context.selector_1<29))\n                {\n                    timing_1[((context.days_1-1)*24)+context.selector_1-5]++; \n                    if (timing_1[((context.days_1-1)*24)+context.selector_1-5]>26){ timing_1[((context.days_1-1)*24)+context.selector_1-5]=26; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Temperature raised\";\n                }\n                if (context.selector_1==1) { if (timing_1[168+(context.selector_1-1)]<26) {  timing_1[168+(context.selector_1-1)]++; msg.foryou=\"Climate temperature increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==2) { if (timing_1[168+(context.selector_1-1)]<26) {  timing_1[168+(context.selector_1-1)]++; msg.foryou=\"Temperature away from home increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==29) { msg.foryou=\"Next day\"; context.days_1++; if (context.days_1>7) { context.days_1 = 1; } }\n                break;\n    case \"d\" :  if ((context.selector_1>4)&&(context.selector_1<29))\n                {\n                    timing_1[((context.days_1-1)*24)+context.selector_1-5]--; \n                    if (timing_1[((context.days_1-1)*24)+context.selector_1-5]<14){ timing_1[((context.days_1-1)*24)+context.selector_1-5]=14; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Decreased temperature\";\n                }\n                if (context.selector_1==1) { if (timing_1[168+(context.selector_1-1)]>12) { timing_1[168+(context.selector_1-1)]--; msg.foryou=\"Climate temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==2) { if (timing_1[168+(context.selector_1-1)]>12) { timing_1[168+(context.selector_1-1)]--; msg.foryou=\"Away temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==29) {  msg.foryou=\"Previous day\";  context.days_1--; if (context.days_1 < 1) { context.days_1 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_1>=5)&&(context.selector_1<28))\n                        {\n                         timing_1[((context.days_1-1)*24)+context.selector_1-4]=timing_1[((context.days_1-1)*24)+context.selector_1-5];   \n                         context.selector_1++;\n                         msg.foryou=\"Temperature copied to the next slot\";\n                        }\n                if ((context.selector_1==29)&&(context.days_1<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_1[((context.days_1)*24)+a]=timing_1[((context.days_1-1)*24)+a];   \n                            }\n                         context.days_1++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_1==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_1=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_1=parseInt(msg.payload);\n               if (msg.payload=='1') msg.foryou=\"Selected climate temperature\"; \n               else if (msg.payload=='2') msg.foryou=\"Temperature away from home selected\";\n               else if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Hours temperature adjustment: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_1;\nmsg.timing=timing_1;\nmsg.days=context.days_1;\nmsg.selector=context.selector_1;\n\nnode.send([msg,null,null]);\n\nif (context.saving_1===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_1);\n        node.send([null,msg,null]); \n        context.saving_1=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 340,
        "y": 763,
        "wires": [
            [
                "d545b5fb.809f28"
            ],
            [
                "5a3f02ad.da69dc"
            ],
            [
                "cc805947.3ce798"
            ]
        ]
    },
    {
        "id": "c662378c.7120d8",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 128,
        "y": 823,
        "wires": [
            [
                "bfaf4ebd.28993",
                "338a2f19.06f1c"
            ]
        ]
    },
    {
        "id": "e90d1f21.97a86",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 120,
        "y": 923,
        "wires": [
            [
                "fcb3a66.855c558"
            ]
        ]
    },
    {
        "id": "e5a84f95.a9391",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_1\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text:\"Set point \" + msg.payload + \"°C\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 923,
        "wires": [
            [
                "42e92556.6e98cc",
                "978efe81.c4cba"
            ]
        ]
    },
    {
        "id": "5a3f02ad.da69dc",
        "type": "file",
        "z": "22477ce2.39ef74",
        "name": "backup",
        "filename": "/home/aime/aime_data/thermo_scheduler_living.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 540,
        "y": 763,
        "wires": [
            []
        ]
    },
    {
        "id": "338a2f19.06f1c",
        "type": "file in",
        "z": "22477ce2.39ef74",
        "name": "Restore",
        "filename": "/home/aime/aime_data/thermo_scheduler_living.log",
        "format": "utf8",
        "x": 320,
        "y": 843,
        "wires": [
            [
                "82256dd7.9ec3f"
            ]
        ]
    },
    {
        "id": "82256dd7.9ec3f",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_1=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 843,
        "wires": [
            [
                "4ed459c9.8feb78"
            ]
        ]
    },
    {
        "id": "b8ef6dda.8a44b",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "cc805947.3ce798"
        ],
        "x": 181.5,
        "y": 874,
        "wires": [
            [
                "338a2f19.06f1c"
            ]
        ]
    },
    {
        "id": "cc805947.3ce798",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "b8ef6dda.8a44b"
        ],
        "x": 495,
        "y": 803,
        "wires": []
    },
    {
        "id": "663b0a25.41ce64",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "4ed459c9.8feb78"
        ],
        "x": 175,
        "y": 763,
        "wires": [
            [
                "bfaf4ebd.28993"
            ]
        ]
    },
    {
        "id": "4ed459c9.8feb78",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "663b0a25.41ce64"
        ],
        "x": 695,
        "y": 843,
        "wires": []
    },
    {
        "id": "d545b5fb.809f28",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "2c584970.6778f6"
        ],
        "x": 495,
        "y": 723,
        "wires": []
    },
    {
        "id": "2c584970.6778f6",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "d545b5fb.809f28"
        ],
        "x": 55,
        "y": 763,
        "wires": [
            [
                "bfd6b8ae.c741c8"
            ]
        ]
    },
    {
        "id": "2c3f17ab.18f058",
        "type": "ui_template",
        "z": "22477ce2.39ef74",
        "group": "911c7eba.17d32",
        "name": "Settings page",
        "order": 1,
        "width": 6,
        "height": 6,
        "format": "<script>\n\nvar thedays_0=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_0 = \"BB\";\n\nvar last_0=29;\n\nfunction on_off_0(mm,val)\n{\nif (val==0) { $(mm).height(\"30%\"); $(mm).css('background-color', '#f44336'); } //green\nif (val==1) { $(mm).height(\"60%\"); $(mm).css('background-color', '#4CAF50'); } //green\n}\n\nfunction feedback_0(text)\n{\n$(\"#info\"+ID_0).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_0).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_0(val,sta)\n{\nvar w=\"#td\"+val+ID_0;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_0 = ID_0;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_0(last_0,0); last_0=msg.selector; selec_0(last_0,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_0; on_off_0(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_0; $(v).text(msg.timing[((msg.days-1)*24)+x] == 0 ? 'Off' : 'On')\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_0; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_0).text(thedays_0[msg.days-1]);\n             if ((last_0>4) &&(last_0<29))\n                 $(\"#current\"+ID_0).text(msg.timing[((msg.days-1)*24)+last_0-5]  == 0 ? 'Off' : 'On');\n             else\n                 $(\"#current\"+ID_0).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { feedback_0(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >BOILER CONTROL</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_0 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_0 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_0 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_0 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_0 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_0 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_0 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\"></ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_0 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\"></ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 120,
        "y": 423,
        "wires": [
            [
                "27d6bc50.3beea4"
            ]
        ]
    },
    {
        "id": "27d6bc50.3beea4",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process controls",
        "func": "if ( typeof context.days_0 == 'undefined' ) context.days_0=1;\nif ( typeof context.selector_0 == 'undefined' ) context.selector_0=29;\nif ( typeof context.saving_0 == 'undefined' ) context.saving_0=1;\nif ( typeof context.global.timing_0 == 'undefined' ) \n    {\n        context.global.timing_0=[\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        6,1\n                        ];\n        context.saving_0=1;                    \n    }\nvar timing_0=global.get(\"timing_0\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_0>4)&&(context.selector_0<29))\n                {\n                    timing_0[((context.days_0-1)*24)+context.selector_0-5] = 1; \n                    msg.foryou=\"ON\";\n                }\n                if (context.selector_0==29) { msg.foryou=\"Next day\"; context.days_0++; if (context.days_0>7) { context.days_0 = 1; } }\n                break;\n    case \"d\" :  if ((context.selector_0>4)&&(context.selector_0<29))\n                {\n                    timing_0[((context.days_0-1)*24)+context.selector_0-5] = 0; \n                    msg.foryou=\"OFF\";\n                }\n                if (context.selector_0==29) {  msg.foryou=\"Previous day\";  context.days_0--; if (context.days_0 < 1) { context.days_0 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_0>=5)&&(context.selector_0<28))\n                        {\n                         timing_0[((context.days_0-1)*24)+context.selector_0-4]=timing_0[((context.days_0-1)*24)+context.selector_0-5];   \n                         context.selector_0++;\n                         msg.foryou=\"Value copied to the next slot\";\n                        }\n                if ((context.selector_0==29)&&(context.days_0<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_0[((context.days_0)*24)+a]=timing_0[((context.days_0-1)*24)+a];   \n                            }\n                         context.days_0++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_0==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_0=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_0=parseInt(msg.payload);\n               if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Ignition adjustment hours: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_0;\nmsg.timing=timing_0;\nmsg.days=context.days_0;\nmsg.selector=context.selector_0;\n\nnode.send([msg,null,null]);\n\nif (context.saving_0===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_0);\n        node.send([null,msg,null]); \n        context.saving_0=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 340,
        "y": 463,
        "wires": [
            [
                "34f7ade9.ea8a22"
            ],
            [
                "4a91a68b.31cd58"
            ],
            [
                "3023cf11.55c8b"
            ]
        ]
    },
    {
        "id": "4734ca9a.739434",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 128,
        "y": 523,
        "wires": [
            [
                "27d6bc50.3beea4",
                "6d2ccccb.25fd14"
            ]
        ]
    },
    {
        "id": "4d5b745c.250a5c",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 120,
        "y": 623,
        "wires": [
            [
                "4bd477b.bf99888"
            ]
        ]
    },
    {
        "id": "42f4fa91.f38de4",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_0\");\nvar now = new Date(msg.time);\nmsg.topic = \"AAA\";\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text: \"State: \" + msg.payload === 0 ? 'OFF' : 'ON'});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 623,
        "wires": [
            [
                "6350085a.0e9928"
            ]
        ]
    },
    {
        "id": "4a91a68b.31cd58",
        "type": "file",
        "z": "22477ce2.39ef74",
        "name": "backup",
        "filename": "/home/aime/aime_data/on_off_scheduler_bedroom.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 540,
        "y": 463,
        "wires": [
            []
        ]
    },
    {
        "id": "6d2ccccb.25fd14",
        "type": "file in",
        "z": "22477ce2.39ef74",
        "name": "Restore",
        "filename": "/home/aime/aime_data/on_off_scheduler_bedroom.log",
        "format": "utf8",
        "x": 321,
        "y": 553,
        "wires": [
            [
                "31c0ba2d.c9c696"
            ]
        ]
    },
    {
        "id": "31c0ba2d.c9c696",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_0=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 543,
        "wires": [
            [
                "9c1bb5e1.1bccb8"
            ]
        ]
    },
    {
        "id": "50e51df7.e8b674",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "3023cf11.55c8b"
        ],
        "x": 181.5,
        "y": 574,
        "wires": [
            [
                "6d2ccccb.25fd14"
            ]
        ]
    },
    {
        "id": "3023cf11.55c8b",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "50e51df7.e8b674"
        ],
        "x": 495,
        "y": 503,
        "wires": []
    },
    {
        "id": "5c63b8fc.452108",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "9c1bb5e1.1bccb8"
        ],
        "x": 175,
        "y": 463,
        "wires": [
            [
                "27d6bc50.3beea4"
            ]
        ]
    },
    {
        "id": "9c1bb5e1.1bccb8",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "5c63b8fc.452108"
        ],
        "x": 695,
        "y": 543,
        "wires": []
    },
    {
        "id": "34f7ade9.ea8a22",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "739a11b7.79217"
        ],
        "x": 495,
        "y": 423,
        "wires": []
    },
    {
        "id": "739a11b7.79217",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "34f7ade9.ea8a22"
        ],
        "x": 55,
        "y": 463,
        "wires": [
            [
                "2c3f17ab.18f058"
            ]
        ]
    },
    {
        "id": "8b15bd99.652f1",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Tasks",
        "info": "",
        "x": 50,
        "y": 20,
        "wires": []
    },
    {
        "id": "b6140a9d.81a198",
        "type": "moment",
        "z": "22477ce2.39ef74",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 310,
        "y": 323,
        "wires": [
            [
                "ad32544f.a68758"
            ]
        ]
    },
    {
        "id": "fcb3a66.855c558",
        "type": "moment",
        "z": "22477ce2.39ef74",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 310,
        "y": 923,
        "wires": [
            [
                "e5a84f95.a9391"
            ]
        ]
    },
    {
        "id": "4bd477b.bf99888",
        "type": "moment",
        "z": "22477ce2.39ef74",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 310,
        "y": 623,
        "wires": [
            [
                "42f4fa91.f38de4"
            ]
        ]
    },
    {
        "id": "d7a5c1b9.cfcc7",
        "type": "ui_template",
        "z": "22477ce2.39ef74",
        "group": "9dda77f6.032288",
        "name": "Settings page",
        "order": 1,
        "width": 6,
        "height": 6,
        "format": "<script>\n\nvar thedays_2=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_2 = \"CC\";\n\nvar last_2=29;\n\nfunction on_off_2(mm,val)\n{\nif (val==0) { $(mm).height(\"30%\"); $(mm).css('background-color', '#f44336'); } //green\nif (val==1) { $(mm).height(\"60%\"); $(mm).css('background-color', '#4CAF50'); } //green\n}\n\nfunction feedback_2(text)\n{\n$(\"#info\"+ID_2).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_2).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_2(val,sta)\n{\nvar w=\"#td\"+val+ID_2;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_2 = ID_2;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_2(last_2,0); last_2=msg.selector; selec_2(last_2,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_2; on_off_2(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_2; $(v).text(msg.timing[((msg.days-1)*24)+x] == 0 ? 'Off' : 'On')\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_2; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_2).text(thedays_0[msg.days-1]);\n             if ((last_2>4) &&(last_2<29))\n                 $(\"#current\"+ID_2).text(msg.timing[((msg.days-1)*24)+last_2-5]  == 0 ? 'Off' : 'On');\n             else\n                 $(\"#current\"+ID_2).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { feedback_2(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >AIR CLEANING CONTROL</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_2 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_2 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_2 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_2 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_2 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_2 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_2 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\"></ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_2 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\"></ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 120,
        "y": 1023,
        "wires": [
            [
                "1322db81.614714"
            ]
        ]
    },
    {
        "id": "1322db81.614714",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process controls",
        "func": "if ( typeof context.days_2 == 'undefined' ) context.days_2 = 1;\nif ( typeof context.selector_2 == 'undefined' ) context.selector_2 = 29;\nif ( typeof context.saving_2 == 'undefined' ) context.saving_2 = 1;\nif ( typeof context.global.timing_2 == 'undefined' ) \n    {\n        context.global.timing_2=[\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        6,1\n                        ];\n        context.saving_2 = 1;                    \n    }\nvar timing_2=global.get(\"timing_2\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_2>4)&&(context.selector_2<29))\n                {\n                    timing_2[((context.days_2-1)*24)+context.selector_2-5] = 1; \n                    msg.foryou=\"ON\";\n                }\n                if (context.selector_2==29) { msg.foryou=\"Next day\"; context.days_2++; if (context.days_2>7) { context.days_2=1; } }\n                break;\n    case \"d\" :  if ((context.selector_2>4)&&(context.selector_2<29))\n                {\n                    timing_2[((context.days_2-1)*24)+context.selector_2-5] = 0; \n                    msg.foryou=\"OFF\";\n                }\n                if (context.selector_2==29) {  msg.foryou=\"Previous day\";  context.days_2--; if (context.days_2 < 1) { context.days_2 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_2>=5)&&(context.selector_2<28))\n                        {\n                         timing_2[((context.days_2-1)*24)+context.selector_2-4]=timing_2[((context.days_2-1)*24)+context.selector_2-5];   \n                         context.selector_2++;\n                         msg.foryou=\"Value copied to the next slot\";\n                        }\n                if ((context.selector_2==29)&&(context.days_2<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_2[((context.days_2)*24)+a]=timing_2[((context.days_2-1)*24)+a];   \n                            }\n                         context.days_2++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_2==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_2=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_2=parseInt(msg.payload);\n               if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Ignition adjustment hours: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_2;\nmsg.timing=timing_2;\nmsg.days=context.days_2;\nmsg.selector=context.selector_2;\n\nnode.send([msg,null,null]);\n\nif (context.saving_2===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_2);\n        node.send([null,msg,null]); \n        context.saving_2=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 340,
        "y": 1063,
        "wires": [
            [
                "95142433.149b58"
            ],
            [
                "59249c8a.9d0484"
            ],
            [
                "1d395898.ea98a7"
            ]
        ]
    },
    {
        "id": "6417f141.bcfa8",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 128,
        "y": 1123,
        "wires": [
            [
                "1322db81.614714",
                "db37c5c8.2dcca8"
            ]
        ]
    },
    {
        "id": "7bc8421a.7ede6c",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 120,
        "y": 1223,
        "wires": [
            [
                "4d041a0e.f42984"
            ]
        ]
    },
    {
        "id": "6617c4f4.2ad8ec",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_2\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text: \"State: \" + msg.payload === 0 ? 'OFF' : 'ON'});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1223,
        "wires": [
            []
        ]
    },
    {
        "id": "59249c8a.9d0484",
        "type": "file",
        "z": "22477ce2.39ef74",
        "name": "backup",
        "filename": "/home/aime/aime_data/on_off_scheduler_living.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 540,
        "y": 1063,
        "wires": [
            []
        ]
    },
    {
        "id": "db37c5c8.2dcca8",
        "type": "file in",
        "z": "22477ce2.39ef74",
        "name": "Restore",
        "filename": "/home/aime/aime_data/on_off_scheduler_living.log",
        "format": "utf8",
        "x": 320,
        "y": 1143,
        "wires": [
            [
                "623ce9c0.fda688"
            ]
        ]
    },
    {
        "id": "623ce9c0.fda688",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_2=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 1143,
        "wires": [
            [
                "ad491323.469dd"
            ]
        ]
    },
    {
        "id": "53042266.b97d7c",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "1d395898.ea98a7"
        ],
        "x": 175,
        "y": 1163,
        "wires": [
            [
                "db37c5c8.2dcca8"
            ]
        ]
    },
    {
        "id": "1d395898.ea98a7",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restore",
        "links": [
            "53042266.b97d7c"
        ],
        "x": 495,
        "y": 1103,
        "wires": []
    },
    {
        "id": "2109a6df.48ecca",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "ad491323.469dd"
        ],
        "x": 175,
        "y": 1063,
        "wires": [
            [
                "1322db81.614714"
            ]
        ]
    },
    {
        "id": "ad491323.469dd",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "restoreSD",
        "links": [
            "2109a6df.48ecca"
        ],
        "x": 695,
        "y": 1143,
        "wires": []
    },
    {
        "id": "95142433.149b58",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "df308dce.fc1d1"
        ],
        "x": 495,
        "y": 1023,
        "wires": []
    },
    {
        "id": "df308dce.fc1d1",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "setSettings",
        "links": [
            "95142433.149b58"
        ],
        "x": 55,
        "y": 1063,
        "wires": [
            [
                "d7a5c1b9.cfcc7"
            ]
        ]
    },
    {
        "id": "4d041a0e.f42984",
        "type": "moment",
        "z": "22477ce2.39ef74",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 310,
        "y": 1223,
        "wires": [
            [
                "6617c4f4.2ad8ec"
            ]
        ]
    },
    {
        "id": "61fe9fe8.3283b",
        "type": "inject",
        "z": "2b170c60.0fddc4",
        "name": "Refresh Timer",
        "topic": "Refresh Timer",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "x": 120,
        "y": 100,
        "wires": [
            [
                "18e56444.a5e33c",
                "20f5c9a.a486a36"
            ]
        ]
    },
    {
        "id": "744774b2.0786fc",
        "type": "ui_button",
        "z": "2b170c60.0fddc4",
        "name": "Weather Refresh",
        "group": "398ab202.dad53e",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": false,
        "label": "TO UPDATE",
        "tooltip": "Update weather data!",
        "color": "",
        "bgcolor": "",
        "icon": "fa-refresh",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 110,
        "y": 180,
        "wires": [
            [
                "18e56444.a5e33c",
                "20f5c9a.a486a36"
            ]
        ]
    },
    {
        "id": "7d3e4cd1.921c34",
        "type": "function",
        "z": "2b170c60.0fddc4",
        "name": "Prepare Dashboard Data",
        "func": "var windDirection = {};\nvar windDirectionIcon = {};\nvar windSpeed = {};\nvar windSpeedIcon = {};\nvar sunRise = {};\nvar sunSet = {};\nvar conditionIcon = {};\nvar date = new Date ();\n\n/* function for converting meteorogical degree to text */\n\nvar degToCard = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"Nord-Nord-Ost\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"Nord-Ost\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"Ost-Nord-Ost\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"Ost\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"Ost-Süd-Ost\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"Süd-Ost\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"Süd-Süd-Ost\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"Süd\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"Süd-Süd-West\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"Süd-West\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"West-Süd-West\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"West\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"West-Nord-West\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"Nord-West\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"Nord-Nord-West\";\n  }else{\nreturn \"Nord\"; \n  }\n}\n\n/* function for converting meteorogical degree to weather icons */\n\nvar degToCardIcon = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"wi-from-nne\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"wi-from-ne\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"wi-from-ene\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"wi-from-e\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"wi-from-ese\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"wi-from-se\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"wi-from-sse\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"wi-from-s\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"wi-from-ssw\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"wi-from-sw\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"wi-from-wsw\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"wi-from-w\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"wi-from-wnw\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"wi-from-nw\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"wi-from-nnw\";\n  }else{\nreturn \"wi-from-n\"; \n  }\n}\n\n/* Function for converting wind speed into Beaufort scale icon */\n\nvar speedToCardIcon = function(speed){\nif (speed>0.5 && speed<=1.5){\nreturn \"wi-wind-beaufort-1\";\n  }else if (speed>1.5 && speed<=3.3){\nreturn \"wi-wind-beaufort-2\";\n  }else if (speed>3.3 && speed<=5.5){\nreturn \"wi-wind-beaufort-3\";\n  }else if (speed>5.5 && speed<=7.9){\nreturn \"wi-wind-beaufort-4\";\n  }else if (speed>7.9 && speed<=10.7){\nreturn \"wi-wind-beaufort-5\";\n  }else if (speed>10.7 && speed<=13.8){\nreturn \"wi-wind-beaufort-6\";\n  }else if (speed>13.8 && speed<=17.1){\nreturn \"wi-wind-beaufort-7\";\n  }else if (speed>17.1 && speed<=20.7){\nreturn \"wi-wind-beaufort-8\";\n  }else if (speed>20.7 && speed<=24.4){\nreturn \"wi-wind-beaufort-9\";\n  }else if (speed>24.4 && speed<=28.4){\nreturn \"wi-wind-beaufort-10\";\n  }else if (speed>28.4 && speed<=32.6){\nreturn \"wi-wind-beaufort-11\";\n  }else if (speed>32.6){\nreturn \"wi-wind-beaufort-12\";\n  }else{\nreturn \"wi-wind-beaufort-0\"; \n  }\n}\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min + ':' + sec ;\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nconditionIcon.topic = \"ConditionIcon\";\nconditionIcon.payload = owIconMap.get(msg.payload.icon);\n\nwindDirection.topic = \"WindDirection\";\nwindDirection.payload = degToCard(msg.payload.winddirection);\n\nwindDirectionIcon.topic = \"WindDirectionIcon\";\nwindDirectionIcon.payload = degToCardIcon(msg.payload.winddirection);\n\nwindSpeed.topic = \"WindSpeed\";\nwindSpeed.payload = msg.payload.windspeed +  \" m/s\"; /* \" + windDirection.payload; */\n\nwindSpeedIcon.topic = \"WindSpeedIcon\";\nwindSpeedIcon.payload = speedToCardIcon(msg.payload.windspeed);\n\nsunRise.topic = \"SunRise\";\nsunRise.payload = timeConverter(msg.payload.sunrise);\n\nsunSet.topic = \"SunRet\";\nsunSet.payload = timeConverter(msg.payload.sunset);\n\nowIconMap.clear(); //freeing resource\n\nreturn [conditionIcon, windSpeedIcon, windSpeed, windDirection, windDirectionIcon, sunRise, sunSet];",
        "outputs": 7,
        "noerr": 0,
        "x": 630,
        "y": 100,
        "wires": [
            [],
            [
                "36f7ee8c.f81d22"
            ],
            [
                "ecdb0fcb.578b"
            ],
            [],
            [
                "68053834.7a0248"
            ],
            [
                "dcdf809a.98371"
            ],
            [
                "22970626.048b7a"
            ]
        ]
    },
    {
        "id": "ecdb0fcb.578b",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "3d7ad0dc.00ec1",
        "order": 2,
        "width": 1,
        "height": 2,
        "name": "WindSpeed",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 950,
        "y": 80,
        "wires": []
    },
    {
        "id": "dcdf809a.98371",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "d14a4dab.a30fb",
        "order": 2,
        "width": 2,
        "height": 2,
        "name": "Sunrise",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 940,
        "y": 220,
        "wires": []
    },
    {
        "id": "22970626.048b7a",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "d14a4dab.a30fb",
        "order": 4,
        "width": 2,
        "height": 2,
        "name": "Sunset",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 940,
        "y": 300,
        "wires": []
    },
    {
        "id": "20cb27bd.e6f128",
        "type": "ui_template",
        "z": "2b170c60.0fddc4",
        "group": "d14a4dab.a30fb",
        "name": "Sunrise Icon",
        "order": 1,
        "width": 1,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunrise\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "513f24a7.74c90c",
        "type": "ui_template",
        "z": "2b170c60.0fddc4",
        "group": "d14a4dab.a30fb",
        "name": "Sunset Icon",
        "order": 3,
        "width": 1,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunset\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "68053834.7a0248",
        "type": "ui_template",
        "z": "2b170c60.0fddc4",
        "group": "3d7ad0dc.00ec1",
        "name": "WindDirection icon",
        "order": 3,
        "width": 3,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi wi-wind {{msg.payload}}\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 970,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "18e56444.a5e33c",
        "type": "openweathermap",
        "z": "2b170c60.0fddc4",
        "name": "Current Weather",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 340,
        "y": 100,
        "wires": [
            [
                "7d3e4cd1.921c34",
                "be58da36.ebf0d8"
            ]
        ]
    },
    {
        "id": "36f7ee8c.f81d22",
        "type": "ui_template",
        "z": "2b170c60.0fddc4",
        "group": "3d7ad0dc.00ec1",
        "name": "WindSpeed Icon",
        "order": 1,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-3x wi wi-wind {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 960,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "20f5c9a.a486a36",
        "type": "openweathermap",
        "z": "2b170c60.0fddc4",
        "name": "5 Day Forecast",
        "wtype": "forecast",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 340,
        "y": 580,
        "wires": [
            [
                "3a268aa9.403506",
                "95b1375b.9c49a8",
                "30bc9b3f.2625a4"
            ]
        ]
    },
    {
        "id": "3a268aa9.403506",
        "type": "function",
        "z": "2b170c60.0fddc4",
        "name": "Prepare Forecast Icon",
        "func": "var wfcIcon1 = {};\nvar wfcIcon2 = {}; \nvar wfcIcon3 = {};\nvar wfcIcon4 = {};\nvar wfcIcon5 = {};\nvar wfcIcon6 = {};\nvar wfcIcon7 = {};\nvar wfcIcon8 = {};\n\n\nvar date = new Date ();\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min; /* + ':' + sec ;*/\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nwfcIcon1.topic = msg.payload[0].dt_txt;\nwfcIcon1.payload = owIconMap.get(msg.payload[0].weather[0].icon);\n\nwfcIcon2.topic = msg.payload[1].dt_txt;\nwfcIcon2.payload = owIconMap.get(msg.payload[1].weather[0].icon);\n\nwfcIcon3.topic = msg.payload[2].dt_txt;\nwfcIcon3.payload = owIconMap.get(msg.payload[2].weather[0].icon);\n\nwfcIcon4.topic = msg.payload[3].dt_txt;\nwfcIcon4.payload = owIconMap.get(msg.payload[3].weather[0].icon);\n\nwfcIcon5.topic = msg.payload[4].dt_txt;\nwfcIcon5.payload = owIconMap.get(msg.payload[4].weather[0].icon);\n\nwfcIcon6.topic = msg.payload[5].dt_txt;\nwfcIcon6.payload = owIconMap.get(msg.payload[5].weather[0].icon);\n\nwfcIcon7.topic = msg.payload[6].dt_txt;\nwfcIcon7.payload = owIconMap.get(msg.payload[6].weather[0].icon);\n\nwfcIcon8.topic = msg.payload[7].dt_txt;\nwfcIcon8.payload = owIconMap.get(msg.payload[7].weather[0].icon);\n\n\nowIconMap.clear(); //freeing resource\n\nreturn [wfcIcon1, wfcIcon2, wfcIcon3, wfcIcon4, wfcIcon5, wfcIcon6, wfcIcon7, wfcIcon8];",
        "outputs": 8,
        "noerr": 0,
        "x": 640,
        "y": 580,
        "wires": [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "95b1375b.9c49a8",
        "type": "function",
        "z": "2b170c60.0fddc4",
        "name": "Prepare Forecast Data",
        "func": "var fcdata = {};\n\nfcdata.payload = {\n  forecast: {\n    dt00: {\n      dt_txt: msg.payload[0].dt_txt,\n      temp_min: msg.payload[0].main.temp_min,\n      temp: msg.payload[0].main.temp,\n      temp_max: msg.payload[0].main.temp_max,\n      icon: msg.payload[0].weather[0].icon,\n    },\n    dt01: {\n      dt_txt: msg.payload[1].dt_txt,\n      temp_min: msg.payload[1].main.temp_min,\n      temp_max: msg.payload[1].main.temp_max,\n      temp: msg.payload[1].main.temp,\n      icon: msg.payload[1].weather[0].icon,\n    },\n    dt02: {\n      dt_txt: msg.payload[2].dt_txt,\n      temp_min: msg.payload[2].main.temp_min,\n      temp_max: msg.payload[2].main.temp_max,\n      temp: msg.payload[2].main.temp,\n      icon: msg.payload[2].weather[0].icon,\n    },\n    dt03: {\n      dt_txt: msg.payload[3].dt_txt,\n      temp_min: msg.payload[3].main.temp_min,\n      temp_max: msg.payload[3].main.temp_max,\n      temp: msg.payload[3].main.temp,\n      icon: msg.payload[3].weather[0].icon,\n    },\n    dt04: {\n      dt_txt: msg.payload[4].dt_txt,\n      temp_min: msg.payload[4].main.temp_min,\n      temp_max: msg.payload[4].main.temp_max,\n      temp: msg.payload[4].main.temp,\n      icon: msg.payload[4].weather[0].icon,\n    },\n    dt05: {\n      dt_txt: msg.payload[5].dt_txt,\n      temp_min: msg.payload[5].main.temp_min,\n      temp_max: msg.payload[5].main.temp_max,\n      temp: msg.payload[5].main.temp,\n      icon: msg.payload[5].weather[0].icon,\n    },\n    dt06: {\n      dt_txt: msg.payload[6].dt_txt,\n      temp_min: msg.payload[6].main.temp_min,\n      temp_max: msg.payload[6].main.temp_max,\n      temp: msg.payload[6].main.temp,\n      icon: msg.payload[6].weather[0].icon,\n    },\n    dt07: {\n      dt_txt: msg.payload[7].dt_txt,\n      temp_min: msg.payload[7].main.temp_min,\n      temp_max: msg.payload[7].main.temp_max,\n      temp: msg.payload[7].main.temp,\n      icon: msg.payload[7].weather[0].icon,\n    }\n  }\n}\n\n\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "x": 640,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "30bc9b3f.2625a4",
        "type": "function",
        "z": "2b170c60.0fddc4",
        "name": "Prepare forecast for UI widget",
        "func": "var fcdata = {};\n\n// prepare forecast data for CSS based ui widget\n\nfcdata.payload = {\n  row: {\n  \tdata01: {\n  \t\tcell01: msg.payload[0].dt_txt.substring(11, 16),\n  \t\tcell02: msg.payload[1].dt_txt.substring(11, 16),\n  \t\tcell03: msg.payload[2].dt_txt.substring(11, 16),\n  \t\tcell04: msg.payload[3].dt_txt.substring(11, 16),\n  \t\tcell05: msg.payload[4].dt_txt.substring(11, 16),\n  \t\tcell06: msg.payload[5].dt_txt.substring(11, 16),\n  \t\tcell07: msg.payload[6].dt_txt.substring(11, 16),\n  \t\tcell08: msg.payload[7].dt_txt.substring(11, 16)\n  \t},\n  \tdata02: {\n  \t\tcell01: msg.payload[0].main.temp,\n  \t\tcell02: msg.payload[1].main.temp,\n  \t\tcell03: msg.payload[2].main.temp,\n  \t\tcell04: msg.payload[3].main.temp,\n  \t\tcell05: msg.payload[4].main.temp,\n  \t\tcell06: msg.payload[5].main.temp,\n  \t\tcell07: msg.payload[6].main.temp,\n  \t\tcell08: msg.payload[7].main.temp\n  \t}\n  }\n}\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "be58da36.ebf0d8",
        "type": "function",
        "z": "2b170c60.0fddc4",
        "name": "Get",
        "func": "var msg1 = { payload:msg.payload.temp_maxc };\nvar msg2 = { payload:msg.payload.tempc };\nvar msg3 = { payload:msg.payload.temp_minc };\n\nreturn [ msg1, msg2, msg3 ];",
        "outputs": 3,
        "noerr": 0,
        "x": 570,
        "y": 400,
        "wires": [
            [
                "57401db3.f0f7a4"
            ],
            [
                "aef94890.14fdd8"
            ],
            [
                "da7f9247.b2f78"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min"
        ]
    },
    {
        "id": "57401db3.f0f7a4",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "fb07d408.d49358",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "Max °C",
        "label": "<font size=6>H",
        "format": "<font size=4>{{msg.payload.toFixed(0)}}°",
        "layout": "row-center",
        "x": 940,
        "y": 380,
        "wires": []
    },
    {
        "id": "aef94890.14fdd8",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "fb07d408.d49358",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "Temp °C",
        "label": "",
        "format": "<font size=6>{{msg.payload.toFixed(0)}}°",
        "layout": "col-center",
        "x": 940,
        "y": 420,
        "wires": []
    },
    {
        "id": "da7f9247.b2f78",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "fb07d408.d49358",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Min °C",
        "label": "<font size=6>L",
        "format": "<font size=4>{{msg.payload.toFixed(0)}}°",
        "layout": "row-center",
        "x": 930,
        "y": 460,
        "wires": []
    },
    {
        "id": "b5cbfd82.e46e7",
        "type": "ui_template",
        "z": "266c41c.85b30be",
        "group": "3bde2bde.ab9fc4",
        "name": "MQTT Output Console",
        "order": 1,
        "width": 6,
        "height": 2,
        "format": "<script>\nvar dt = new Date();\ndocument.getElementById(\"datetime\").innerHTML = ((\"0\"+dt.getDate()).slice(-2)) +\".\"+ ((\"0\"+(dt.getMonth()+1)).slice(-2)) +\".\"+ (dt.getFullYear()) +\" \"+ ((\"0\"+dt.getHours()).slice(-2)) +\":\"+ ((\"0\"+dt.getMinutes()).slice(-2));\n</script>\n\n<ul>\n <li ng-repeat=\"x in msg.payload\">\n     <p>Date/Time: <span id=\"datetime\"></span></p>\n        <font color=\"red\">{{x.topic}}\n        </font>\n        <ul>\n            <li>{{x.payload}}</li>\n        </ul>\n </li>\n</ul>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 700,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "be07cda3.a9235",
        "type": "ui_text",
        "z": "b660324d.e4215",
        "group": "ac20ebf1.e0f0f8",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Humidity Bedroom",
        "label": "Humi:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 630,
        "y": 100,
        "wires": []
    },
    {
        "id": "7e017eec.1c948",
        "type": "ui_text",
        "z": "b660324d.e4215",
        "group": "db8dd4b5.e04c28",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Humidity Living",
        "label": "Humi:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 620,
        "y": 460,
        "wires": []
    },
    {
        "id": "4f55771f.57f318",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Bedroom",
        "info": "",
        "x": 60,
        "y": 80,
        "wires": []
    },
    {
        "id": "de6d03de.93b82",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Control Boiler",
        "info": "",
        "x": 70,
        "y": 380,
        "wires": []
    },
    {
        "id": "9f64b01d.19b43",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Living Temp Control",
        "info": "",
        "x": 90,
        "y": 680,
        "wires": []
    },
    {
        "id": "b9e643f2.25bae",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Air Cleaning Control",
        "info": "",
        "x": 90,
        "y": 980,
        "wires": []
    },
    {
        "id": "66b31480.fd34ec",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "ON \\ OFF - Contol",
        "func": "if (msg.payload[0] < (msg.payload[1] + 1) && msg.payload[0] > (msg.payload[1] - 1)) \n{\nmsg.payload = 0;\n}\nelse \n{\nmsg.payload = 1;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 243,
        "wires": [
            [
                "afcbbc50.38f95"
            ]
        ]
    },
    {
        "id": "ee8c8e63.c4e0b",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "470ed80d.4c8678"
        ],
        "x": 875,
        "y": 163,
        "wires": [
            [
                "50c1652f.ef499c"
            ]
        ]
    },
    {
        "id": "afcbbc50.38f95",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "66686f1d.f495e"
        ],
        "x": 1135,
        "y": 243,
        "wires": []
    },
    {
        "id": "470ed80d.4c8678",
        "type": "link out",
        "z": "b660324d.e4215",
        "name": "",
        "links": [
            "ee8c8e63.c4e0b"
        ],
        "x": 855,
        "y": 180,
        "wires": []
    },
    {
        "id": "66686f1d.f495e",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "afcbbc50.38f95"
        ],
        "x": 135,
        "y": 900,
        "wires": [
            [
                "24ef9d8e.5f1ae2"
            ]
        ]
    },
    {
        "id": "afca311d.a9631",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "37f9354b.26d47a"
        ],
        "x": 135,
        "y": 940,
        "wires": [
            [
                "24ef9d8e.5f1ae2"
            ]
        ]
    },
    {
        "id": "3d1c2bea.3f05f4",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "ON \\ OFF - Contol",
        "func": "if (msg.payload[0] < (msg.payload[1] + 1) && msg.payload[0] > (msg.payload[1] - 1)) \n{\nmsg.payload = 0;\n}\nelse \n{\nmsg.payload = 1;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 843,
        "wires": [
            [
                "37f9354b.26d47a"
            ]
        ]
    },
    {
        "id": "37f9354b.26d47a",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "afca311d.a9631"
        ],
        "x": 1135,
        "y": 843,
        "wires": []
    },
    {
        "id": "de837da8.ee496",
        "type": "link in",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "55398979.323098"
        ],
        "x": 875,
        "y": 763,
        "wires": [
            [
                "42e92556.6e98cc"
            ]
        ]
    },
    {
        "id": "55398979.323098",
        "type": "link out",
        "z": "b660324d.e4215",
        "name": "",
        "links": [
            "de837da8.ee496"
        ],
        "x": 855,
        "y": 340,
        "wires": []
    },
    {
        "id": "42e92556.6e98cc",
        "type": "join",
        "z": "22477ce2.39ef74",
        "name": "Join - Set & Temp",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 950,
        "y": 803,
        "wires": [
            [
                "3d1c2bea.3f05f4"
            ]
        ]
    },
    {
        "id": "50c1652f.ef499c",
        "type": "join",
        "z": "22477ce2.39ef74",
        "name": "Join - Set & Temp",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 950,
        "y": 203,
        "wires": [
            [
                "66b31480.fd34ec"
            ]
        ]
    },
    {
        "id": "1f29be1a.e4c502",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "d9a9134b.c78d4"
        ],
        "x": 135,
        "y": 700,
        "wires": [
            [
                "6824021b.60debc",
                "31c03f24.6c20f"
            ]
        ]
    },
    {
        "id": "6350085a.0e9928",
        "type": "function",
        "z": "22477ce2.39ef74",
        "name": "ON \\ OFF - Contol",
        "func": "var msg1= { payload:msg.payload};\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 543,
        "wires": [
            [
                "d9a9134b.c78d4"
            ]
        ]
    },
    {
        "id": "d9a9134b.c78d4",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "1f29be1a.e4c502"
        ],
        "x": 1135,
        "y": 543,
        "wires": []
    },
    {
        "id": "268fbf10.d3b3",
        "type": "throttle",
        "z": "b660324d.e4215",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 180,
        "wires": [
            [
                "997defbf.5320e"
            ]
        ]
    },
    {
        "id": "2062aafd.4d6bf6",
        "type": "throttle",
        "z": "b660324d.e4215",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 300,
        "wires": [
            [
                "efb6f08d.ff8a3"
            ]
        ]
    },
    {
        "id": "e858953d.276b98",
        "type": "throttle",
        "z": "b660324d.e4215",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 340,
        "wires": [
            [
                "efb6f08d.ff8a3"
            ]
        ]
    },
    {
        "id": "3956d910.2e94d6",
        "type": "throttle",
        "z": "b660324d.e4215",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 220,
        "wires": [
            [
                "997defbf.5320e"
            ]
        ]
    },
    {
        "id": "99584691.136c08",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Manual control",
        "label": "<font size=4>AIME - Temp Control",
        "tooltip": "",
        "group": "50c34ab8.b9c814",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "fa-3x fa-refresh fa-spin",
        "oncolor": "white",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "fa-3x fa-hand-paper-o",
        "offcolor": "white",
        "x": 340,
        "y": 880,
        "wires": [
            [
                "24ef9d8e.5f1ae2"
            ]
        ]
    },
    {
        "id": "31c03f24.6c20f",
        "type": "ui_switch",
        "z": "b2ea4617.40f5d8",
        "name": "Manual control ON / OFF",
        "label": "<font size=4>Schedule On / Off",
        "tooltip": "",
        "group": "34ece2d5.a2c7ae",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "fa-2x fa-circle-o-notch fa-spin",
        "oncolor": "green",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "fa-2x fa-hand-paper-o",
        "offcolor": "white",
        "x": 350,
        "y": 720,
        "wires": [
            [
                "6824021b.60debc"
            ]
        ]
    },
    {
        "id": "92824474.a250b8",
        "type": "inject",
        "z": "22477ce2.39ef74",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 110,
        "y": 1420,
        "wires": [
            [
                "39d0edd2.534d02"
            ]
        ]
    },
    {
        "id": "43944fc2.6935d",
        "type": "ui_text",
        "z": "22477ce2.39ef74",
        "group": "b2b87cff.8f95d",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 650,
        "y": 1420,
        "wires": []
    },
    {
        "id": "39d0edd2.534d02",
        "type": "change",
        "z": "22477ce2.39ef74",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1420,
        "wires": [
            [
                "43944fc2.6935d"
            ]
        ]
    },
    {
        "id": "4c27e66d.7acab8",
        "type": "ui_text",
        "z": "22477ce2.39ef74",
        "group": "b2b87cff.8f95d",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 90,
        "y": 1380,
        "wires": []
    },
    {
        "id": "d50f2f42.1b2cf",
        "type": "comment",
        "z": "22477ce2.39ef74",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 1330,
        "wires": []
    },
    {
        "id": "8faf242d.7f9418",
        "type": "ui_template",
        "z": "24b5c374.60b1dc",
        "group": "bcd8bbcc.1ce648",
        "name": "Camera_Moto_Min_D",
        "order": 1,
        "width": 6,
        "height": 3,
        "format": "<img src=\"{{ msg.payload }}\">",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 340,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "2d8d3aef.2caca6",
        "type": "ui_template",
        "z": "24b5c374.60b1dc",
        "group": "b62d612b.1048d",
        "name": "Camera_Moto",
        "order": 1,
        "width": 12,
        "height": 6,
        "format": "<img src=\"{{ msg.payload }}\">",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 320,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "6a46a391.5f91ec",
        "type": "ONVIF Snapshot",
        "z": "24b5c374.60b1dc",
        "name": "Camera Moto",
        "url": "http://192.168.0.150/onvif/device_service",
        "interval": "5",
        "username": "aime",
        "password": "Philips!224291",
        "active": true,
        "x": 110,
        "y": 80,
        "wires": [
            [
                "8faf242d.7f9418",
                "2d8d3aef.2caca6"
            ]
        ]
    },
    {
        "id": "598b7e3d.27fdf",
        "type": "comment",
        "z": "24b5c374.60b1dc",
        "name": "Cameras",
        "info": "",
        "x": 60,
        "y": 20,
        "wires": []
    },
    {
        "id": "1d36d45e.d8e92c",
        "type": "inject",
        "z": "24b5c374.60b1dc",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 110,
        "y": 300,
        "wires": [
            [
                "73ebf064.edadf"
            ]
        ]
    },
    {
        "id": "5cedc831.439248",
        "type": "ui_text",
        "z": "24b5c374.60b1dc",
        "group": "dd8c7747.792a18",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 610,
        "y": 300,
        "wires": []
    },
    {
        "id": "73ebf064.edadf",
        "type": "change",
        "z": "24b5c374.60b1dc",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 300,
        "wires": [
            [
                "5cedc831.439248"
            ]
        ]
    },
    {
        "id": "d4b06ff7.97d",
        "type": "ui_text",
        "z": "24b5c374.60b1dc",
        "group": "dd8c7747.792a18",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 90,
        "y": 260,
        "wires": []
    },
    {
        "id": "42c70fcb.f6c07",
        "type": "comment",
        "z": "24b5c374.60b1dc",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 210,
        "wires": []
    },
    {
        "id": "f10acccf.0ac4e",
        "type": "inject",
        "z": "266c41c.85b30be",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 130,
        "y": 380,
        "wires": [
            [
                "5dccf6b3.370418"
            ]
        ]
    },
    {
        "id": "f58c508c.8e085",
        "type": "ui_text",
        "z": "266c41c.85b30be",
        "group": "d404ecb7.6bc38",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 630,
        "y": 380,
        "wires": []
    },
    {
        "id": "5dccf6b3.370418",
        "type": "change",
        "z": "266c41c.85b30be",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 380,
        "wires": [
            [
                "f58c508c.8e085"
            ]
        ]
    },
    {
        "id": "8acfcc45.93acc",
        "type": "ui_text",
        "z": "266c41c.85b30be",
        "group": "d404ecb7.6bc38",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 110,
        "y": 340,
        "wires": []
    },
    {
        "id": "4a452b3b.42afa4",
        "type": "comment",
        "z": "266c41c.85b30be",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 300,
        "wires": []
    },
    {
        "id": "fe07ac7d.1c4ef",
        "type": "inject",
        "z": "b660324d.e4215",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 130,
        "y": 640,
        "wires": [
            [
                "768285ca.f51cfc"
            ]
        ]
    },
    {
        "id": "6db0afb4.77352",
        "type": "ui_text",
        "z": "b660324d.e4215",
        "group": "98bc6371.27772",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "768285ca.f51cfc",
        "type": "change",
        "z": "b660324d.e4215",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 640,
        "wires": [
            [
                "6db0afb4.77352"
            ]
        ]
    },
    {
        "id": "89eeb526.2f36f8",
        "type": "ui_text",
        "z": "b660324d.e4215",
        "group": "98bc6371.27772",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 110,
        "y": 600,
        "wires": []
    },
    {
        "id": "ef495a20.5ae158",
        "type": "comment",
        "z": "b660324d.e4215",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 560,
        "wires": []
    },
    {
        "id": "8a09ebd9.d26578",
        "type": "function",
        "z": "b2ea4617.40f5d8",
        "name": "AUTO",
        "func": "if (msg.payload[0] === true)\n{\n    var msg1_x = { payload:msg.payload[1] };\n    \n    return msg1_x;\n}\nelse if (msg.payload[1] === true)\n{\n    var msg1_y = { payload:msg.payload[0] };\n    \n    return msg1_y;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 660,
        "wires": [
            [
                "c5d3ae37.d9a99"
            ]
        ]
    },
    {
        "id": "6824021b.60debc",
        "type": "join",
        "z": "b2ea4617.40f5d8",
        "name": "Join - Set & Temp",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 370,
        "y": 660,
        "wires": [
            [
                "8a09ebd9.d26578"
            ]
        ]
    },
    {
        "id": "24ef9d8e.5f1ae2",
        "type": "join",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 310,
        "y": 920,
        "wires": [
            [
                "d60f084.4931ff8"
            ]
        ]
    },
    {
        "id": "d60f084.4931ff8",
        "type": "function",
        "z": "b2ea4617.40f5d8",
        "name": "AUTO",
        "func": "if (msg.payload[0] === true)\n{\n    var msg2_t = { payload:msg.payload[1] };\n    var msg1_t = { payload:msg.payload[2] };\n    \n    return [msg1_t, msg2_t ];\n}\nelse if (msg.payload[3] === true)\n{\n    var msg2_f = { payload:msg.payload[0] };\n    var msg1_f = { payload:msg.payload[1] };\n    \n    return [msg1_f, msg2_f ];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 490,
        "y": 920,
        "wires": [
            [
                "d2c9126d.530cb"
            ],
            [
                "4e75b1cf.e5d3b"
            ]
        ]
    },
    {
        "id": "7b26d3d2.fb3f4c",
        "type": "inject",
        "z": "b2ea4617.40f5d8",
        "name": "Refresh",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 320,
        "y": 840,
        "wires": [
            [
                "99584691.136c08"
            ]
        ]
    },
    {
        "id": "d2c9126d.530cb",
        "type": "link out",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "a1bcee7a.5e4a3"
        ],
        "x": 675,
        "y": 880,
        "wires": []
    },
    {
        "id": "4e75b1cf.e5d3b",
        "type": "link out",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "9e150ce4.1a342"
        ],
        "x": 675,
        "y": 920,
        "wires": []
    },
    {
        "id": "a1bcee7a.5e4a3",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "d2c9126d.530cb"
        ],
        "x": 135,
        "y": 360,
        "wires": [
            [
                "52021dc2.13f5f4"
            ]
        ]
    },
    {
        "id": "9e150ce4.1a342",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "4e75b1cf.e5d3b"
        ],
        "x": 135,
        "y": 520,
        "wires": [
            [
                "1dee8587.cc0a3a"
            ]
        ]
    },
    {
        "id": "c147ac5.75a775",
        "type": "mqtt in",
        "z": "ee7f4569.0ab7b8",
        "name": "Door Status",
        "topic": "Door_Status",
        "qos": "2",
        "datatype": "auto",
        "broker": "8f487aad.727ab8",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "c69c0678.8aa628"
            ]
        ]
    },
    {
        "id": "ce552244.8bf86",
        "type": "function",
        "z": "4cac3c00.1820d4",
        "name": "verify_pin",
        "func": "var pins = [\"2136\"];\nvar verified = false;\n\nfor(var i=0;i<pins.length;i++){\n    if(msg.passcode == pins[i]){\n        verified = true;\n        break;\n    }\n}\n\nmsg.verified = verified;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 280,
        "y": 260,
        "wires": [
            [
                "c35c2ef7.77e5e"
            ]
        ]
    },
    {
        "id": "c35c2ef7.77e5e",
        "type": "switch",
        "z": "4cac3c00.1820d4",
        "name": "check",
        "property": "verified",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 260,
        "wires": [
            [
                "b9d709f9.c72078"
            ],
            [
                "665e96b4.1f9ef8"
            ]
        ]
    },
    {
        "id": "b9d709f9.c72078",
        "type": "function",
        "z": "4cac3c00.1820d4",
        "name": "pin_ok",
        "func": "var msg2 = {};\nmsg2.topic = \"Pin successfully verified!\";\nmsg2.payload = \"\";\n    \nreturn [msg, msg2];",
        "outputs": 2,
        "noerr": 0,
        "x": 550,
        "y": 240,
        "wires": [
            [
                "6a0d8cfc.2f30e4"
            ],
            [
                "95320295.e2b2"
            ]
        ]
    },
    {
        "id": "665e96b4.1f9ef8",
        "type": "function",
        "z": "4cac3c00.1820d4",
        "name": "pin_error",
        "func": " msg.topic = \"Wrong PIN\";\n msg.payload = \"\";\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 280,
        "wires": [
            [
                "95320295.e2b2"
            ]
        ]
    },
    {
        "id": "95320295.e2b2",
        "type": "ui_toast",
        "z": "4cac3c00.1820d4",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": true,
        "topic": "",
        "name": "Pin!",
        "x": 710,
        "y": 280,
        "wires": []
    },
    {
        "id": "9aff6c49.fd931",
        "type": "delay",
        "z": "ee7f4569.0ab7b8",
        "name": "Close in 5 min",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 480,
        "y": 120,
        "wires": [
            [
                "fd705fa2.ae8f6"
            ]
        ]
    },
    {
        "id": "c69c0678.8aa628",
        "type": "function",
        "z": "ee7f4569.0ab7b8",
        "name": "Function",
        "func": "var msg1 = {};\nmsg1.payload = 1;\n\nvar msg2 = {};\nmsg2.payload = 0;\n\nreturn [ msg1, msg2 ];",
        "outputs": 2,
        "noerr": 0,
        "x": 280,
        "y": 120,
        "wires": [
            [
                "fd705fa2.ae8f6"
            ],
            [
                "9aff6c49.fd931"
            ]
        ]
    },
    {
        "id": "fd705fa2.ae8f6",
        "type": "link out",
        "z": "ee7f4569.0ab7b8",
        "name": "",
        "links": [
            "3580883a.ebe308"
        ],
        "x": 535,
        "y": 80,
        "wires": []
    },
    {
        "id": "3580883a.ebe308",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "fd705fa2.ae8f6"
        ],
        "x": 135,
        "y": 160,
        "wires": [
            [
                "77631691.1da6b8"
            ]
        ]
    },
    {
        "id": "31e228d4.41cf88",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "4c12246f.4ed6fc",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "°C",
        "label": "<font size=4>°C",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 690,
        "y": 320,
        "wires": []
    },
    {
        "id": "6f6d0849.2fd978",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "4c12246f.4ed6fc",
        "order": 3,
        "width": 2,
        "height": 1,
        "name": "Temp Set",
        "label": "<font size=4>Set",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 700,
        "y": 420,
        "wires": []
    },
    {
        "id": "230ab9f3.222e46",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "4c12246f.4ed6fc",
        "order": 1,
        "width": 3,
        "height": 2,
        "name": "Title - Bedroom Temp Control",
        "label": "<font size=4>Temp Control Bedroom ",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 340,
        "y": 320,
        "wires": []
    },
    {
        "id": "cf67bb3e.825db8",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "f616446d.a9a168",
        "order": 1,
        "width": 3,
        "height": 2,
        "name": "Title - LivingTemp Control",
        "label": "<font size=4>Temp Control Living",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 330,
        "y": 480,
        "wires": []
    },
    {
        "id": "a25765d2.25e958",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "f616446d.a9a168",
        "order": 3,
        "width": 2,
        "height": 1,
        "name": "Temp Set",
        "label": "<font size=4> Set",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 700,
        "y": 580,
        "wires": []
    },
    {
        "id": "978efe81.c4cba",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "b173a67f.400308"
        ],
        "x": 875,
        "y": 883,
        "wires": []
    },
    {
        "id": "b173a67f.400308",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "978efe81.c4cba"
        ],
        "x": 555,
        "y": 560,
        "wires": [
            [
                "a25765d2.25e958"
            ]
        ]
    },
    {
        "id": "837528bc.5984c8",
        "type": "ui_text",
        "z": "b2ea4617.40f5d8",
        "group": "f616446d.a9a168",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "°C",
        "label": "<font size=4>°C",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 690,
        "y": 480,
        "wires": []
    },
    {
        "id": "26964288.bc1cee",
        "type": "link out",
        "z": "22477ce2.39ef74",
        "name": "",
        "links": [
            "4b632cc1.8cefc4"
        ],
        "x": 875,
        "y": 283,
        "wires": []
    },
    {
        "id": "4b632cc1.8cefc4",
        "type": "link in",
        "z": "b2ea4617.40f5d8",
        "name": "",
        "links": [
            "26964288.bc1cee"
        ],
        "x": 555,
        "y": 400,
        "wires": [
            [
                "6f6d0849.2fd978"
            ]
        ]
    },
    {
        "id": "b40560e5.ef415",
        "type": "ui_text",
        "z": "4cac3c00.1820d4",
        "group": "401a958a.ea354c",
        "order": 2,
        "width": 6,
        "height": 2,
        "name": "Text",
        "label": "<font size=5>AIME - Smart Home",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 90,
        "y": 160,
        "wires": []
    },
    {
        "id": "a4342bc9.099208",
        "type": "ui_switch",
        "z": "4cac3c00.1820d4",
        "name": "Logo",
        "label": "",
        "tooltip": "",
        "group": "401a958a.ea354c",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "fa-5x fa-home",
        "oncolor": "white",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "fa-5x fa-home",
        "offcolor": "white",
        "x": 90,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "6354287a.fa2c88",
        "type": "link in",
        "z": "c93dd8ec.4e17d8",
        "name": "",
        "links": [
            "6a0d8cfc.2f30e4"
        ],
        "x": 155,
        "y": 80,
        "wires": [
            [
                "4c913eef.2c89d"
            ]
        ]
    },
    {
        "id": "6a0d8cfc.2f30e4",
        "type": "link out",
        "z": "4cac3c00.1820d4",
        "name": "",
        "links": [
            "6354287a.fa2c88"
        ],
        "x": 595,
        "y": 180,
        "wires": []
    },
    {
        "id": "2720c628.ed5fda",
        "type": "inject",
        "z": "2b170c60.0fddc4",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 130,
        "y": 860,
        "wires": [
            [
                "f8f9881.ede2b78"
            ]
        ]
    },
    {
        "id": "68d1c063.50852",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "3b4338fb.13dca8",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 630,
        "y": 860,
        "wires": []
    },
    {
        "id": "f8f9881.ede2b78",
        "type": "change",
        "z": "2b170c60.0fddc4",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 860,
        "wires": [
            [
                "68d1c063.50852"
            ]
        ]
    },
    {
        "id": "b51199a4.ead438",
        "type": "ui_text",
        "z": "2b170c60.0fddc4",
        "group": "3b4338fb.13dca8",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "AIME",
        "label": "<font size=4>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 90,
        "y": 820,
        "wires": []
    },
    {
        "id": "23b57533.329d6a",
        "type": "comment",
        "z": "2b170c60.0fddc4",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 780,
        "wires": []
    },
    {
        "id": "5c31daa2.811e54",
        "type": "ui_text",
        "z": "4cac3c00.1820d4",
        "group": "a706ea6e.d57448",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Power by ...",
        "label": "Power by M. Emanuel",
        "format": "",
        "layout": "row-center",
        "x": 110,
        "y": 200,
        "wires": []
    },
    {
        "id": "2728a9f5.aa9a46",
        "type": "ui_template",
        "z": "4cac3c00.1820d4",
        "group": "cb19e7c9.938b58",
        "name": "Pin_Unlock",
        "order": 1,
        "width": 6,
        "height": 7,
        "format": "    <div class=\"dialog_content\">\n        \n        <div class=\"dialog_body\">\n\n           <div layout=\"row\" layout-align=\"center\">\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(0, 1)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(1, 2)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(2, 3)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode.substring(3, 4)}}\n                </div>\n            </div>\n            \n            <div layout=\"column\" layout-align=\"center\" style=\"margin-top: 10px\">\n                <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(1)\">1</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(2)\">2</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(3)\">3</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(4)\">4</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(5)\">5</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(6)\">6</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(7)\">7</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(8)\">8</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(9)\">9</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"confirm()\">\n                            <ng-md-icon icon=\"done\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(0)\">0</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"delete()\">\n                            <ng-md-icon icon=\"arrow_back\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                </div>\n            </div> \n          \n        </div> <!--dialog_body-->\n    </div> <!--dialog_content-->\n\n<style>\n\n/* The Dialog (background) */\n.dialog_content {\n    position: absolute;\n    background-color: #fff;\n    color: black;\n    left: calc(50% - 150px);\n    top: 5px;\n    border-radius: 5px;\n    padding: 0;\n    width: 300px;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: animatetop;\n    animation-name: animatetop;\n    animation-duration: 0.4s;\n}\n\n/* Media query for smartphones (to Fix?) */\n@media only screen and (min-device-width : 375px) and (max-device-width : 667px) { \n    .dialog_content {\n    margin-top: 5%;\n    margin-left: 5%;\n}\n}\n\n/* Add Animation */\n@-webkit-keyframes animatetop {\n    from {top: -300px; opacity: 0} \n    to {top: 0; opacity: 1}\n}\n\n@keyframes animatetop {\n    from {top: -300px; opacity: 0}\n    to {top: 0; opacity: 1}\n}\n\n/* Dialog Header */\n.dialog_header {\n    padding: 2px 16px;\n    background-color: #03A9F4;\n    border-radius: 10px 10px 0 0;\n    color: white;\n}\n\n/* Dialog Body */\n.dialog_body {padding: 5px;}\n\n/* __ */\n.number_placeholder{\n    width: 50px;\n    height: 34px;\n    margin: 10px;\n    font-size: 20pt;\n    text-align: center;\n    border-bottom: 1px solid black;\n}\n\n/* Number container */\n.number_box{\n    margin: 5px;\n}\n\n/* Buttons style */\n.pin {\n    min-height: 50px;\n    min-width: 50px;\n    font-weight: bold;\n    margin: 0px 10px 10px 0px;\n    box-shadow: 4px 4px 6px 0 #dadada;\n    background-color: #29B6F6;\n    color: #fff;\n}\n\n.pin:not([disabled]):hover {\n    background-color: #03A9F4;\n}\n\n.btn1 {\n  color : rgb(49, 46, 46);\n  background-color: rgba(255, 222, 121, 0.96);\n  border-radius: 10px 0 0 10px;\n  font-size: 16px;\n}\n\n.btn1:not([disabled]):hover {\n  background-color: rgba(107, 103, 91, 0.96);\n  color: white;\n}\n\n.btn1[disabled] {\n  color : rgb(187, 187, 187);\n  background-color: rgba(230, 230, 229, 0.96);\n}\n\n</style>\n\n<script>\nvar dialog;\n\n(function(scope) {\n    \n    scope.passcode = \"\";\n    scope.payload = \"\";\n    scope.inited = false;\n    \n    scope.init = function() {\n        scope.passcode = \"\";\n        //Hide the md-panel\n        $('#pin_insert').parent().parent().css(\"display\", \"none\");\n        //This trick make it works on smartphones too :)\n        dialog = $('#pin_insert').detach();\n    }\n    \n    scope.add = function(value) {\n        if(scope.passcode.length < 4) {\n            scope.passcode = scope.passcode + value;\n            if(scope.passcode.length == 4) {\n                console.log(\"The four digit code was entered\");\n                   \n            }\n        }\n    }\n \n    scope.delete = function() {\n        if(scope.passcode.length > 0) {\n            scope.passcode = scope.passcode.substring(0, scope.passcode.length - 1);\n        }\n    }\n    \n    scope.confirm = function() {\n        if(scope.passcode.length == 4) {\n            scope.send({passcode: scope.passcode, payload : scope.payload});\n            scope.closeDialog();\n            scope.passcode = \"\";\n            scope.payload = \"\";\n        }\n    }\n\n    scope.$watch('msg', function(data) {\n        if(data && data.topic){\n            switch(data.topic){\n               case \"show\":\n                   if(scope.inited){\n                        scope.payload = data.payload;\n                        scope.showDialog();\n                   }\n                   else\n                        scope.inited = true;\n                break;\n            }\n        }\n    });\n})(scope);\n\n</script>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 110,
        "y": 260,
        "wires": [
            [
                "ce552244.8bf86"
            ]
        ]
    },
    {
        "id": "9c1da202.1af2c",
        "type": "comment",
        "z": "4cac3c00.1820d4",
        "name": "Security",
        "info": "",
        "x": 60,
        "y": 20,
        "wires": []
    },
    {
        "id": "6c14ccf0.eb9414",
        "type": "comment",
        "z": "2b170c60.0fddc4",
        "name": "Weather",
        "info": "",
        "x": 60,
        "y": 20,
        "wires": []
    },
    {
        "id": "3672d20e.5f525e",
        "type": "comment",
        "z": "ee7f4569.0ab7b8",
        "name": "Notifications",
        "info": "",
        "x": 70,
        "y": 20,
        "wires": []
    }
]