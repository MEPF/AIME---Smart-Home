[
    {
        "id": "1969df99.29018",
        "type": "tab",
        "label": "Menu Bar & Cameras",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a0b52d56.3fdb4",
        "type": "tab",
        "label": "Title & Date & Weather",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d56b74d9.9a4a28",
        "type": "tab",
        "label": "Relays",
        "disabled": false,
        "info": ""
    },
    {
        "id": "18fa541a.7c5fcc",
        "type": "tab",
        "label": "Temp & Humi",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1b4862bf.e3a47d",
        "type": "tab",
        "label": "Tasks",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ea4d71f7.a7d58",
        "type": "tab",
        "label": "Weather",
        "disabled": false,
        "info": ""
    },
    {
        "id": "6ad0297f.6ffa38",
        "type": "tab",
        "label": "Console Debug",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1230a6b.84d8759",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "Verdana,Verdana,Geneva,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "Verdana,Verdana,Geneva,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "AIME - SMART HOME",
            "hideToolbar": "true",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "false",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 46,
                "sy": 46,
                "gx": 10,
                "gy": 10,
                "cx": 10,
                "cy": 10,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "645444fb.b5d87c",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "8403d3c3.655c1",
        "type": "ui_group",
        "z": "",
        "name": "Bedroom",
        "tab": "51b6e184.1d1f3",
        "order": 3,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "ef61e81e.7cbc68",
        "type": "ui_group",
        "z": "",
        "name": "Hall - Light",
        "tab": "51b6e184.1d1f3",
        "order": 6,
        "disp": false,
        "width": 3,
        "collapse": false
    },
    {
        "id": "64b30620.3d5d88",
        "type": "ui_group",
        "z": "",
        "name": "Kitchen - Light",
        "tab": "51b6e184.1d1f3",
        "order": 7,
        "disp": false,
        "width": "3",
        "collapse": false
    },
    {
        "id": "965ff03b.8457a",
        "type": "ui_group",
        "z": "",
        "name": "Beathroom - Boiler",
        "tab": "51b6e184.1d1f3",
        "order": 8,
        "disp": false,
        "width": "3",
        "collapse": false
    },
    {
        "id": "407a1170.873df",
        "type": "ui_group",
        "z": "",
        "name": "Weather - API",
        "tab": "51b6e184.1d1f3",
        "order": 2,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "51b6e184.1d1f3",
        "type": "ui_tab",
        "z": "",
        "name": "AIME - Smart Home",
        "icon": "fa-home",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "57e4948c.f8f48c",
        "type": "ui_group",
        "z": "",
        "name": "Camera Moto",
        "tab": "51b6e184.1d1f3",
        "order": 5,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "5acc23d7.e6b3fc",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "51b6e184.1d1f3",
        "order": 1,
        "disp": false,
        "width": "16",
        "collapse": false
    },
    {
        "id": "2e7dc725.44ac38",
        "type": "ui_tab",
        "z": "",
        "name": "Camera Moto",
        "icon": "fa-video-camera",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d733db47.2cd7e8",
        "type": "ui_group",
        "z": "",
        "name": "Camera Moto",
        "tab": "2e7dc725.44ac38",
        "order": 2,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "6358e465.d2384c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "569c82bb.b3d6ac",
        "order": 10,
        "width": "6",
        "height": "4"
    },
    {
        "id": "a24725ca.5adc98",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8b5131d9.4089e",
        "order": 11,
        "width": "3",
        "height": "4"
    },
    {
        "id": "d6d9de2f.b6246",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "aa18eed1.47818",
        "order": 12,
        "width": "3",
        "height": "2"
    },
    {
        "id": "ac4873b2.011be",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "fac32365.c373",
        "order": 13,
        "width": 1,
        "height": "8"
    },
    {
        "id": "48e2cfd.3ae9d3",
        "type": "ui_group",
        "z": "",
        "name": "Everything Closed",
        "tab": "51b6e184.1d1f3",
        "order": 9,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "3674b446.4dbe6c",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "51b6e184.1d1f3",
        "order": 12,
        "disp": false,
        "width": 1,
        "collapse": false
    },
    {
        "id": "8900533.18083b",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "2e7dc725.44ac38",
        "order": 3,
        "disp": false,
        "width": "1",
        "collapse": false
    },
    {
        "id": "fff2dec4.2e32c",
        "type": "ui_group",
        "z": "6ad0297f.6ffa38",
        "name": "MQTT Console",
        "tab": "25e048f.3664cb8",
        "order": 1,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "25e048f.3664cb8",
        "type": "ui_tab",
        "z": "",
        "name": "Console Debug",
        "icon": "fa-cogs",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ef3f4541.c58508",
        "type": "ui_group",
        "z": "",
        "name": "Living",
        "tab": "51b6e184.1d1f3",
        "order": 4,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "b5f185cc.f22028",
        "type": "ui_tab",
        "z": "",
        "name": "History of Temp and Humi",
        "icon": "fa-thermometer-half ",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "496f9462.6c414c",
        "type": "ui_group",
        "z": "",
        "name": "Temperatures and Humidity - Berdroom",
        "tab": "b5f185cc.f22028",
        "order": 2,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "e286afa9.932a3",
        "type": "ui_group",
        "z": "",
        "name": "Temperatures and Humidity - Living",
        "tab": "b5f185cc.f22028",
        "order": 3,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "afa3186f.fa8ba8",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "b5f185cc.f22028",
        "order": 4,
        "disp": false,
        "width": "1",
        "collapse": false
    },
    {
        "id": "8e22b30.d90345",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "2d08dc94.1f00a4",
        "order": 4,
        "width": "16",
        "height": 1
    },
    {
        "id": "5fac03aa.0f4d7c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8900533.18083b",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "2689170c.c9be28",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "afa3186f.fa8ba8",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "8310166e.2319d8",
        "type": "ui_group",
        "z": "",
        "name": "TOP BAR",
        "tab": "b5f185cc.f22028",
        "order": 1,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "360cb78b.abc7d8",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "25e048f.3664cb8",
        "order": 2,
        "disp": false,
        "width": "1",
        "collapse": false
    },
    {
        "id": "28080362.c3171c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "360cb78b.abc7d8",
        "order": 7,
        "width": 1,
        "height": 1
    },
    {
        "id": "54023c0f.2fc2f4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8900533.18083b",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "86f52a7f.f70138",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "8900533.18083b",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "d6b17d88.b5a93",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "afa3186f.fa8ba8",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "af3c67b5.f1a4b8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "afa3186f.fa8ba8",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "819f03f0.a2ab4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "360cb78b.abc7d8",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "d9dd8bef.241428",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "360cb78b.abc7d8",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "6f3184a3.20c3bc",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "78bfb712.aec9b8",
        "order": 8,
        "disp": false,
        "width": "1",
        "collapse": false
    },
    {
        "id": "70f24d57.5f1884",
        "type": "ui_tab",
        "z": "",
        "name": "Tasks",
        "icon": "fa-tasks",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "4658668c.a617f8",
        "type": "ui_group",
        "z": "",
        "name": "MENU BAR",
        "tab": "70f24d57.5f1884",
        "order": 5,
        "disp": false,
        "width": "1",
        "collapse": false
    },
    {
        "id": "5f8c12f2.000c0c",
        "type": "ui_group",
        "z": "",
        "name": "Control Temp - Bedroom",
        "tab": "70f24d57.5f1884",
        "order": 1,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "88622e2b.9235f",
        "type": "ui_group",
        "z": "",
        "name": "Control Temp - Living",
        "tab": "70f24d57.5f1884",
        "order": 2,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "ce0116c7.e8d398",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "1e7ea7cf.6ded28",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "e0561305.4222c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "4e710966.2447b8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 4,
        "width": 1,
        "height": 1
    },
    {
        "id": "3966f7ed.5033c8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 12,
        "width": 1,
        "height": 1
    },
    {
        "id": "9caffe89.ea43b",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "4658668c.a617f8",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "50aad7dc.310378",
        "type": "ui_group",
        "z": "",
        "name": "Masterswitches",
        "tab": "78bfb712.aec9b8",
        "order": 1,
        "disp": false,
        "width": 7,
        "collapse": false
    },
    {
        "id": "641fcca0.9ca564",
        "type": "ui_group",
        "z": "",
        "name": "Wind",
        "tab": "78bfb712.aec9b8",
        "order": 6,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "c8152591.b6ffe8",
        "type": "ui_group",
        "z": "",
        "name": "Luftfeuchtigkeit",
        "tab": "78bfb712.aec9b8",
        "order": 2,
        "disp": false,
        "width": 8,
        "collapse": false
    },
    {
        "id": "ba86f22d.5e136",
        "type": "ui_group",
        "z": "",
        "name": "Condition",
        "tab": "78bfb712.aec9b8",
        "order": 5,
        "disp": false,
        "width": 4,
        "collapse": false
    },
    {
        "id": "8a6301f2.577b5",
        "type": "ui_group",
        "z": "",
        "name": "Forecast",
        "tab": "78bfb712.aec9b8",
        "order": 7,
        "disp": false,
        "width": 15,
        "collapse": false
    },
    {
        "id": "78bfb712.aec9b8",
        "type": "ui_tab",
        "z": "",
        "name": "Weather",
        "icon": "fa-thermometer-half",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c86ffc6e.09072",
        "type": "ui_group",
        "z": "",
        "name": "Condition L & H",
        "tab": "78bfb712.aec9b8",
        "order": 4,
        "disp": false,
        "width": 5,
        "collapse": false
    },
    {
        "id": "374bc51f.e9f63a",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "c86ffc6e.09072",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "76b85d3b.cf9844",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "6f3184a3.20c3bc",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "5b930a35.65d2d4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "6f3184a3.20c3bc",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "1a7d3f85.a8844",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "6f3184a3.20c3bc",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "d70df4a5.8022e8",
        "type": "ui_group",
        "z": "",
        "name": "SPACE BAR",
        "tab": "78bfb712.aec9b8",
        "order": 3,
        "disp": false,
        "width": "15",
        "collapse": false
    },
    {
        "id": "c5da922e.7cb7c",
        "type": "ui_group",
        "z": "",
        "name": "Console",
        "tab": "51b6e184.1d1f3",
        "order": 11,
        "disp": false,
        "width": "9",
        "collapse": false
    },
    {
        "id": "6a282893.ee4768",
        "type": "ui_group",
        "z": "",
        "name": "Hitting Status",
        "tab": "51b6e184.1d1f3",
        "order": 10,
        "disp": false,
        "width": 6,
        "collapse": false
    },
    {
        "id": "600616da.f4ffa8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "5acc23d7.e6b3fc",
        "order": 2,
        "width": 7,
        "height": 1
    },
    {
        "id": "cd2467aa.076a18",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "407a1170.873df",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "d6c8daf7.ff3168",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "3674b446.4dbe6c",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "9d87727d.d4983",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "3674b446.4dbe6c",
        "order": 10,
        "width": 1,
        "height": 1
    },
    {
        "id": "da98be7.668a74",
        "type": "ui_group",
        "z": "",
        "name": "Control -  Boiler",
        "tab": "70f24d57.5f1884",
        "order": 3,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "58730f98.18158",
        "type": "ui_group",
        "z": "",
        "name": "Control - Air Cleaning",
        "tab": "70f24d57.5f1884",
        "order": 4,
        "disp": false,
        "width": "7",
        "collapse": false
    },
    {
        "id": "a80667f5.6229c8",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Living - Light",
        "label": "Living",
        "tooltip": "",
        "group": "ef3f4541.c58508",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Living_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-lightbulb-o",
        "offcolor": "white",
        "x": 330,
        "y": 280,
        "wires": [
            [
                "74500096.5e8cd"
            ]
        ]
    },
    {
        "id": "74500096.5e8cd",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Living - Light",
        "topic": "Living_Light",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "9d6b6a82.dd5c38",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Bedroom - Light",
        "label": "Bedroom",
        "tooltip": "",
        "group": "8403d3c3.655c1",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "Bedroom_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-lightbulb-o",
        "offcolor": "white",
        "x": 340,
        "y": 100,
        "wires": [
            [
                "dd7555b1.5380c8"
            ]
        ]
    },
    {
        "id": "67c2951e.8b54cc",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Hall - Light",
        "label": "Hall",
        "tooltip": "",
        "group": "ef61e81e.7cbc68",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Hall_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-lightbulb-o",
        "offcolor": "white",
        "x": 330,
        "y": 160,
        "wires": [
            [
                "cc752767.e866b8"
            ]
        ]
    },
    {
        "id": "a7370cbb.95e5c",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Bathroom Boiler",
        "label": "Boiler",
        "tooltip": "",
        "group": "965ff03b.8457a",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Bathroom_Boiler",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-shower ",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-shower ",
        "offcolor": "white",
        "x": 340,
        "y": 560,
        "wires": [
            [
                "900bd102.874af"
            ]
        ]
    },
    {
        "id": "a2da20c4.bcd84",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Temperature Control - Bedroom",
        "label": "Bedroom Temp Control",
        "tooltip": "",
        "group": "6a282893.ee4768",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "bedroom_heating",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-thermometer-half",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-thermometer-half",
        "offcolor": "white",
        "x": 390,
        "y": 400,
        "wires": [
            [
                "e059bb78.6e6c48"
            ]
        ]
    },
    {
        "id": "dd7555b1.5380c8",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Bedroom - Light",
        "topic": "Bedroom_Light",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 640,
        "y": 100,
        "wires": []
    },
    {
        "id": "cc752767.e866b8",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Hall - Light",
        "topic": "Hall_Light",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 630,
        "y": 160,
        "wires": []
    },
    {
        "id": "900bd102.874af",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Bathroom Boiler",
        "topic": "Bathroom_Boiler",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 640,
        "y": 560,
        "wires": []
    },
    {
        "id": "e059bb78.6e6c48",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Electric Heater Bedroom",
        "topic": "bedroom_heating",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 670,
        "y": 400,
        "wires": []
    },
    {
        "id": "ff556a83.cdb408",
        "type": "inject",
        "z": "a0b52d56.3fdb4",
        "name": "Date&Time",
        "topic": "Date&Time",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 120,
        "y": 160,
        "wires": [
            [
                "3a9da441.6be7ec"
            ]
        ]
    },
    {
        "id": "6911cfcb.ce7c8",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "5acc23d7.e6b3fc",
        "order": 3,
        "width": 5,
        "height": 1,
        "name": "Date",
        "label": "",
        "format": "{{payload | date:\"EEEE dd MMM yyyy\"}}",
        "layout": "row-right",
        "x": 340,
        "y": 160,
        "wires": []
    },
    {
        "id": "3a9da441.6be7ec",
        "type": "change",
        "z": "a0b52d56.3fdb4",
        "name": "FIX Timestamp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$now()",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 80,
        "wires": [
            [
                "6911cfcb.ce7c8"
            ]
        ]
    },
    {
        "id": "a73263e9.d510f",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "5acc23d7.e6b3fc",
        "order": 1,
        "width": 4,
        "height": 1,
        "name": "AIME",
        "label": "<font size=6>A I M E",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 90,
        "y": 90,
        "wires": []
    },
    {
        "id": "422373bf.d7d25c",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "3674b446.4dbe6c",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 160,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "d31f646c.48edd8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "3674b446.4dbe6c",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "73fd51c6.0e202",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "3674b446.4dbe6c",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "dbf0b6f6.49b5a8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "3674b446.4dbe6c",
        "order": 7,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 120,
        "y": 280,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "f1e0f8b3.e8b668",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "3674b446.4dbe6c",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 100,
        "y": 200,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "d1cec49b.5d1658",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "3674b446.4dbe6c",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 80,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "370c2d17.c061e2",
        "type": "ui_button",
        "z": "d56b74d9.9a4a28",
        "name": "Leave the House",
        "group": "48e2cfd.3ae9d3",
        "order": 1,
        "width": 6,
        "height": 2,
        "passthru": false,
        "label": "Leave the house",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-lock",
        "payload": "0",
        "payloadType": "num",
        "topic": "",
        "x": 110,
        "y": 60,
        "wires": [
            [
                "a80667f5.6229c8",
                "67c2951e.8b54cc",
                "9d6b6a82.dd5c38",
                "a7370cbb.95e5c",
                "a2da20c4.bcd84",
                "6c047539.e0ca6c",
                "a2eafb03.e99488"
            ]
        ]
    },
    {
        "id": "fbbb5ea6.71d0c",
        "type": "inject",
        "z": "a0b52d56.3fdb4",
        "name": "Refresh Timer",
        "topic": "",
        "payload": "15",
        "payloadType": "num",
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 360,
        "wires": [
            [
                "7c681546.8fcfac",
                "2e8c6bc0.b91884"
            ]
        ]
    },
    {
        "id": "7c681546.8fcfac",
        "type": "openweathermap",
        "z": "a0b52d56.3fdb4",
        "name": "Weather API",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 140,
        "y": 430,
        "wires": [
            [
                "fcb292f6.c6833",
                "16691a4.12c24e6"
            ]
        ]
    },
    {
        "id": "fcb292f6.c6833",
        "type": "function",
        "z": "a0b52d56.3fdb4",
        "name": "Get",
        "func": "var msg1 = { payload:msg.payload.temp_maxc };\nvar msg2 = { payload:msg.payload.tempc };\nvar msg3 = { payload:msg.payload.temp_minc };\nvar msg4 = { payload:msg.payload.description};\nvar msg5 = { payload:msg.payload.icon};\nvar msg6 = { payload:msg.payload.detail};\n\nreturn [ msg1, msg2, msg3, msg4, msg5, msg6 ];",
        "outputs": 6,
        "noerr": 0,
        "x": 120,
        "y": 510,
        "wires": [
            [
                "ac7027ec.1d6858"
            ],
            [
                "d6b50b4a.75e388"
            ],
            [
                "f6120f19.b82bd"
            ],
            [],
            [
                "8f21ec20.6736"
            ],
            [
                "d0b90915.e560c8"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min",
            "Description",
            "Weather icon",
            ""
        ]
    },
    {
        "id": "8f21ec20.6736",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "Weather icon",
        "order": 1,
        "width": 3,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 420,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "d6b50b4a.75e388",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Temp °C",
        "label": "",
        "format": "<font size=6>{{msg.payload.toFixed(0)}}°",
        "layout": "col-center",
        "x": 410,
        "y": 470,
        "wires": []
    },
    {
        "id": "ac7027ec.1d6858",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "order": 6,
        "width": 1,
        "height": 1,
        "name": "Max °C",
        "label": "<font size=3>H",
        "format": "<font size=3>{{msg.payload.toFixed(0)}}°",
        "layout": "row-right",
        "x": 410,
        "y": 430,
        "wires": []
    },
    {
        "id": "f6120f19.b82bd",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "order": 4,
        "width": 1,
        "height": 1,
        "name": "Min °C",
        "label": "<font size=3>L",
        "format": "<font size=3>{{msg.payload.toFixed(0)}}°",
        "layout": "row-right",
        "x": 410,
        "y": 520,
        "wires": []
    },
    {
        "id": "d0b90915.e560c8",
        "type": "ui_text",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "Weather detail",
        "label": "",
        "format": "{{msg.payload | uppercase}}",
        "layout": "col-center",
        "x": 430,
        "y": 600,
        "wires": []
    },
    {
        "id": "bbc03d3b.1a906",
        "type": "comment",
        "z": "a0b52d56.3fdb4",
        "name": "Weather",
        "info": "",
        "x": 60,
        "y": 320,
        "wires": []
    },
    {
        "id": "9a518de2.b6c72",
        "type": "comment",
        "z": "a0b52d56.3fdb4",
        "name": "Time & Date",
        "info": "",
        "x": 70,
        "y": 30,
        "wires": []
    },
    {
        "id": "38a6b833.358948",
        "type": "ui_template",
        "z": "1969df99.29018",
        "group": "57e4948c.f8f48c",
        "name": "Camera_Moto_Min_D",
        "order": 1,
        "width": 6,
        "height": 3,
        "format": "<img src=\"{{ msg.payload }}\">",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "templateScope": "local",
        "x": 1260,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "ea6f0e91.46655",
        "type": "ui_template",
        "z": "1969df99.29018",
        "group": "d733db47.2cd7e8",
        "name": "Camera_Moto",
        "order": 1,
        "width": 15,
        "height": 9,
        "format": "<p>CAMERA MOTO</p>\n<img src=\"{{ msg.payload }}\">",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1240,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "588ec139.402e3",
        "type": "ONVIF Snapshot",
        "z": "1969df99.29018",
        "name": "Camera Moto",
        "url": "http://192.168.0.110/onvif/device_service",
        "interval": "5",
        "username": "aime",
        "password": "224291",
        "active": true,
        "x": 1030,
        "y": 80,
        "wires": [
            [
                "38a6b833.358948",
                "ea6f0e91.46655"
            ]
        ]
    },
    {
        "id": "1ce15cc.13031a3",
        "type": "comment",
        "z": "1969df99.29018",
        "name": "Menu",
        "info": "",
        "x": 50,
        "y": 30,
        "wires": []
    },
    {
        "id": "2e33d8ef.b80d98",
        "type": "comment",
        "z": "1969df99.29018",
        "name": "Cameras",
        "info": "",
        "x": 1010,
        "y": 30,
        "wires": []
    },
    {
        "id": "2e8c6bc0.b91884",
        "type": "openweathermap",
        "z": "a0b52d56.3fdb4",
        "name": "Weather API - 5 Day",
        "wtype": "forecast",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 360,
        "y": 360,
        "wires": [
            [
                "2bf01f0c.c5ef7"
            ]
        ]
    },
    {
        "id": "2bf01f0c.c5ef7",
        "type": "function",
        "z": "a0b52d56.3fdb4",
        "name": "Get 5 day weather",
        "func": "var msg1 = { payload:msg.payload[0].weather[0].icon};\nvar msg2 = { payload:msg.payload[0].dt};\nvar msg3 = { payload:msg.payload[4].weather[0].icon};\nvar msg4 = { payload:msg.payload[4].dt};\nvar msg5 = { payload:msg.payload[12].weather[0].icon};\nvar msg6 = { payload:msg.payload[12].dt};\nvar msg7 = { payload:msg.payload[20].weather[0].icon};\nvar msg8 = { payload:msg.payload[20].dt};\nvar msg9 = { payload:msg.payload[28].weather[0].icon};\nvar msg10 = { payload:msg.payload[28].dt};\nvar msg11 = { payload:msg.payload[36].weather[0].icon};\nvar msg12 = { payload:msg.payload[36].dt};\n\nreturn [ msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10, msg11, msg12 ];",
        "outputs": 12,
        "noerr": 0,
        "x": 650,
        "y": 500,
        "wires": [
            [
                "354b4861.393178"
            ],
            [],
            [
                "3d0a2e48.25e2c2"
            ],
            [],
            [
                "f9f56de3.6e2a6"
            ],
            [],
            [
                "9f1b0cb8.293f9"
            ],
            [],
            [
                "7a999039.74eae"
            ],
            [],
            [
                "67e2a705.58aff8"
            ],
            []
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min",
            "Description",
            "Weather icon",
            "",
            "",
            "",
            "",
            "",
            "",
            ""
        ]
    },
    {
        "id": "354b4861.393178",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 1",
        "order": 7,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "3d0a2e48.25e2c2",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 2",
        "order": 8,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "f9f56de3.6e2a6",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 3",
        "order": 9,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "9f1b0cb8.293f9",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 4",
        "order": 10,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "7a999039.74eae",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 5",
        "order": 11,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "67e2a705.58aff8",
        "type": "ui_template",
        "z": "a0b52d56.3fdb4",
        "group": "407a1170.873df",
        "name": "WFc Icon 6",
        "order": 12,
        "width": 1,
        "height": 1,
        "format": "<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-owm-{{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 850,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "c762924c.3dc6b",
        "type": "ui_chart",
        "z": "18fa541a.7c5fcc",
        "name": "Temp & Humi - Living",
        "group": "e286afa9.932a3",
        "order": 1,
        "width": 15,
        "height": 4,
        "label": "Living",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 760,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "8c1fb294.0a76d",
        "type": "ui_ui_control",
        "z": "1969df99.29018",
        "name": "",
        "events": "all",
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "f9eb803b.aabbd",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "8900533.18083b",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 500,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "e567e536.1c15b8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "8900533.18083b",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 460,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "11fda61b.d19d2a",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "8900533.18083b",
        "order": 7,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 110,
        "y": 580,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "4bd9277f.3a6308",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "8900533.18083b",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 120,
        "y": 620,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "3e8302ca.10da4e",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "8900533.18083b",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 100,
        "y": 540,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "200fe075.c53a7",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "8900533.18083b",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 90,
        "y": 420,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "16691a4.12c24e6",
        "type": "debug",
        "z": "a0b52d56.3fdb4",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 840,
        "y": 340,
        "wires": []
    },
    {
        "id": "364c9eb.0337462",
        "type": "mqtt in",
        "z": "18fa541a.7c5fcc",
        "name": "Bedroom Temp",
        "topic": "Bedroom_Temp",
        "qos": "2",
        "datatype": "json",
        "broker": "645444fb.b5d87c",
        "x": 100,
        "y": 120,
        "wires": [
            [
                "6476d333.821d7c",
                "dcbd0e7f.ccde1"
            ]
        ]
    },
    {
        "id": "699d58db.b2bab8",
        "type": "debug",
        "z": "18fa541a.7c5fcc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 290,
        "y": 340,
        "wires": []
    },
    {
        "id": "7581189f.1be378",
        "type": "mqtt in",
        "z": "18fa541a.7c5fcc",
        "name": "Living Temp",
        "topic": "Living_Temp",
        "qos": "2",
        "datatype": "json",
        "broker": "645444fb.b5d87c",
        "x": 90,
        "y": 380,
        "wires": [
            [
                "820c6a9b.7be828",
                "699d58db.b2bab8"
            ]
        ]
    },
    {
        "id": "820c6a9b.7be828",
        "type": "function",
        "z": "18fa541a.7c5fcc",
        "name": "Get values and calibration",
        "func": "var msg1 = {};\nmsg1.payload = msg.payload.Temp - 5; // - 5 degrees\nmsg1.topic = 'Temperature';\n\nvar msg2 = {};\nmsg2.payload = msg.payload.Humi + 15; // + 15 percent\nmsg2.topic = 'Humidity';\n\nreturn [ msg1, msg2 ];",
        "outputs": 2,
        "noerr": 0,
        "x": 330,
        "y": 380,
        "wires": [
            [
                "a4dcc058.a0314",
                "dba0f772.79b418",
                "40ef5de4.133024"
            ],
            [
                "705fb6f5.2fca98",
                "616dbb04.e235d4"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp"
        ]
    },
    {
        "id": "ac8854e4.60ba98",
        "type": "comment",
        "z": "d56b74d9.9a4a28",
        "name": "Relay",
        "info": "Example Flow Relay",
        "x": 70,
        "y": 20,
        "wires": []
    },
    {
        "id": "6c047539.e0ca6c",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Kitchen - Light",
        "label": "Kitchen",
        "tooltip": "",
        "group": "64b30620.3d5d88",
        "order": 1,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "Kitchen_Light",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-lightbulb-o",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-lightbulb-o",
        "offcolor": "white",
        "x": 340,
        "y": 220,
        "wires": [
            [
                "7e7888f0.156128"
            ]
        ]
    },
    {
        "id": "7e7888f0.156128",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Kitchen - Light",
        "topic": "Kitchen_Light",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 640,
        "y": 220,
        "wires": []
    },
    {
        "id": "a2eafb03.e99488",
        "type": "ui_switch",
        "z": "d56b74d9.9a4a28",
        "name": "Temperature Control - Living",
        "label": "Living Temp Control",
        "tooltip": "",
        "group": "6a282893.ee4768",
        "order": 2,
        "width": 3,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "living_room_heating",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "fa-2x fa-thermometer-half ",
        "oncolor": "green",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "fa-2x fa-thermometer-half ",
        "offcolor": "white",
        "x": 380,
        "y": 480,
        "wires": [
            [
                "9098f33.c89c31"
            ]
        ]
    },
    {
        "id": "9098f33.c89c31",
        "type": "mqtt out",
        "z": "d56b74d9.9a4a28",
        "name": "Electric Heater Living",
        "topic": "living_room_heating",
        "qos": "0",
        "retain": "true",
        "broker": "645444fb.b5d87c",
        "x": 660,
        "y": 480,
        "wires": []
    },
    {
        "id": "35d4ca33.8e5f46",
        "type": "debug",
        "z": "d56b74d9.9a4a28",
        "name": "Debug Console",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1220,
        "y": 40,
        "wires": []
    },
    {
        "id": "9b95e4c8.357988",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Bedroom - Light",
        "topic": "living_room_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1160,
        "y": 100,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "ece2a245.f25b9",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Hall - Light",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1170,
        "y": 160,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "481348d1.dcae28",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Kitchen - Light",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1160,
        "y": 220,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "a46b3a76.dcb098",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Living - Light",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1170,
        "y": 280,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "322b22f5.c891fe",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Electric Heater Bedroom",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1170,
        "y": 400,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "657ccf77.70443",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Electric Heater Living",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1160,
        "y": 500,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "a1e5aded.c2f2",
        "type": "mqtt in",
        "z": "d56b74d9.9a4a28",
        "name": "Debug MQTT Bathroom Boiler",
        "topic": "bedroom_heating",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 1140,
        "y": 560,
        "wires": [
            [
                "35d4ca33.8e5f46"
            ]
        ]
    },
    {
        "id": "8a25543e.85acf8",
        "type": "mqtt in",
        "z": "6ad0297f.6ffa38",
        "name": "",
        "topic": "#",
        "qos": "2",
        "datatype": "auto",
        "broker": "645444fb.b5d87c",
        "x": 70,
        "y": 80,
        "wires": [
            [
                "bfee6d94.b3ccd",
                "18e2425b.39e02e"
            ]
        ]
    },
    {
        "id": "bfee6d94.b3ccd",
        "type": "debug",
        "z": "6ad0297f.6ffa38",
        "name": "MQTT # RAW",
        "active": false,
        "console": "false",
        "complete": "payload",
        "x": 680,
        "y": 80,
        "wires": []
    },
    {
        "id": "18e2425b.39e02e",
        "type": "function",
        "z": "6ad0297f.6ffa38",
        "name": "Store and shift msg",
        "func": "// initialise the counter to 0 if it doesn't exist already\nvar text = context.get('text')|| [];\n\ntext.push(msg);\nif (text.length > 20){\n    text.shift();\n    text.length = 20;\n} \n\n// store the value back\ncontext.set('text',text);\n// make it part of the outgoing msg object\nmsg = {};\nmsg.payload = text;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 140,
        "wires": [
            [
                "2fe09b12.a9ee14",
                "f6026782.0b4818",
                "ed84747d.c38168"
            ]
        ]
    },
    {
        "id": "2fe09b12.a9ee14",
        "type": "debug",
        "z": "6ad0297f.6ffa38",
        "name": "mqtt array",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 660,
        "y": 200,
        "wires": []
    },
    {
        "id": "f6026782.0b4818",
        "type": "ui_template",
        "z": "6ad0297f.6ffa38",
        "group": "fff2dec4.2e32c",
        "name": "MQTT Output Debug",
        "order": 1,
        "width": 15,
        "height": 9,
        "format": "<script>\nvar dt = new Date();\ndocument.getElementById(\"datetime\").innerHTML = ((\"0\"+dt.getDate()).slice(-2)) +\".\"+ ((\"0\"+(dt.getMonth()+1)).slice(-2)) +\".\"+ (dt.getFullYear()) +\" \"+ ((\"0\"+dt.getHours()).slice(-2)) +\":\"+ ((\"0\"+dt.getMinutes()).slice(-2));\n</script>\n\n<ul>\n <li ng-repeat=\"x in msg.payload\">\n     <p>Date/Time: <span id=\"datetime\"></span></p>\n        <font color=\"red\">{{x.topic}}\n        </font>\n        <ul>\n            <li>{{x.payload}}</li>\n        </ul>\n </li>\n</ul>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 700,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "bc60078d.b72e58",
        "type": "comment",
        "z": "6ad0297f.6ffa38",
        "name": "MQTT Console",
        "info": "This flow demonstrates how to view MQTT data\n\nIt is also a nice demonstration how you can\nuse an array to shift data into the UI template\n\n\nUI Viewable:\nhttp://localhost:1880/ui\n\nWritten by\nCory Guynn\n2016\nwww.InternetOfLEG0.com",
        "x": 100,
        "y": 40,
        "wires": []
    },
    {
        "id": "dc3fc83d.9b11c8",
        "type": "comment",
        "z": "18fa541a.7c5fcc",
        "name": "Temperature & Humidity",
        "info": "Monitor Temperature&Humidity",
        "x": 120,
        "y": 40,
        "wires": []
    },
    {
        "id": "6476d333.821d7c",
        "type": "function",
        "z": "18fa541a.7c5fcc",
        "name": "Get values and calibration",
        "func": "var msg1 = {};\nmsg1.payload = msg.payload.Temp - 5; // - 5 degrees\nmsg1.topic = 'Temperature';\n\nvar msg2 = {};\nmsg2.payload = msg.payload.Humi + 15; // + 15 percent\nmsg2.topic = 'Humidity';\n\nreturn [ msg1, msg2 ];",
        "outputs": 2,
        "noerr": 0,
        "x": 330,
        "y": 120,
        "wires": [
            [
                "7add67ae.abad28",
                "e53fcf1a.1ae42",
                "cd46a0a4.4475"
            ],
            [
                "c676abca.2fa5a8",
                "ed0bbda4.5d581"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp"
        ]
    },
    {
        "id": "10c7775e.8db8a9",
        "type": "ui_chart",
        "z": "18fa541a.7c5fcc",
        "name": "Temp & Humi - Bedroom",
        "group": "496f9462.6c414c",
        "order": 1,
        "width": 15,
        "height": 4,
        "label": "Bedroom",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "useOldStyle": false,
        "outputs": 1,
        "x": 770,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "7add67ae.abad28",
        "type": "ui_gauge",
        "z": "18fa541a.7c5fcc",
        "name": "Temp - Bedroom",
        "group": "8403d3c3.655c1",
        "order": 1,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "",
        "label": "°C",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#0080ff",
            "#00aa00",
            "#ca3838"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 620,
        "y": 60,
        "wires": []
    },
    {
        "id": "a4dcc058.a0314",
        "type": "ui_gauge",
        "z": "18fa541a.7c5fcc",
        "name": "Temp - Living",
        "group": "ef3f4541.c58508",
        "order": 1,
        "width": 3,
        "height": 2,
        "gtype": "gage",
        "title": "",
        "label": "°C",
        "format": "{{value}}",
        "min": "0",
        "max": "50",
        "colors": [
            "#0080ff",
            "#00aa00",
            "#ca3838"
        ],
        "seg1": "20",
        "seg2": "30",
        "x": 610,
        "y": 420,
        "wires": []
    },
    {
        "id": "dfc993af.e0017",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "afa3186f.fa8ba8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 430,
        "y": 500,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "d6538e13.dfd46",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "afa3186f.fa8ba8",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 410,
        "y": 460,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "e64b8fdf.bce1a",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "afa3186f.fa8ba8",
        "order": 7,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 430,
        "y": 580,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "b0601301.3fb5e",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "afa3186f.fa8ba8",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 440,
        "y": 620,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "7651d041.7e7d7",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "afa3186f.fa8ba8",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 420,
        "y": 540,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "1504ef09.969e41",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "afa3186f.fa8ba8",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 410,
        "y": 420,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "88a481b9.c8b0a",
        "type": "ui_text",
        "z": "18fa541a.7c5fcc",
        "group": "8310166e.2319d8",
        "order": 1,
        "width": "15",
        "height": 1,
        "name": "Title Historical Temp & Humi",
        "label": "<font size=3>HISTORICAL TEMPERATURES AND HUMIDITY FOR THE LAST 24 HOUS",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 780,
        "y": 260,
        "wires": []
    },
    {
        "id": "c9abcba7.b8c5a8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "360cb78b.abc7d8",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 730,
        "y": 500,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "2d827ae8.be3ae6",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "360cb78b.abc7d8",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 710,
        "y": 460,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "1c303df1.17cd12",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "360cb78b.abc7d8",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 730,
        "y": 580,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "38490a14.be62a6",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "360cb78b.abc7d8",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 740,
        "y": 620,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "ffb01bb7.92cca8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "360cb78b.abc7d8",
        "order": 5,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 720,
        "y": 540,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "acbf4e48.e066a",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "360cb78b.abc7d8",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 710,
        "y": 420,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "3807b78e.8cb288",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "6f3184a3.20c3bc",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1010,
        "y": 500,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "a243bc30.6341b",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "6f3184a3.20c3bc",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 990,
        "y": 460,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "2057c375.06b3bc",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "6f3184a3.20c3bc",
        "order": 7,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1010,
        "y": 580,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "ef4bd0da.d0916",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "6f3184a3.20c3bc",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1020,
        "y": 620,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "eeb6384.df43cc8",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "6f3184a3.20c3bc",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1000,
        "y": 540,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "cf82745c.75ed28",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "6f3184a3.20c3bc",
        "order": 2,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 990,
        "y": 420,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "ba48ed96.2ce0c",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Temps Home",
        "group": "4658668c.a617f8",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-thermometer-half ",
        "payload": "{\"tab\":\"History of Temp and Humi\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1270,
        "y": 500,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "e719b15a.fe89a",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Tasks",
        "group": "4658668c.a617f8",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-tasks",
        "payload": "{\"tab\":\"Tasks\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1250,
        "y": 460,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "11e2969a.55e6e9",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Cam Moto",
        "group": "4658668c.a617f8",
        "order": 9,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-motorcycle",
        "payload": "{\"tab\":\"Camera Moto\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1270,
        "y": 580,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "3d8bd597.a3867a",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Console Debug",
        "group": "4658668c.a617f8",
        "order": 10,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-cogs",
        "payload": "{\"tab\":\"Console Debug\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1280,
        "y": 620,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "93214f7e.fd134",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Weather",
        "group": "4658668c.a617f8",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-sun-o",
        "payload": "{\"tab\":\"Weather\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1260,
        "y": 540,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "1d6e9168.6b4b5f",
        "type": "ui_button",
        "z": "1969df99.29018",
        "name": "Home",
        "group": "4658668c.a617f8",
        "order": 3,
        "width": 1,
        "height": 1,
        "passthru": false,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#333333",
        "icon": "fa-2x fa-home ",
        "payload": "{\"tab\":\"AIME - Smart Home\"}",
        "payloadType": "json",
        "topic": "",
        "x": 1250,
        "y": 420,
        "wires": [
            [
                "8c1fb294.0a76d"
            ]
        ]
    },
    {
        "id": "77651d25.cf7df4",
        "type": "ui_template",
        "z": "1b4862bf.e3a47d",
        "group": "5f8c12f2.000c0c",
        "name": "css etc",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<style>\n\n.filled { height: 48px !important;padding: 0 !important; margin: 0 !important;}\n.nr-dashboard-template { padding: 0; margin: 0;}\n.rounded { border-radius: 12px 12px 12px 12px;}\n.bigfont { font-size: 18px;}\n.smallfont { font-size: 12px;}\n.thedays { cursor:pointer; vertical-align:bottom; height:48px; }\n.the2px  { background-color: #9E9E9E; height:2px; }\n.theblocks {width:100%; height:0%; background-color:#4CAF50; }\n.greybuttons { background-color:#009688 !important; width:48px; border: none;}\n.thetemps { cursor:pointer; font-size:70%; color:#9E9E9E !important; }\n.smallheadings { color:white; font-size:80%; }\n\n</style>\n\n<script>\nvar current=1;\n\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),50);\n    navigator.vibrate(80);\n    });\n    \n</script>",
        "storeOutMessages": false,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 1320,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "932b89fe.7a5548",
        "type": "ui_template",
        "z": "1b4862bf.e3a47d",
        "group": "5f8c12f2.000c0c",
        "name": "Settings page",
        "order": 2,
        "width": 7,
        "height": 6,
        "format": "<script>\nvar thedays=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID = \"AA\";\n\nvar last=29;\n\nfunction bar(mm,val)\n{\nif (val==14) { $(mm).height(\"12%\"); $(mm).css('background-color', '#1E88E5'); } //blue\nif (val==15) { $(mm).height(\"16%\"); $(mm).css('background-color', '#039BE5'); }\nif (val==16) { $(mm).height(\"20%\"); $(mm).css('background-color', '#00ACC1'); } \nif (val==17) { $(mm).height(\"24%\"); $(mm).css('background-color', '#039BE5'); } // cyan\nif (val==18) { $(mm).height(\"28%\"); $(mm).css('background-color', '#00ACC1'); }\nif (val==19) { $(mm).height(\"32%\"); $(mm).css('background-color', '#00897B'); } \nif (val==20) { $(mm).height(\"36%\"); $(mm).css('background-color', '#388E3C'); } // green\nif (val==21) { $(mm).height(\"40%\"); $(mm).css('background-color', '#689F38'); }\nif (val==22) { $(mm).height(\"44%\"); $(mm).css('background-color', '#C0CA33'); }\nif (val==23) { $(mm).height(\"48%\"); $(mm).css('background-color', '#FDD835'); } // yellow\nif (val==24) { $(mm).height(\"52%\"); $(mm).css('background-color', '#FBC02D'); }\nif (val==25) { $(mm).height(\"56%\"); $(mm).css('background-color', '#FFA000'); }\nif (val==26) { $(mm).height(\"60%\"); $(mm).css('background-color','#E64A19'); } // red\n    \n}\n\nfunction stat(text)\n{\n$(\"#info\"+ID).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec(val,sta)\n{\nvar w=\"#td\"+val+ID;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n    (function(scope){\n        scope.ID = ID;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec(last,0); last=msg.selector; selec(last,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID; bar(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID; $(v).text(msg.timing[((msg.days-1)*24)+x]+\"°\")\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID).text(thedays[msg.days-1]);\n             if ((last>4) &&(last<29))\n                 $(\"#current\"+ID).text(msg.timing[((msg.days-1)*24)+last-5] + \"°\");\n             else\n                 $(\"#current\"+ID).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { stat(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >BEDROOM TEMPERATURE</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\">\n                    <md-tooltip md-direction=\"bottom\">DECREASE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\">\n                    <md-tooltip md-direction=\"bottom\">INCREASES</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 180,
        "y": 117,
        "wires": [
            [
                "f8e95039.56847"
            ]
        ]
    },
    {
        "id": "f8e95039.56847",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process controls",
        "func": "if ( typeof context.days == 'undefined' ) context.days=1;\nif ( typeof context.selector == 'undefined' ) context.selector=29;\nif ( typeof context.saving == 'undefined' ) context.saving=1;\nif ( typeof context.global.timing == 'undefined' ) \n    {\n        context.global.timing=[\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        6,14\n                        ];\n        context.saving=1;                    \n    }\nvar timing=global.get(\"timing\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector>4)&&(context.selector<29))\n                {\n                    timing[((context.days-1)*24)+context.selector-5]++; \n                    if (timing[((context.days-1)*24)+context.selector-5]>26){ timing[((context.days-1)*24)+context.selector-5]=26; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Temperature raised\";\n                }\n                if (context.selector==1) { if (timing[168+(context.selector-1)]<26) {  timing[168+(context.selector-1)]++; msg.foryou=\"Climate temperature increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==2) { if (timing[168+(context.selector-1)]<26) {  timing[168+(context.selector-1)]++; msg.foryou=\"Temperature away from home increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==29) { msg.foryou=\"Next day\"; context.days++; if (context.days>7) { context.days = 1; } }\n                break;\n    case \"d\" :  if ((context.selector>4)&&(context.selector<29))\n                {\n                    timing[((context.days-1)*24)+context.selector-5]--; \n                    if (timing[((context.days-1)*24)+context.selector-5]<14){ timing[((context.days-1)*24)+context.selector-5]=14; msg.foryou=\"Limite raggiunto\";}\n                    else msg.foryou=\"Decreased temperature\";\n                }\n                if (context.selector==1) { if (timing[168+(context.selector-1)]>12) { timing[168+(context.selector-1)]--; msg.foryou=\"Climate temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==2) { if (timing[168+(context.selector-1)]>12) { timing[168+(context.selector-1)]--; msg.foryou=\"Away temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector==29) {  msg.foryou=\"Previous day\";  context.days--; if (context.days < 1) { context.days = 7;  } }\n                break;\n    case 'r' :  if ((context.selector>=5)&&(context.selector<28))\n                        {\n                         timing[((context.days-1)*24)+context.selector-4]=timing[((context.days-1)*24)+context.selector-5];   \n                         context.selector++;\n                         msg.foryou=\"Temperature copied to the next slot\";\n                        }\n                if ((context.selector==29)&&(context.days<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing[((context.days)*24)+a]=timing[((context.days-1)*24)+a];   \n                            }\n                         context.days++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector=parseInt(msg.payload);\n               if (msg.payload=='1') msg.foryou=\"Selected climate temperature\"; \n               else if (msg.payload=='2') msg.foryou=\"Temperature away from home selected\";\n               else if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Hours temperature adjustment: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures;\nmsg.timing=timing;\nmsg.days=context.days;\nmsg.selector=context.selector;\n\nnode.send([msg,null,null]);\n\nif (context.saving===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing);\n        node.send([null,msg,null]); \n        context.saving=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 400,
        "y": 160,
        "wires": [
            [
                "51d05ef1.c3486"
            ],
            [
                "2818d715.5f4408"
            ],
            [
                "8e6db889.d775e8"
            ]
        ]
    },
    {
        "id": "223d3694.dd77da",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 188,
        "y": 217,
        "wires": [
            [
                "f8e95039.56847",
                "d5208e76.264a7"
            ]
        ]
    },
    {
        "id": "659eb37f.2fd2ac",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 180,
        "y": 320,
        "wires": [
            [
                "6a5f05a0.15db1c"
            ]
        ]
    },
    {
        "id": "c7c59b01.04b4a8",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text:\"Set point \" + msg.payload + \"°C\"});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 320,
        "wires": [
            [
                "fdee1057.3367b",
                "1e26efc4.a53bf"
            ]
        ]
    },
    {
        "id": "2818d715.5f4408",
        "type": "file",
        "z": "1b4862bf.e3a47d",
        "name": "backup",
        "filename": "/home/aime/aime_data/thermo_scheduler_bedroom.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 600,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d5208e76.264a7",
        "type": "file in",
        "z": "1b4862bf.e3a47d",
        "name": "Restore",
        "filename": "/home/aime/aime_data/thermo_scheduler_bedroom.log",
        "format": "utf8",
        "x": 380,
        "y": 240,
        "wires": [
            [
                "3565ffd.d99a"
            ]
        ]
    },
    {
        "id": "3565ffd.d99a",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Restore data from SERVER",
        "func": "context.global.timing=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 240,
        "wires": [
            [
                "e0dc834e.8dde1"
            ]
        ]
    },
    {
        "id": "fdee1057.3367b",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 730,
        "y": 340,
        "wires": []
    },
    {
        "id": "e345eeaf.f5c8c",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "8e6db889.d775e8"
        ],
        "x": 241.5,
        "y": 268,
        "wires": [
            [
                "d5208e76.264a7"
            ]
        ]
    },
    {
        "id": "8e6db889.d775e8",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "e345eeaf.f5c8c"
        ],
        "x": 555,
        "y": 200,
        "wires": []
    },
    {
        "id": "c9864549.92c568",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "e0dc834e.8dde1"
        ],
        "x": 235,
        "y": 160,
        "wires": [
            [
                "f8e95039.56847"
            ]
        ]
    },
    {
        "id": "e0dc834e.8dde1",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "c9864549.92c568"
        ],
        "x": 755,
        "y": 240,
        "wires": []
    },
    {
        "id": "51d05ef1.c3486",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "f44f148a.92d428"
        ],
        "x": 555,
        "y": 120,
        "wires": []
    },
    {
        "id": "f44f148a.92d428",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "51d05ef1.c3486"
        ],
        "x": 115,
        "y": 160,
        "wires": [
            [
                "932b89fe.7a5548"
            ]
        ]
    },
    {
        "id": "6b6f33eb.936c9c",
        "type": "ui_template",
        "z": "1b4862bf.e3a47d",
        "group": "88622e2b.9235f",
        "name": "Settings page",
        "order": 1,
        "width": 7,
        "height": 6,
        "format": "<script>\n\nvar thedays1=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_1 = \"DD\";\n\nvar last_1=29;\n\nfunction bar(mm,val)\n{\nif (val==14) { $(mm).height(\"12%\"); $(mm).css('background-color', '#1E88E5'); } //blue\nif (val==15) { $(mm).height(\"16%\"); $(mm).css('background-color', '#039BE5'); }\nif (val==16) { $(mm).height(\"20%\"); $(mm).css('background-color', '#00ACC1'); } \nif (val==17) { $(mm).height(\"24%\"); $(mm).css('background-color', '#039BE5'); } // cyan\nif (val==18) { $(mm).height(\"28%\"); $(mm).css('background-color', '#00ACC1'); }\nif (val==19) { $(mm).height(\"32%\"); $(mm).css('background-color', '#00897B'); } \nif (val==20) { $(mm).height(\"36%\"); $(mm).css('background-color', '#388E3C'); } // green\nif (val==21) { $(mm).height(\"40%\"); $(mm).css('background-color', '#689F38'); }\nif (val==22) { $(mm).height(\"44%\"); $(mm).css('background-color', '#C0CA33'); }\nif (val==23) { $(mm).height(\"48%\"); $(mm).css('background-color', '#FDD835'); } // yellow\nif (val==24) { $(mm).height(\"52%\"); $(mm).css('background-color', '#FBC02D'); }\nif (val==25) { $(mm).height(\"56%\"); $(mm).css('background-color', '#FFA000'); }\nif (val==26) { $(mm).height(\"60%\"); $(mm).css('background-color', '#E64A19'); } // red\n}\n\nfunction stat_1(text)\n{\n$(\"#info\"+ID_1).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_1).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_1(val,sta)\n{\nvar w=\"#td\"+val+ID_1;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_1 = ID_1;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_1(last_1,0); last_1=msg.selector; selec_1(last_1,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_1; bar(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_1; $(v).text(msg.timing[((msg.days-1)*24)+x]+\"°\")\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_1; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_1).text(thedays1[msg.days-1]);\n             if ((last_1>4) &&(last_1<29))\n                 $(\"#current\"+ID_1).text(msg.timing[((msg.days-1)*24)+last_1-5] + \"°\");\n             else\n                 $(\"#current\"+ID_1).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { stat_1(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >LIVING TEMPERATURE</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_1 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_1 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_1 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_1 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_1 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_1 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_1 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_1 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_1 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_1 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\">\n                    <md-tooltip md-direction=\"bottom\">DECREASE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_1 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\">\n                    <md-tooltip md-direction=\"bottom\">INCREASES</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 180,
        "y": 720,
        "wires": [
            [
                "ce6c5d9e.ea6a7"
            ]
        ]
    },
    {
        "id": "ce6c5d9e.ea6a7",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process controls",
        "func": "if ( typeof context.days_1 == 'undefined' ) context.days_1=1;\nif ( typeof context.selector_1 == 'undefined' ) context.selector_1=29;\nif ( typeof context.saving_1 == 'undefined' ) context.saving_1=1;\nif ( typeof context.global.timing_1 == 'undefined' ) \n    {\n        context.global.timing_1=[\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,\n                        6,14\n                        ];\n        context.saving_1=1;                    \n    }\nvar timing_1=global.get(\"timing_1\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_1>4)&&(context.selector_1<29))\n                {\n                    timing_1[((context.days_1-1)*24)+context.selector_1-5]++; \n                    if (timing_1[((context.days_1-1)*24)+context.selector_1-5]>26){ timing_1[((context.days_1-1)*24)+context.selector_1-5]=26; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Temperature raised\";\n                }\n                if (context.selector_1==1) { if (timing_1[168+(context.selector_1-1)]<26) {  timing_1[168+(context.selector_1-1)]++; msg.foryou=\"Climate temperature increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==2) { if (timing_1[168+(context.selector_1-1)]<26) {  timing_1[168+(context.selector_1-1)]++; msg.foryou=\"Temperature away from home increased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==29) { msg.foryou=\"Next day\"; context.days_1++; if (context.days_1>7) { context.days_1 = 1; } }\n                break;\n    case \"d\" :  if ((context.selector_1>4)&&(context.selector_1<29))\n                {\n                    timing_1[((context.days_1-1)*24)+context.selector_1-5]--; \n                    if (timing_1[((context.days_1-1)*24)+context.selector_1-5]<14){ timing_1[((context.days_1-1)*24)+context.selector_1-5]=14; msg.foryou=\"Limit reached\";}\n                    else msg.foryou=\"Decreased temperature\";\n                }\n                if (context.selector_1==1) { if (timing_1[168+(context.selector_1-1)]>12) { timing_1[168+(context.selector_1-1)]--; msg.foryou=\"Climate temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==2) { if (timing_1[168+(context.selector_1-1)]>12) { timing_1[168+(context.selector_1-1)]--; msg.foryou=\"Away temperature decreased by 1 ° C\"; } else msg.foryou=\"Limit reached\"; }\n                if (context.selector_1==29) {  msg.foryou=\"Previous day\";  context.days_1--; if (context.days_1 < 1) { context.days_1 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_1>=5)&&(context.selector_1<28))\n                        {\n                         timing_1[((context.days_1-1)*24)+context.selector_1-4]=timing_1[((context.days_1-1)*24)+context.selector_1-5];   \n                         context.selector_1++;\n                         msg.foryou=\"Temperature copied to the next slot\";\n                        }\n                if ((context.selector_1==29)&&(context.days_1<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_1[((context.days_1)*24)+a]=timing_1[((context.days_1-1)*24)+a];   \n                            }\n                         context.days_1++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_1==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_1=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_1=parseInt(msg.payload);\n               if (msg.payload=='1') msg.foryou=\"Selected climate temperature\"; \n               else if (msg.payload=='2') msg.foryou=\"Temperature away from home selected\";\n               else if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Hours temperature adjustment: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_1;\nmsg.timing=timing_1;\nmsg.days=context.days_1;\nmsg.selector=context.selector_1;\n\nnode.send([msg,null,null]);\n\nif (context.saving_1===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_1);\n        node.send([null,msg,null]); \n        context.saving_1=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 400,
        "y": 760,
        "wires": [
            [
                "3368afaa.5e016"
            ],
            [
                "508fc0ba.929fc"
            ],
            [
                "d6029887.aad568"
            ]
        ]
    },
    {
        "id": "9585c061.78738",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 188,
        "y": 820,
        "wires": [
            [
                "ce6c5d9e.ea6a7",
                "207a2c22.9369a4"
            ]
        ]
    },
    {
        "id": "6c525470.0b762c",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 180,
        "y": 920,
        "wires": [
            [
                "3b4eb28f.4d5afe"
            ]
        ]
    },
    {
        "id": "602c0534.97af8c",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_1\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text:\"Set point \" + msg.payload + \"°C\"});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 920,
        "wires": [
            [
                "8624c247.5bbd4",
                "b1336662.0f8198"
            ]
        ]
    },
    {
        "id": "508fc0ba.929fc",
        "type": "file",
        "z": "1b4862bf.e3a47d",
        "name": "backup",
        "filename": "/home/aime/aime_data/thermo_scheduler_living.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 600,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "207a2c22.9369a4",
        "type": "file in",
        "z": "1b4862bf.e3a47d",
        "name": "Restore",
        "filename": "/home/aime/aime_data/thermo_scheduler_living.log",
        "format": "utf8",
        "x": 380,
        "y": 840,
        "wires": [
            [
                "852e4dec.3203b"
            ]
        ]
    },
    {
        "id": "852e4dec.3203b",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_1=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 840,
        "wires": [
            [
                "bf19fa63.865328"
            ]
        ]
    },
    {
        "id": "8624c247.5bbd4",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 710,
        "y": 940,
        "wires": []
    },
    {
        "id": "13e67c22.c5fdd4",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "d6029887.aad568"
        ],
        "x": 241.5,
        "y": 871,
        "wires": [
            [
                "207a2c22.9369a4"
            ]
        ]
    },
    {
        "id": "d6029887.aad568",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "13e67c22.c5fdd4"
        ],
        "x": 555,
        "y": 800,
        "wires": []
    },
    {
        "id": "58b9933b.61711c",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "bf19fa63.865328"
        ],
        "x": 235,
        "y": 760,
        "wires": [
            [
                "ce6c5d9e.ea6a7"
            ]
        ]
    },
    {
        "id": "bf19fa63.865328",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "58b9933b.61711c"
        ],
        "x": 755,
        "y": 840,
        "wires": []
    },
    {
        "id": "3368afaa.5e016",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "93a816c6.79e2d8"
        ],
        "x": 555,
        "y": 720,
        "wires": []
    },
    {
        "id": "93a816c6.79e2d8",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "3368afaa.5e016"
        ],
        "x": 115,
        "y": 760,
        "wires": [
            [
                "6b6f33eb.936c9c"
            ]
        ]
    },
    {
        "id": "ef07ba8f.d38db8",
        "type": "ui_template",
        "z": "1b4862bf.e3a47d",
        "group": "da98be7.668a74",
        "name": "Settings page",
        "order": 3,
        "width": 7,
        "height": 6,
        "format": "<script>\n\nvar thedays_0=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_0 = \"BB\";\n\nvar last_0=29;\n\nfunction on_off_0(mm,val)\n{\nif (val==0) { $(mm).height(\"30%\"); $(mm).css('background-color', '#f44336'); } //green\nif (val==1) { $(mm).height(\"60%\"); $(mm).css('background-color', '#4CAF50'); } //green\n}\n\nfunction feedback_0(text)\n{\n$(\"#info\"+ID_0).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_0).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_0(val,sta)\n{\nvar w=\"#td\"+val+ID_0;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_0 = ID_0;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_0(last_0,0); last_0=msg.selector; selec_0(last_0,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_0; on_off_0(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_0; $(v).text(msg.timing[((msg.days-1)*24)+x] == 0 ? 'Off' : 'On')\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_0; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_0).text(thedays_0[msg.days-1]);\n             if ((last_0>4) &&(last_0<29))\n                 $(\"#current\"+ID_0).text(msg.timing[((msg.days-1)*24)+last_0-5]  == 0 ? 'Off' : 'On');\n             else\n                 $(\"#current\"+ID_0).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { feedback_0(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >BOILER CONTROL</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_0 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_0 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_0 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_0 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_0 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_0 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_0 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_0 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_0 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_0 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\"></ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_0 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\"></ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 180,
        "y": 420,
        "wires": [
            [
                "85cb4ca3.7e922"
            ]
        ]
    },
    {
        "id": "85cb4ca3.7e922",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process controls",
        "func": "if ( typeof context.days_0 == 'undefined' ) context.days_0=1;\nif ( typeof context.selector_0 == 'undefined' ) context.selector_0=29;\nif ( typeof context.saving_0 == 'undefined' ) context.saving_0=1;\nif ( typeof context.global.timing_0 == 'undefined' ) \n    {\n        context.global.timing_0=[\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        6,1\n                        ];\n        context.saving_0=1;                    \n    }\nvar timing_0=global.get(\"timing_0\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_0>4)&&(context.selector_0<29))\n                {\n                    timing_0[((context.days_0-1)*24)+context.selector_0-5] = 1; \n                    msg.foryou=\"ON\";\n                }\n                if (context.selector_0==29) { msg.foryou=\"Next day\"; context.days_0++; if (context.days_0>7) { context.days_0 = 1; } }\n                break;\n    case \"d\" :  if ((context.selector_0>4)&&(context.selector_0<29))\n                {\n                    timing_0[((context.days_0-1)*24)+context.selector_0-5] = 0; \n                    msg.foryou=\"OFF\";\n                }\n                if (context.selector_0==29) {  msg.foryou=\"Previous day\";  context.days_0--; if (context.days_0 < 1) { context.days_0 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_0>=5)&&(context.selector_0<28))\n                        {\n                         timing_0[((context.days_0-1)*24)+context.selector_0-4]=timing_0[((context.days_0-1)*24)+context.selector_0-5];   \n                         context.selector_0++;\n                         msg.foryou=\"Value copied to the next slot\";\n                        }\n                if ((context.selector_0==29)&&(context.days_0<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_0[((context.days_0)*24)+a]=timing_0[((context.days_0-1)*24)+a];   \n                            }\n                         context.days_0++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_0==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_0=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_0=parseInt(msg.payload);\n               if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Ignition adjustment hours: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_0;\nmsg.timing=timing_0;\nmsg.days=context.days_0;\nmsg.selector=context.selector_0;\n\nnode.send([msg,null,null]);\n\nif (context.saving_0===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_0);\n        node.send([null,msg,null]); \n        context.saving_0=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 400,
        "y": 460,
        "wires": [
            [
                "c89d474b.6ee1c8"
            ],
            [
                "1af37229.fbcbee"
            ],
            [
                "3f13d1d6.cc7f6e"
            ]
        ]
    },
    {
        "id": "6c4ad40d.9fe3ec",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "x": 188,
        "y": 520,
        "wires": [
            [
                "85cb4ca3.7e922",
                "42612b2b.003394"
            ]
        ]
    },
    {
        "id": "c3cb5254.d1b0f",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 180,
        "y": 620,
        "wires": [
            [
                "34229f88.7d8a2"
            ]
        ]
    },
    {
        "id": "cdb378c4.979f58",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_0\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text: \"State: \" + msg.payload === 0 ? 'OFF' : 'ON'});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 620,
        "wires": [
            [
                "a5455a2a.9baf58",
                "9d37559f.80b6a8"
            ]
        ]
    },
    {
        "id": "1af37229.fbcbee",
        "type": "file",
        "z": "1b4862bf.e3a47d",
        "name": "backup",
        "filename": "/home/aime/aime_data/on_off_scheduler_bedroom.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 600,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "42612b2b.003394",
        "type": "file in",
        "z": "1b4862bf.e3a47d",
        "name": "Restore",
        "filename": "/home/aime/aime_data/on_off_scheduler_bedroom.log",
        "format": "utf8",
        "x": 381,
        "y": 550,
        "wires": [
            [
                "f2045355.3a47c"
            ]
        ]
    },
    {
        "id": "f2045355.3a47c",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_0=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 540,
        "wires": [
            [
                "5abe04a4.cf79ac"
            ]
        ]
    },
    {
        "id": "a5455a2a.9baf58",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 710,
        "y": 640,
        "wires": []
    },
    {
        "id": "7153284c.b2c248",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "3f13d1d6.cc7f6e"
        ],
        "x": 241.5,
        "y": 571,
        "wires": [
            [
                "42612b2b.003394"
            ]
        ]
    },
    {
        "id": "3f13d1d6.cc7f6e",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "7153284c.b2c248"
        ],
        "x": 555,
        "y": 500,
        "wires": []
    },
    {
        "id": "37b8caf4.b86fb6",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "5abe04a4.cf79ac"
        ],
        "x": 235,
        "y": 460,
        "wires": [
            [
                "85cb4ca3.7e922"
            ]
        ]
    },
    {
        "id": "5abe04a4.cf79ac",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "37b8caf4.b86fb6"
        ],
        "x": 755,
        "y": 540,
        "wires": []
    },
    {
        "id": "c89d474b.6ee1c8",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "3f67755b.4997aa"
        ],
        "x": 555,
        "y": 420,
        "wires": []
    },
    {
        "id": "3f67755b.4997aa",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "c89d474b.6ee1c8"
        ],
        "x": 115,
        "y": 460,
        "wires": [
            [
                "ef07ba8f.d38db8"
            ]
        ]
    },
    {
        "id": "4d973db6.93b324",
        "type": "comment",
        "z": "1b4862bf.e3a47d",
        "name": "Tasks",
        "info": "",
        "x": 91.5,
        "y": 30,
        "wires": []
    },
    {
        "id": "6a5f05a0.15db1c",
        "type": "moment",
        "z": "1b4862bf.e3a47d",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 370,
        "y": 320,
        "wires": [
            [
                "c7c59b01.04b4a8"
            ]
        ]
    },
    {
        "id": "3b4eb28f.4d5afe",
        "type": "moment",
        "z": "1b4862bf.e3a47d",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 370,
        "y": 920,
        "wires": [
            [
                "602c0534.97af8c"
            ]
        ]
    },
    {
        "id": "34229f88.7d8a2",
        "type": "moment",
        "z": "1b4862bf.e3a47d",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 370,
        "y": 620,
        "wires": [
            [
                "cdb378c4.979f58"
            ]
        ]
    },
    {
        "id": "85a1fcc1.d772c",
        "type": "ui_template",
        "z": "1b4862bf.e3a47d",
        "group": "58730f98.18158",
        "name": "Settings page",
        "order": 2,
        "width": "7",
        "height": 6,
        "format": "<script>\n\nvar thedays_2=[\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"];\n\nvar ID_2 = \"CC\";\n\nvar last_2=29;\n\nfunction on_off_2(mm,val)\n{\nif (val==0) { $(mm).height(\"30%\"); $(mm).css('background-color', '#f44336'); } //green\nif (val==1) { $(mm).height(\"60%\"); $(mm).css('background-color', '#4CAF50'); } //green\n}\n\nfunction feedback_2(text)\n{\n$(\"#info\"+ID_2).text(text);\nvar tm=setTimeout(function(){ $(\"#info\"+ID_2).text(\"Ok\"); clearTimeout(tm);}, 3000);\n}\n\nfunction selec_2(val,sta)\n{\nvar w=\"#td\"+val+ID_2;\n if (sta) $(w).css('background-color','#4CAF50'); else $(w).css('background-color','#FFC107');\n}\n\n\n    (function(scope){\n        scope.ID_2 = ID_2;\n        scope.send({payload: '29'})\n        scope.$watch('msg', function(msg) {\n            selec_2(last_2,0); last_2=msg.selector; selec_2(last_2,1);\n            for (var x=0; x<24; x++) \n                { \n                    var w=\"#t\"+x+ID_2; on_off_2(w,msg.timing[((msg.days-1)*24)+x]); \n                    var v=\"#v\"+x+ID_2; $(v).text(msg.timing[((msg.days-1)*24)+x] == 0 ? 'Off' : 'On')\n                } \n            for (var x=0; x<2; x++) { var w=\"#s\"+x+ID_2; $(w).text(msg.timing[168+x]); }\n             $(\"#d0\"+ID_2).text(thedays_0[msg.days-1]);\n             if ((last_2>4) &&(last_2<29))\n                 $(\"#current\"+ID_2).text(msg.timing[((msg.days-1)*24)+last_2-5]  == 0 ? 'Off' : 'On');\n             else\n                 $(\"#current\"+ID_2).text(\"-\");\n                 \n            if (msg.foryou!=\"\") { feedback_2(msg.foryou);  }\n            \n             \n        });\n \n    })(scope);\n      \n\n</script>\n<table width=\"100%\">\n    \n    <tr>\n        <td colspan=24><center><span class=\"smallheadings\" >AIR CLEANING CONTROL</span></center></td>\n        <!--<td colspan=3><center><span class=\"smallheadings\">Clima</span></center></td>\n        <td colspan=3><center><span class=\"smallheadings\">Fuori casa</span></center></td>-->\n    </tr>\n   \n    <tr>\n        <td ng-click=\"send({payload: '29'})\" colspan=24><center><span id=\"{{ 'd0' + ID_2 }}\" style=\"cursor:pointer;color:white;font-size:120%\">MONDAY</span></center></td>\n        <!--<td ng-click=\"send({payload: '1'})\" colspan=3><center><span id=\"s0\" style=\"color:white;font-size:120%\">14</span></center></td>\n        <td ng-click=\"send({payload: '2'})\" colspan=3><center><span id=\"s1\" style=\"color:white;font-size:120%\">20</span></center></td>-->\n    </tr>\n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td29' + ID_2 }}\" colspan=24 style=\"background-color:#9E9E9E;height:2px;\"></td>        \n       <!-- <td id=\"td1\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>\n        <td id=\"td2\" colspan=3 style=\"background-color:#9E9E9E;height:2px;\"></td>-->\n    </tr>  \n\n    <tr>\n        <td ng-click=\"send({payload: '5'})\" class=\"thedays\"><span id=\"{{ 'v0' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't0' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '6'})\" class=\"thedays\"><span id=\"{{ 'v1' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't1' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '7'})\" class=\"thedays\"><span id=\"{{ 'v2' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't2' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '8'})\" class=\"thedays\"><span id=\"{{ 'v3' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't3' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '9'})\" class=\"thedays\"><span id=\"{{ 'v4' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't4' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '10'})\" class=\"thedays\"><span id=\"{{ 'v5' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't5' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '11'})\" class=\"thedays\"><span id=\"{{ 'v6' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't6' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '12'})\" class=\"thedays\"><span id=\"{{ 'v7' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't7' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '13'})\" class=\"thedays\"><span id=\"{{ 'v8' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't8' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '14'})\" class=\"thedays\"><span id=\"{{ 'v9' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't9' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '15'})\" class=\"thedays\"><span id=\"{{ 'v10' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't10' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '16'})\" class=\"thedays\"><span id=\"{{ 'v11' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't11' + ID_2 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td5' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td6' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td7' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td8' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td9' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td10' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td11' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td12' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td13' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td14' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td15' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td16' + ID_2 }}\" class=\"the2px\"></td>\n    </tr>   \n    \n    <tr>\n        <td align=\"center\">0</td>\n        <td align=\"center\">1</td>\n        <td align=\"center\">2</td>\n        <td align=\"center\">3</td>\n        <td align=\"center\">4</td>\n        <td align=\"center\">5</td>\n        <td align=\"center\">6</td>\n        <td align=\"center\">7</td>\n        <td align=\"center\">8</td>\n        <td align=\"center\">9</td>\n        <td align=\"center\">10</td>\n        <td align=\"center\">11</td>\n    </tr> \n    \n    <tr>\n        <td ng-click=\"send({payload: '17'})\" class=\"thedays\"><span id=\"{{ 'v12' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't12' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '18'})\" class=\"thedays\"><span id=\"{{ 'v13' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't13' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '19'})\" class=\"thedays\"><span id=\"{{ 'v14' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't14' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '20'})\" class=\"thedays\"><span id=\"{{ 'v15' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't15' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '21'})\" class=\"thedays\"><span id=\"{{ 'v16' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't16' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '22'})\" class=\"thedays\"><span id=\"{{ 'v17' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't17' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '23'})\" class=\"thedays\"><span id=\"{{ 'v18' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't18' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '24'})\" class=\"thedays\"><span id=\"{{ 'v19' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't19' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '25'})\" class=\"thedays\"><span id=\"{{ 'v20' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't20' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '26'})\" class=\"thedays\"><span id=\"{{ 'v21' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't21' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '27'})\" class=\"thedays\"><span id=\"{{ 'v22' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't22' + ID_2 }}\" class=\"theblocks\"></div></td>\n        <td ng-click=\"send({payload: '28'})\" class=\"thedays\"><span id=\"{{ 'v23' + ID_2 }}\" class=\"thetemps\"></span><div id=\"{{ 't23' + ID_2 }}\" class=\"theblocks\"></div></td>\n    </tr>  \n    \n    <tr style=\"height:2px\">\n        <td id=\"{{ 'td17' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td18' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td19' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td20' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td21' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td22' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td23' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td24' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td25' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td26' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td27' + ID_2 }}\" class=\"the2px\"></td>\n        <td id=\"{{ 'td28' + ID_2 }}\" class=\"the2px\"></td>\n    </tr>  \n    \n    <tr>\n        <td align=\"center\">12</td>\n        <td align=\"center\">13</td>\n        <td align=\"center\">14</td>\n        <td align=\"center\">15</td>\n        <td align=\"center\">16</td>\n        <td align=\"center\">17</td>\n        <td align=\"center\">18</td>\n        <td align=\"center\">19</td>\n        <td align=\"center\">20</td>\n        <td align=\"center\">21</td>\n        <td align=\"center\">22</td>\n        <td align=\"center\">23</td>\n    </tr> \n    \n    <tr height=\"20px\">\n        <td colspan=2 class=\"smallheadings\">Actions:</td>\n\n        <td colspan=10 ><center><span id=\"{{ 'info' + ID_2 }}\" class=\"smallheadings\" ></span></center></td>\n\n    </tr>\n    \n    <tr height=\"10px\">\n        <td colspan=\"12\"></td>\n    </tr>\n\n    <tr style=\"height:48px\">\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'd'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_down\"></ng-md-icon>\n            </button> \n        </td>\n        \n        <td colspan=2><center><span id=\"{{ 'current' + ID_2 }}\" style=\"color:white;font-size:120%\">-</span></center></td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'u'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"keyboard_arrow_up\"></ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 'r'})\"> \n               <ng-md-icon style=\"color: #fff;\" icon=\"content_copy\">\n                    <md-tooltip md-direction=\"bottom\">COPY</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\" ng-click=\"send({payload: 's'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"save\">\n                    <md-tooltip md-direction=\"bottom\">SAVE</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n\n        <td colspan=2>\n            <button class=\"vibrate filled touched smallfont rounded greybuttons\"  ng-click=\"send({payload: 'c'})\"> \n                 <ng-md-icon style=\"color: #fff;\" icon=\"cancel\">\n                    <md-tooltip md-direction=\"bottom\">CANCEL</md-tooltip>\n                </ng-md-icon>\n            </button> \n        </td>\n        <td colspan=1></td>\n    </tr>\n\n</table>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 180,
        "y": 1020,
        "wires": [
            [
                "46c3f1c.8e5e91"
            ]
        ]
    },
    {
        "id": "46c3f1c.8e5e91",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process controls",
        "func": "if ( typeof context.days_2 == 'undefined' ) context.days_2 = 1;\nif ( typeof context.selector_2 == 'undefined' ) context.selector_2 = 29;\nif ( typeof context.saving_2 == 'undefined' ) context.saving_2 = 1;\nif ( typeof context.global.timing_2 == 'undefined' ) \n    {\n        context.global.timing_2=[\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\n                        6,1\n                        ];\n        context.saving_2 = 1;                    \n    }\nvar timing_2=global.get(\"timing_2\");\n\nswitch (msg.payload)\n    {\n    case \"u\" :  if ((context.selector_2>4)&&(context.selector_2<29))\n                {\n                    timing_2[((context.days_2-1)*24)+context.selector_2-5] = 1; \n                    msg.foryou=\"ON\";\n                }\n                if (context.selector_2==29) { msg.foryou=\"Next day\"; context.days_2++; if (context.days_2>7) { context.days_2=1; } }\n                break;\n    case \"d\" :  if ((context.selector_2>4)&&(context.selector_2<29))\n                {\n                    timing_2[((context.days_2-1)*24)+context.selector_2-5] = 0; \n                    msg.foryou=\"OFF\";\n                }\n                if (context.selector_2==29) {  msg.foryou=\"Previous day\";  context.days_2--; if (context.days_2 < 1) { context.days_2 = 7;  } }\n                break;\n    case 'r' :  if ((context.selector_2>=5)&&(context.selector_2<28))\n                        {\n                         timing_2[((context.days_2-1)*24)+context.selector_2-4]=timing_2[((context.days_2-1)*24)+context.selector_2-5];   \n                         context.selector_2++;\n                         msg.foryou=\"Value copied to the next slot\";\n                        }\n                if ((context.selector_2==29)&&(context.days_2<7))\n                        {\n                         for (var a=0;a<24;a++)\n                            {\n                             timing_2[((context.days_2)*24)+a]=timing_2[((context.days_2-1)*24)+a];   \n                            }\n                         context.days_2++;\n                         msg.foryou=\"Settings copied the next day\";\n                        }\n                        else if(context.days_2==7)\n                            msg.foryou=\"End of the week reached!\";\n                break;\n    case 's': context.saving_2=0;  msg.foryou=\"Saved settings\"; break;\n    case '1':\n    case '2':\n    case '3':\n    case '4':\n    case '5':\n    case '6':\n    case '7':\n    case '8':\n    case '9':\n    case '10':\n    case '11':\n    case '12':\n    case '13':\n    case '14':\n    case '15':\n    case '16':\n    case '17':\n    case '18':\n    case '19':\n    case '20':\n    case '21':\n    case '22':\n    case '23':\n    case '24':\n    case '25':\n    case '26':\n    case '27':\n    case '28':\n    case '29': context.selector_2=parseInt(msg.payload);\n               if (msg.payload=='29') msg.foryou=\"Selected day\";\n               else  msg.foryou=\"Ignition adjustment hours: \" + (parseInt(msg.payload)-5);\n    break;\n    case 'c' : msg.payload=\"Nothing\";  msg.foryou=\"Changes canceled\"; node.send([null,null,msg]);\n    }\n\nmsg.temperatures=context.temperatures_2;\nmsg.timing=timing_2;\nmsg.days=context.days_2;\nmsg.selector=context.selector_2;\n\nnode.send([msg,null,null]);\n\nif (context.saving_2===0) \n    { \n       msg.topic=\"\";\n        msg.timing=\"\";\n        msg.payload=JSON.stringify(timing_2);\n        node.send([null,msg,null]); \n        context.saving_2=1;\n    }\n    msg.foryou=\"\"",
        "outputs": "3",
        "noerr": 0,
        "x": 400,
        "y": 1060,
        "wires": [
            [
                "db177c28.0da2f"
            ],
            [
                "5a4f7b43.4ac344"
            ],
            [
                "80176e3.61ae09"
            ]
        ]
    },
    {
        "id": "ca982496.e0b728",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Once only",
        "topic": "",
        "payload": "",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 188,
        "y": 1120,
        "wires": [
            [
                "46c3f1c.8e5e91",
                "186f7d18.962873"
            ]
        ]
    },
    {
        "id": "32ea8bf9.0b03e4",
        "type": "inject",
        "z": "1b4862bf.e3a47d",
        "name": "Every minute",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "x": 180,
        "y": 1220,
        "wires": [
            [
                "f576648f.0b4a58"
            ]
        ]
    },
    {
        "id": "c9f70463.41b768",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Process heat",
        "func": "var timing=global.get(\"timing_2\");\nvar now = new Date(msg.time);\nmsg.payload=timing[(now.getDay()*24)+now.getHours()];\nmsg.frost=timing[168];\nmsg.away=timing[169];\nnode.status({fill:\"blue\",shape:\"dot\",text: \"State: \" + msg.payload === 0 ? 'OFF' : 'ON'});\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 1220,
        "wires": [
            [
                "a5428346.e70d5"
            ]
        ]
    },
    {
        "id": "5a4f7b43.4ac344",
        "type": "file",
        "z": "1b4862bf.e3a47d",
        "name": "backup",
        "filename": "/home/aime/aime_data/on_off_scheduler_living.log",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "x": 600,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "186f7d18.962873",
        "type": "file in",
        "z": "1b4862bf.e3a47d",
        "name": "Restore",
        "filename": "/home/aime/aime_data/on_off_scheduler_living.log",
        "format": "utf8",
        "x": 380,
        "y": 1140,
        "wires": [
            [
                "1e6bdab9.799015"
            ]
        ]
    },
    {
        "id": "1e6bdab9.799015",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "Restore data from SERVER",
        "func": "context.global.timing_2=JSON.parse(msg.payload);\nmsg.payload=\"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 1140,
        "wires": [
            [
                "67b0e182.5d0f4"
            ]
        ]
    },
    {
        "id": "a5428346.e70d5",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "console": "false",
        "complete": "true",
        "x": 710,
        "y": 1240,
        "wires": []
    },
    {
        "id": "dc771ece.dfbdf",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "80176e3.61ae09"
        ],
        "x": 235,
        "y": 1160,
        "wires": [
            [
                "186f7d18.962873"
            ]
        ]
    },
    {
        "id": "80176e3.61ae09",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restore",
        "links": [
            "dc771ece.dfbdf"
        ],
        "x": 555,
        "y": 1100,
        "wires": []
    },
    {
        "id": "af53a4f6.9bfa18",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "67b0e182.5d0f4"
        ],
        "x": 235,
        "y": 1060,
        "wires": [
            [
                "46c3f1c.8e5e91"
            ]
        ]
    },
    {
        "id": "67b0e182.5d0f4",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "restoreSD",
        "links": [
            "af53a4f6.9bfa18"
        ],
        "x": 755,
        "y": 1140,
        "wires": []
    },
    {
        "id": "db177c28.0da2f",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "69e121ab.23e3b"
        ],
        "x": 555,
        "y": 1020,
        "wires": []
    },
    {
        "id": "69e121ab.23e3b",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "setSettings",
        "links": [
            "db177c28.0da2f"
        ],
        "x": 115,
        "y": 1060,
        "wires": [
            [
                "85a1fcc1.d772c"
            ]
        ]
    },
    {
        "id": "f576648f.0b4a58",
        "type": "moment",
        "z": "1b4862bf.e3a47d",
        "name": "time",
        "topic": "",
        "input": "",
        "inputType": "date",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "",
        "locale": "ro_RO",
        "output": "time",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 370,
        "y": 1220,
        "wires": [
            [
                "c9f70463.41b768"
            ]
        ]
    },
    {
        "id": "f0e9e7e7.41cd98",
        "type": "inject",
        "z": "ea4d71f7.a7d58",
        "name": "Refresh Timer",
        "topic": "Refresh Timer",
        "payload": "true",
        "payloadType": "bool",
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "x": 120,
        "y": 100,
        "wires": [
            [
                "bad23a5.01fa2c8",
                "83a57861.da70f8"
            ]
        ]
    },
    {
        "id": "7fa50ff0.6691",
        "type": "ui_button",
        "z": "ea4d71f7.a7d58",
        "name": "Weather Refresh",
        "group": "50aad7dc.310378",
        "order": 1,
        "width": 7,
        "height": 2,
        "passthru": false,
        "label": "TO UPDATE",
        "tooltip": "Update weather data!",
        "color": "",
        "bgcolor": "",
        "icon": "fa-refresh",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 110,
        "y": 180,
        "wires": [
            [
                "bad23a5.01fa2c8",
                "83a57861.da70f8"
            ]
        ]
    },
    {
        "id": "e03da2df.01dd3",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "ba86f22d.5e136",
        "order": 2,
        "width": 4,
        "height": 1,
        "name": "Condition Txt",
        "label": "",
        "format": "{{msg.payload.detail | uppercase}}",
        "layout": "col-center",
        "x": 950,
        "y": 60,
        "wires": []
    },
    {
        "id": "4eaab1a3.15fc1",
        "type": "function",
        "z": "ea4d71f7.a7d58",
        "name": "Prepare Dashboard Data",
        "func": "var windDirection = {};\nvar windDirectionIcon = {};\nvar windSpeed = {};\nvar windSpeedIcon = {};\nvar sunRise = {};\nvar sunSet = {};\nvar conditionIcon = {};\nvar date = new Date ();\n\n/* function for converting meteorogical degree to text */\n\nvar degToCard = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"Nord-Nord-Ost\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"Nord-Ost\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"Ost-Nord-Ost\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"Ost\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"Ost-Süd-Ost\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"Süd-Ost\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"Süd-Süd-Ost\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"Süd\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"Süd-Süd-West\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"Süd-West\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"West-Süd-West\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"West\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"West-Nord-West\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"Nord-West\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"Nord-Nord-West\";\n  }else{\nreturn \"Nord\"; \n  }\n}\n\n/* function for converting meteorogical degree to weather icons */\n\nvar degToCardIcon = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"wi-from-nne\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"wi-from-ne\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"wi-from-ene\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"wi-from-e\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"wi-from-ese\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"wi-from-se\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"wi-from-sse\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"wi-from-s\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"wi-from-ssw\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"wi-from-sw\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"wi-from-wsw\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"wi-from-w\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"wi-from-wnw\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"wi-from-nw\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"wi-from-nnw\";\n  }else{\nreturn \"wi-from-n\"; \n  }\n}\n\n/* Function for converting wind speed into Beaufort scale icon */\n\nvar speedToCardIcon = function(speed){\nif (speed>0.5 && speed<=1.5){\nreturn \"wi-wind-beaufort-1\";\n  }else if (speed>1.5 && speed<=3.3){\nreturn \"wi-wind-beaufort-2\";\n  }else if (speed>3.3 && speed<=5.5){\nreturn \"wi-wind-beaufort-3\";\n  }else if (speed>5.5 && speed<=7.9){\nreturn \"wi-wind-beaufort-4\";\n  }else if (speed>7.9 && speed<=10.7){\nreturn \"wi-wind-beaufort-5\";\n  }else if (speed>10.7 && speed<=13.8){\nreturn \"wi-wind-beaufort-6\";\n  }else if (speed>13.8 && speed<=17.1){\nreturn \"wi-wind-beaufort-7\";\n  }else if (speed>17.1 && speed<=20.7){\nreturn \"wi-wind-beaufort-8\";\n  }else if (speed>20.7 && speed<=24.4){\nreturn \"wi-wind-beaufort-9\";\n  }else if (speed>24.4 && speed<=28.4){\nreturn \"wi-wind-beaufort-10\";\n  }else if (speed>28.4 && speed<=32.6){\nreturn \"wi-wind-beaufort-11\";\n  }else if (speed>32.6){\nreturn \"wi-wind-beaufort-12\";\n  }else{\nreturn \"wi-wind-beaufort-0\"; \n  }\n}\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min + ':' + sec ;\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nconditionIcon.topic = \"ConditionIcon\";\nconditionIcon.payload = owIconMap.get(msg.payload.icon);\n\nwindDirection.topic = \"WindDirection\";\nwindDirection.payload = degToCard(msg.payload.winddirection);\n\nwindDirectionIcon.topic = \"WindDirectionIcon\";\nwindDirectionIcon.payload = degToCardIcon(msg.payload.winddirection);\n\nwindSpeed.topic = \"WindSpeed\";\nwindSpeed.payload = msg.payload.windspeed +  \" m/s\"; /* \" + windDirection.payload; */\n\nwindSpeedIcon.topic = \"WindSpeedIcon\";\nwindSpeedIcon.payload = speedToCardIcon(msg.payload.windspeed);\n\nsunRise.topic = \"SunRise\";\nsunRise.payload = timeConverter(msg.payload.sunrise);\n\nsunSet.topic = \"SunRet\";\nsunSet.payload = timeConverter(msg.payload.sunset);\n\nowIconMap.clear(); //freeing resource\n\nreturn [conditionIcon, windSpeedIcon, windSpeed, windDirection, windDirectionIcon, sunRise, sunSet];",
        "outputs": 7,
        "noerr": 0,
        "x": 630,
        "y": 260,
        "wires": [
            [
                "ce6db0c7.99d4"
            ],
            [
                "b88979e3.ab3178"
            ],
            [
                "337d053c.a1052a"
            ],
            [],
            [
                "4295a3a0.d9826c"
            ],
            [
                "f856a70b.0a0438"
            ],
            [
                "276559d9.75d726"
            ]
        ]
    },
    {
        "id": "337d053c.a1052a",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "641fcca0.9ca564",
        "order": 2,
        "width": 2,
        "height": 3,
        "name": "WindSpeed",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 950,
        "y": 200,
        "wires": []
    },
    {
        "id": "f856a70b.0a0438",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "c8152591.b6ffe8",
        "order": 2,
        "width": 3,
        "height": 2,
        "name": "Sunrise",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 940,
        "y": 340,
        "wires": []
    },
    {
        "id": "276559d9.75d726",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "c8152591.b6ffe8",
        "order": 4,
        "width": 3,
        "height": 2,
        "name": "Sunset",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "col-center",
        "x": 940,
        "y": 420,
        "wires": []
    },
    {
        "id": "9a5d9ae.22ebf68",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "c8152591.b6ffe8",
        "name": "Sunrise Icon",
        "order": 1,
        "width": 1,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunrise\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "9b3e3f6c.6212b",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "c8152591.b6ffe8",
        "name": "Sunset Icon",
        "order": 3,
        "width": 1,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunset\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "4295a3a0.d9826c",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "641fcca0.9ca564",
        "name": "WindDirection icon",
        "order": 3,
        "width": 2,
        "height": 3,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi wi-wind {{msg.payload}}\"></i>\n</div> ",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 970,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "bad23a5.01fa2c8",
        "type": "openweathermap",
        "z": "ea4d71f7.a7d58",
        "name": "Current Weather",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 350,
        "y": 100,
        "wires": [
            [
                "4eaab1a3.15fc1",
                "e03da2df.01dd3",
                "998c4a72.ec3ba8"
            ]
        ]
    },
    {
        "id": "b88979e3.ab3178",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "641fcca0.9ca564",
        "name": "WindSpeed Icon",
        "order": 1,
        "width": 2,
        "height": 3,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-3x wi wi-wind {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 960,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d0be5cc7.64001",
        "type": "debug",
        "z": "ea4d71f7.a7d58",
        "name": "Forecast debug",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 620,
        "y": 880,
        "wires": []
    },
    {
        "id": "7d679a2b.23aea4",
        "type": "comment",
        "z": "ea4d71f7.a7d58",
        "name": "Open Weather API für aktuelles Wetter und Forecast",
        "info": "",
        "x": 210,
        "y": 40,
        "wires": []
    },
    {
        "id": "ce6db0c7.99d4",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "ba86f22d.5e136",
        "name": "Condition Icon",
        "order": 1,
        "width": 4,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-4x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 960,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "83a57861.da70f8",
        "type": "openweathermap",
        "z": "ea4d71f7.a7d58",
        "name": "5 Day Forecast",
        "wtype": "forecast",
        "lon": "",
        "lat": "",
        "city": "Iasi",
        "country": "RO",
        "language": "en",
        "x": 330,
        "y": 740,
        "wires": [
            [
                "5e22f228.76158c",
                "4d8fe150.5b19b",
                "d665ebbe.2e8a08",
                "d0be5cc7.64001"
            ]
        ]
    },
    {
        "id": "5e22f228.76158c",
        "type": "function",
        "z": "ea4d71f7.a7d58",
        "name": "Prepare Forecast Icon",
        "func": "var wfcIcon1 = {};\nvar wfcIcon2 = {}; \nvar wfcIcon3 = {};\nvar wfcIcon4 = {};\nvar wfcIcon5 = {};\nvar wfcIcon6 = {};\nvar wfcIcon7 = {};\nvar wfcIcon8 = {};\n\n\nvar date = new Date ();\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min; /* + ':' + sec ;*/\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nwfcIcon1.topic = msg.payload[0].dt_txt;\nwfcIcon1.payload = owIconMap.get(msg.payload[0].weather[0].icon);\n\nwfcIcon2.topic = msg.payload[1].dt_txt;\nwfcIcon2.payload = owIconMap.get(msg.payload[1].weather[0].icon);\n\nwfcIcon3.topic = msg.payload[2].dt_txt;\nwfcIcon3.payload = owIconMap.get(msg.payload[2].weather[0].icon);\n\nwfcIcon4.topic = msg.payload[3].dt_txt;\nwfcIcon4.payload = owIconMap.get(msg.payload[3].weather[0].icon);\n\nwfcIcon5.topic = msg.payload[4].dt_txt;\nwfcIcon5.payload = owIconMap.get(msg.payload[4].weather[0].icon);\n\nwfcIcon6.topic = msg.payload[5].dt_txt;\nwfcIcon6.payload = owIconMap.get(msg.payload[5].weather[0].icon);\n\nwfcIcon7.topic = msg.payload[6].dt_txt;\nwfcIcon7.payload = owIconMap.get(msg.payload[6].weather[0].icon);\n\nwfcIcon8.topic = msg.payload[7].dt_txt;\nwfcIcon8.payload = owIconMap.get(msg.payload[7].weather[0].icon);\n\n\nowIconMap.clear(); //freeing resource\n\nreturn [wfcIcon1, wfcIcon2, wfcIcon3, wfcIcon4, wfcIcon5, wfcIcon6, wfcIcon7, wfcIcon8];",
        "outputs": 8,
        "noerr": 0,
        "x": 640,
        "y": 780,
        "wires": [
            [
                "573d4916.1e1db8"
            ],
            [
                "bb504d64.e4954"
            ],
            [
                "9bc1beef.bdd74"
            ],
            [
                "a1039303.83de3"
            ],
            [
                "ccc5d7ec.4308b8"
            ],
            [
                "3f1b10a6.7baa2"
            ],
            [
                "6159f325.ad411c"
            ],
            [
                "8b0233aa.f6fbf"
            ]
        ]
    },
    {
        "id": "573d4916.1e1db8",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 1",
        "order": 2,
        "width": 1,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "bb504d64.e4954",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 2",
        "order": 3,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "9bc1beef.bdd74",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 3",
        "order": 4,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "a1039303.83de3",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 4",
        "order": 5,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "ccc5d7ec.4308b8",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 5",
        "order": 6,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "3f1b10a6.7baa2",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 6",
        "order": 7,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "6159f325.ad411c",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 7",
        "order": 8,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "8b0233aa.f6fbf",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "WFc Icon 8",
        "order": 9,
        "width": 2,
        "height": 2,
        "format": "<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-3x wi {{msg.payload}}\"></i>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 950,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "4d8fe150.5b19b",
        "type": "function",
        "z": "ea4d71f7.a7d58",
        "name": "Prepare Forecast Data",
        "func": "var fcdata = {};\n\nfcdata.payload = {\n  forecast: {\n    dt00: {\n      dt_txt: msg.payload[0].dt_txt,\n      temp_min: msg.payload[0].main.temp_min,\n      temp_max: msg.payload[0].main.temp_max,\n      temp: msg.payload[0].main.temp,\n      desc: msg.payload[0].weather[0].description\n    },\n    dt01: {\n      dt_txt: msg.payload[1].dt_txt,\n      temp_min: msg.payload[1].main.temp_min,\n      temp_max: msg.payload[1].main.temp_max,\n      temp: msg.payload[1].main.temp,\n      desc: msg.payload[1].weather[0].description\n    },\n    dt02: {\n      dt_txt: msg.payload[2].dt_txt,\n      temp_min: msg.payload[2].main.temp_min,\n      temp_max: msg.payload[2].main.temp_max,\n      temp: msg.payload[2].main.temp,\n      desc: msg.payload[2].weather[0].description\n    },\n    dt03: {\n      dt_txt: msg.payload[3].dt_txt,\n      temp_min: msg.payload[3].main.temp_min,\n      temp_max: msg.payload[3].main.temp_max,\n      temp: msg.payload[3].main.temp,\n      desc: msg.payload[3].weather[0].description\n    },\n    dt04: {\n      dt_txt: msg.payload[4].dt_txt,\n      temp_min: msg.payload[4].main.temp_min,\n      temp_max: msg.payload[4].main.temp_max,\n      temp: msg.payload[4].main.temp,\n      desc: msg.payload[4].weather[0].description\n    },\n    dt05: {\n      dt_txt: msg.payload[5].dt_txt,\n      temp_min: msg.payload[5].main.temp_min,\n      temp_max: msg.payload[5].main.temp_max,\n      temp: msg.payload[5].main.temp,\n      desc: msg.payload[5].weather[0].description\n    },\n    dt06: {\n      dt_txt: msg.payload[6].dt_txt,\n      temp_min: msg.payload[6].main.temp_min,\n      temp_max: msg.payload[6].main.temp_max,\n      temp: msg.payload[6].main.temp,\n      desc: msg.payload[6].weather[0].description\n    },\n    dt07: {\n      dt_txt: msg.payload[7].dt_txt,\n      temp_min: msg.payload[7].main.temp_min,\n      temp_max: msg.payload[7].main.temp_max,\n      temp: msg.payload[7].main.temp,\n      desc: msg.payload[7].weather[0].description\n    }\n  }\n}\n\n\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "x": 640,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "150333a8.d4adac",
        "type": "ui_template",
        "z": "ea4d71f7.a7d58",
        "group": "8a6301f2.577b5",
        "name": "Forecast",
        "order": 1,
        "width": 15,
        "height": 1,
        "format": "<div layout=\"row\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.row\">\n  <span flex style=\"color: white\">{{data.cell01}}</span>\n  <span flex style=\"color: white\">{{data.cell02}}</span>\n  <span flex style=\"color: white\">{{data.cell03}}</span>\n  <span flex style=\"color: white\">{{data.cell04}}</span>\n  <span flex style=\"color: white\">{{data.cell05}}</span>\n  <span flex style=\"color: white\">{{data.cell06}}</span>\n  <span flex style=\"color: white\">{{data.cell07}}</span>\n  <span flex style=\"color: white\">{{data.cell08}}</span>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 940,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "d665ebbe.2e8a08",
        "type": "function",
        "z": "ea4d71f7.a7d58",
        "name": "Prepare forecast for UI widget",
        "func": "var fcdata = {};\n\n// prepare forecast data for CSS based ui widget\n\nfcdata.payload = {\n  row: {\n  \tdata01: {\n  \t\tcell01: msg.payload[0].dt_txt.substring(11, 16),\n  \t\tcell02: msg.payload[1].dt_txt.substring(11, 16),\n  \t\tcell03: msg.payload[2].dt_txt.substring(11, 16),\n  \t\tcell04: msg.payload[3].dt_txt.substring(11, 16),\n  \t\tcell05: msg.payload[4].dt_txt.substring(11, 16),\n  \t\tcell06: msg.payload[5].dt_txt.substring(11, 16),\n  \t\tcell07: msg.payload[6].dt_txt.substring(11, 16),\n  \t\tcell08: msg.payload[7].dt_txt.substring(11, 16)\n  \t},\n  \tdata02: {\n  \t\tcell01: msg.payload[0].main.temp,\n  \t\tcell02: msg.payload[1].main.temp,\n  \t\tcell03: msg.payload[2].main.temp,\n  \t\tcell04: msg.payload[3].main.temp,\n  \t\tcell05: msg.payload[4].main.temp,\n  \t\tcell06: msg.payload[5].main.temp,\n  \t\tcell07: msg.payload[6].main.temp,\n  \t\tcell08: msg.payload[7].main.temp\n  \t}\n  }\n}\n\nreturn fcdata;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 1000,
        "wires": [
            [
                "150333a8.d4adac"
            ]
        ]
    },
    {
        "id": "998c4a72.ec3ba8",
        "type": "function",
        "z": "ea4d71f7.a7d58",
        "name": "Get",
        "func": "var msg1 = { payload:msg.payload.temp_maxc };\nvar msg2 = { payload:msg.payload.tempc };\nvar msg3 = { payload:msg.payload.temp_minc };\n\nreturn [ msg1, msg2, msg3 ];",
        "outputs": 3,
        "noerr": 0,
        "x": 570,
        "y": 400,
        "wires": [
            [
                "a7470de0.038d4"
            ],
            [
                "511a48e0.510628"
            ],
            [
                "37634383.45982c"
            ]
        ],
        "outputLabels": [
            "Temp Max",
            "Current Temp",
            "Temp Min",
            "Description",
            "Weather icon",
            ""
        ]
    },
    {
        "id": "a7470de0.038d4",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "c86ffc6e.09072",
        "order": 4,
        "width": 2,
        "height": 1,
        "name": "Max °C",
        "label": "<font size=6>H",
        "format": "<font size=4>{{msg.payload.toFixed(0)}}°",
        "layout": "row-center",
        "x": 940,
        "y": 500,
        "wires": []
    },
    {
        "id": "511a48e0.510628",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "c86ffc6e.09072",
        "order": 1,
        "width": 5,
        "height": 2,
        "name": "Temp °C",
        "label": "",
        "format": "<font size=6>{{msg.payload.toFixed(0)}}°",
        "layout": "col-center",
        "x": 940,
        "y": 540,
        "wires": []
    },
    {
        "id": "37634383.45982c",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "c86ffc6e.09072",
        "order": 2,
        "width": 2,
        "height": 1,
        "name": "Min °C",
        "label": "<font size=6>L",
        "format": "<font size=4>{{msg.payload.toFixed(0)}}°",
        "layout": "row-center",
        "x": 930,
        "y": 580,
        "wires": []
    },
    {
        "id": "1687db9c.445944",
        "type": "moment",
        "z": "ea4d71f7.a7d58",
        "name": "",
        "topic": "",
        "input": "payload",
        "inputType": "msg",
        "inTz": "ETC/GMT",
        "adjAmount": "3",
        "adjType": "hours",
        "adjDir": "add",
        "format": "lll",
        "locale": "ro_RO",
        "output": "payload",
        "outputType": "msg",
        "outTz": "ETC/GMT",
        "x": 640,
        "y": 1080,
        "wires": [
            [
                "10fd318e.63773e"
            ]
        ]
    },
    {
        "id": "bdc646f8.569218",
        "type": "inject",
        "z": "ea4d71f7.a7d58",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 150,
        "y": 1080,
        "wires": [
            [
                "1687db9c.445944"
            ]
        ]
    },
    {
        "id": "10fd318e.63773e",
        "type": "ui_text",
        "z": "ea4d71f7.a7d58",
        "group": "d70df4a5.8022e8",
        "order": 1,
        "width": "15",
        "height": "1",
        "name": "Date & Time",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-center",
        "x": 950,
        "y": 1080,
        "wires": []
    },
    {
        "id": "ed84747d.c38168",
        "type": "ui_template",
        "z": "6ad0297f.6ffa38",
        "group": "c5da922e.7cb7c",
        "name": "MQTT Output Console",
        "order": 1,
        "width": 9,
        "height": 2,
        "format": "<script>\nvar dt = new Date();\ndocument.getElementById(\"datetime\").innerHTML = ((\"0\"+dt.getDate()).slice(-2)) +\".\"+ ((\"0\"+(dt.getMonth()+1)).slice(-2)) +\".\"+ (dt.getFullYear()) +\" \"+ ((\"0\"+dt.getHours()).slice(-2)) +\":\"+ ((\"0\"+dt.getMinutes()).slice(-2));\n</script>\n\n<ul>\n <li ng-repeat=\"x in msg.payload\">\n     <p>Date/Time: <span id=\"datetime\"></span></p>\n        <font color=\"red\">{{x.topic}}\n        </font>\n        <ul>\n            <li>{{x.payload}}</li>\n        </ul>\n </li>\n</ul>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "x": 700,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "c676abca.2fa5a8",
        "type": "ui_text",
        "z": "18fa541a.7c5fcc",
        "group": "8403d3c3.655c1",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Humidity Bedroom",
        "label": "Humi:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 630,
        "y": 100,
        "wires": []
    },
    {
        "id": "705fb6f5.2fca98",
        "type": "ui_text",
        "z": "18fa541a.7c5fcc",
        "group": "ef3f4541.c58508",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Humidity Living",
        "label": "Humi:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "x": 620,
        "y": 460,
        "wires": []
    },
    {
        "id": "374af16c.c4613e",
        "type": "comment",
        "z": "1b4862bf.e3a47d",
        "name": "Bedroom",
        "info": "",
        "x": 160,
        "y": 80,
        "wires": []
    },
    {
        "id": "c5a1520f.3dd78",
        "type": "comment",
        "z": "1b4862bf.e3a47d",
        "name": "Control Boiler",
        "info": "",
        "x": 170,
        "y": 380,
        "wires": []
    },
    {
        "id": "309940e2.5a1ab",
        "type": "comment",
        "z": "1b4862bf.e3a47d",
        "name": "Living Temp Control",
        "info": "",
        "x": 190,
        "y": 680,
        "wires": []
    },
    {
        "id": "dff4ba55.b9af98",
        "type": "comment",
        "z": "1b4862bf.e3a47d",
        "name": "Air Cleaning Control",
        "info": "",
        "x": 190,
        "y": 980,
        "wires": []
    },
    {
        "id": "6c3f2de1.d1b714",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "ON \\ OFF - Contol",
        "func": "if (msg.payload[0] < (msg.payload[1] + 1) && msg.payload[0] > (msg.payload[1] - 1)) \n{\nmsg.payload = 0;\n}\nelse \n{\nmsg.payload = 1;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 240,
        "wires": [
            [
                "fcdc32f3.86af",
                "25a089ac.c19cd6"
            ]
        ]
    },
    {
        "id": "51bbb145.31d94",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "links": [
            "e53fcf1a.1ae42"
        ],
        "x": 935,
        "y": 160,
        "wires": [
            [
                "1e26efc4.a53bf"
            ]
        ]
    },
    {
        "id": "25a089ac.c19cd6",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "links": [
            "2ff562db.ec300e"
        ],
        "x": 1195,
        "y": 240,
        "wires": []
    },
    {
        "id": "e53fcf1a.1ae42",
        "type": "link out",
        "z": "18fa541a.7c5fcc",
        "name": "",
        "links": [
            "51bbb145.31d94"
        ],
        "x": 1135,
        "y": 240,
        "wires": []
    },
    {
        "id": "2ff562db.ec300e",
        "type": "link in",
        "z": "d56b74d9.9a4a28",
        "name": "",
        "links": [
            "25a089ac.c19cd6"
        ],
        "x": 495,
        "y": 360,
        "wires": [
            [
                "a2da20c4.bcd84"
            ]
        ]
    },
    {
        "id": "da443b48.ffc9e8",
        "type": "link in",
        "z": "d56b74d9.9a4a28",
        "name": "",
        "links": [
            "a3138a4e.ccae98"
        ],
        "x": 495,
        "y": 440,
        "wires": [
            [
                "a2eafb03.e99488"
            ]
        ]
    },
    {
        "id": "c7af2ac2.67a288",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "ON \\ OFF - Contol",
        "func": "if (msg.payload[0] < (msg.payload[1] + 1) && msg.payload[0] > (msg.payload[1] - 1)) \n{\nmsg.payload = 0;\n}\nelse \n{\nmsg.payload = 1;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 840,
        "wires": [
            [
                "97f78931.dc7028",
                "a3138a4e.ccae98"
            ]
        ]
    },
    {
        "id": "a3138a4e.ccae98",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "links": [
            "da443b48.ffc9e8"
        ],
        "x": 1195,
        "y": 840,
        "wires": []
    },
    {
        "id": "57adaa3.fe3be54",
        "type": "link in",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "links": [
            "dba0f772.79b418"
        ],
        "x": 935,
        "y": 760,
        "wires": [
            [
                "b1336662.0f8198"
            ]
        ]
    },
    {
        "id": "dba0f772.79b418",
        "type": "link out",
        "z": "18fa541a.7c5fcc",
        "name": "",
        "links": [
            "57adaa3.fe3be54"
        ],
        "x": 1135,
        "y": 320,
        "wires": []
    },
    {
        "id": "fcdc32f3.86af",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 180,
        "wires": []
    },
    {
        "id": "97f78931.dc7028",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 780,
        "wires": []
    },
    {
        "id": "b1336662.0f8198",
        "type": "join",
        "z": "1b4862bf.e3a47d",
        "name": "Join - Set & Temp",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 1010,
        "y": 800,
        "wires": [
            [
                "97f78931.dc7028",
                "c7af2ac2.67a288"
            ]
        ]
    },
    {
        "id": "1e26efc4.a53bf",
        "type": "join",
        "z": "1b4862bf.e3a47d",
        "name": "Join - Set & Temp",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "num",
        "reduceFixup": "",
        "x": 1010,
        "y": 200,
        "wires": [
            [
                "6c3f2de1.d1b714",
                "fcdc32f3.86af"
            ]
        ]
    },
    {
        "id": "34d1b88d.c29de8",
        "type": "link in",
        "z": "d56b74d9.9a4a28",
        "name": "",
        "links": [
            "7b0df84c.142fe8"
        ],
        "x": 495,
        "y": 520,
        "wires": [
            [
                "a7370cbb.95e5c"
            ]
        ]
    },
    {
        "id": "9d37559f.80b6a8",
        "type": "function",
        "z": "1b4862bf.e3a47d",
        "name": "ON \\ OFF - Contol",
        "func": "var msg1= { payload:msg.payload};\nreturn msg1;",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 540,
        "wires": [
            [
                "817157cc.bdea98",
                "7b0df84c.142fe8"
            ]
        ]
    },
    {
        "id": "7b0df84c.142fe8",
        "type": "link out",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "links": [
            "34d1b88d.c29de8"
        ],
        "x": 1195,
        "y": 540,
        "wires": []
    },
    {
        "id": "817157cc.bdea98",
        "type": "debug",
        "z": "1b4862bf.e3a47d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 480,
        "wires": []
    },
    {
        "id": "cd46a0a4.4475",
        "type": "throttle",
        "z": "18fa541a.7c5fcc",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 180,
        "wires": [
            [
                "10c7775e.8db8a9"
            ]
        ]
    },
    {
        "id": "40ef5de4.133024",
        "type": "throttle",
        "z": "18fa541a.7c5fcc",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 300,
        "wires": [
            [
                "c762924c.3dc6b"
            ]
        ]
    },
    {
        "id": "dcbd0e7f.ccde1",
        "type": "debug",
        "z": "18fa541a.7c5fcc",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 290,
        "y": 80,
        "wires": []
    },
    {
        "id": "616dbb04.e235d4",
        "type": "throttle",
        "z": "18fa541a.7c5fcc",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 340,
        "wires": [
            [
                "c762924c.3dc6b"
            ]
        ]
    },
    {
        "id": "ed0bbda4.5d581",
        "type": "throttle",
        "z": "18fa541a.7c5fcc",
        "name": "5 min",
        "throttleType": "time",
        "timeLimit": "5",
        "timeLimitType": "minutes",
        "countLimit": 0,
        "blockSize": 0,
        "locked": false,
        "x": 570,
        "y": 220,
        "wires": [
            [
                "10c7775e.8db8a9"
            ]
        ]
    }
]